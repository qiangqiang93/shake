{"remainingRequest":"/Users/qiang/work/hytx/circle/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/circle/src/components/Wrapper/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/circle/src/components/Wrapper/index.vue","mtime":1548828393654},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { isIos } from '../../utils';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'Wrapper',\n  data: function data() {\n    return {\n      isIos: false,\n      scrolled: 0,\n      header: null,\n      footer: null,\n      scrollHeight: null,\n      windowHeight: null\n    };\n  },\n  props: ['paddingTop'],\n  activated: function activated() {\n    window.addEventListener('scroll', this.scrollHandler, false);\n    document.documentElement.scrollTop = this.scrolled;\n  },\n  deactivated: function deactivated() {\n    window.removeEventListener('scroll', this.scrollHandler, false);\n  },\n  mounted: function mounted() {\n    this.isIos = isIos();\n    var pageWidth = 750;\n    var slots = this.$slots.default;\n    this.windowHeight = document.documentElement.clientHeight;\n    if (!this.$slots.default) return false;\n\n    try {\n      var vueHeader = slots.find(function (item) {\n        return item.data && item.data.ref === 'header';\n      });\n      var vueFooter = slots.find(function (item) {\n        return item.data && item.data.ref === 'footer';\n      });\n      this.header = vueHeader ? vueHeader.elm : null;\n      this.footer = vueFooter ? vueFooter.elm : null;\n    } catch (err) {// nothing\n    }\n\n    window.addEventListener('scroll', this.scrollHandler, false);\n  },\n  destroyed: function destroyed() {\n    window.removeEventListener('scroll', this.scrollHandler, false);\n  },\n  methods: {\n    scrollHandler: function scrollHandler() {\n      var scrolled = document.documentElement.scrollTop || document.body.scrollTop;\n      this.scrollHeight = document.documentElement.scrollHeight;\n      var windowHeight = document.documentElement.clientHeight;\n      var updateWindowHeight = this.windowHeight === windowHeight;\n      this.windowHeight = updateWindowHeight ? this.windowHeight : windowHeight;\n\n      if (this.isIos) {\n        if (this.header && this.header.style.display !== 'none') {\n          this.header.style.position = scrolled <= 0 ? 'absolute' : 'fixed';\n        }\n\n        if (this.footer && this.footer.style.display !== 'none') {\n          var scrollBottom = scrolled + this.windowHeight >= this.scrollHeight;\n          this.footer.style.position = scrollBottom ? 'absolute' : 'fixed';\n        }\n      } else {\n        this.header.style.position = 'fixed';\n        this.footer.style.position = 'fixed';\n      }\n\n      this.scrolled = scrolled;\n      this.$emit('scrolling', scrolled, this.scrollHeight);\n      this.$emit('isButton', scrolled + this.windowHeight >= this.scrollHeight);\n    }\n  },\n  computed: _objectSpread({}, mapState({\n    platform: function platform(state) {\n      return state.system.platform;\n    }\n  }), {\n    wrapperStyle: function wrapperStyle() {\n      if (this.paddingTop) {\n        return {\n          'padding-top': this.paddingTop\n        };\n      } else if (this.header) {\n        return {\n          'padding-top': '100px'\n        };\n      }\n    }\n  })\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- \n    @name   Wrapper\n    @desc   滚动时固定header和footer并实时监听滚动的容器组件\n    @props\n            slot              插槽\n            scrolling         滚动时的处理函数    实时返回当前滚动位置\n            paddingTop        距离顶端高度\n-->\n\n<template>\n  <div class=\"app-wraper\" :style=\"wrapperStyle\">\n    <slot></slot>\n  </div>\n</template>\n\n<script>\nimport { isIos } from '../../utils'\nimport { mapState } from 'vuex'\nexport default {\n  name: 'Wrapper',\n  data() {\n    return {\n      isIos: false,\n      scrolled: 0,\n      header: null,\n      footer: null,\n      scrollHeight: null,\n      windowHeight: null\n    }\n  },\n  props: ['paddingTop'],\n  activated() {\n    window.addEventListener('scroll', this.scrollHandler, false)\n    document.documentElement.scrollTop = this.scrolled\n  },\n  deactivated() {\n    window.removeEventListener('scroll', this.scrollHandler, false)\n  },\n  mounted() {\n    this.isIos = isIos()\n    let pageWidth = 750\n    let slots = this.$slots.default\n    this.windowHeight = document.documentElement.clientHeight\n    if (!this.$slots.default) return false\n    try {\n      let vueHeader = slots.find(\n        item => item.data && item.data.ref === 'header'\n      )\n      let vueFooter = slots.find(\n        item => item.data && item.data.ref === 'footer'\n      )\n      this.header = vueHeader ? vueHeader.elm : null\n      this.footer = vueFooter ? vueFooter.elm : null\n    } catch (err) {\n      // nothing\n    }\n    window.addEventListener('scroll', this.scrollHandler, false)\n  },\n  destroyed() {\n    window.removeEventListener('scroll', this.scrollHandler, false)\n  },\n  methods: {\n    scrollHandler() {\n      let scrolled =\n        document.documentElement.scrollTop || document.body.scrollTop\n      this.scrollHeight = document.documentElement.scrollHeight\n      let windowHeight = document.documentElement.clientHeight\n      let updateWindowHeight = this.windowHeight === windowHeight\n      this.windowHeight = updateWindowHeight ? this.windowHeight : windowHeight\n      if (this.isIos) {\n        if (this.header && this.header.style.display !== 'none') {\n          this.header.style.position = scrolled <= 0 ? 'absolute' : 'fixed'\n        }\n        if (this.footer && this.footer.style.display !== 'none') {\n          let scrollBottom = scrolled + this.windowHeight >= this.scrollHeight\n          this.footer.style.position = scrollBottom ? 'absolute' : 'fixed'\n        }\n      } else {\n        this.header.style.position = 'fixed'\n        this.footer.style.position = 'fixed'\n      }\n      this.scrolled = scrolled\n      this.$emit('scrolling', scrolled, this.scrollHeight)\n      this.$emit('isButton', scrolled + this.windowHeight >= this.scrollHeight)\n    }\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    }),\n    wrapperStyle: function() {\n      if (this.paddingTop) {\n        return {\n          'padding-top': this.paddingTop\n        }\n      } else if (this.header) {\n        return {\n          'padding-top': '100px'\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.app-wraper {\n  overflow: hidden;\n  min-height: 100vh;\n  position: relative;\n  box-sizing: border-box;\n  background: #fff;\n}\n</style>"],"sourceRoot":"src/components/Wrapper"}]}