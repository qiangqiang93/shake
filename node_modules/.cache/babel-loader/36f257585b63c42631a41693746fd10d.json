{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/thread-loader/dist/cjs.js!/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/card/detail/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/card/detail/index.vue","mtime":1547540303981},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/qiang/work/hytx/hytx-rebuild/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/qiang/work/hytx/hytx-rebuild/node_modules/@babel/runtime/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport QRCode from 'qrcode';\nimport Logo from './logo.png';\nimport card from '../../../api/card';\nimport html2canvas from 'html2canvas';\nimport circle from '../../../api/circle';\nimport Card from '../../../components/Card';\nimport { mapActions, mapState } from 'vuex';\nimport AppLoading from '../../../components/AppLoading';\nimport Wrapper from '../../../components/Wrapper';\nimport AppAblum from '../../../components/AppAblum';\nimport RegisterGuid from '../../../components/RegisterGuid';\nimport sdkService from '../../../service/sdkService';\nimport httpService from '../../../service/httpService';\nimport guideService from '../../../service/guideService';\nimport shareService from '../../../service/shareService';\nimport dialogService from '../../../service/dialogService';\nimport AppHeader from '../../../components/AppHeader';\nimport FooterInfo from '../../../components/FooterInfo';\nexport default {\n  name: 'cardDetail',\n  data: function data() {\n    return {\n      card: {},\n      // 名片信息\n      photos: [],\n      // 名片相册\n      ablum: null,\n      // 相册\n      userId: null,\n      // 名片的userId\n      isMine: false,\n      // 是否本人\n      loading: true,\n      // 加载名片\n      cardName: '名片',\n      // 名片名称\n      showOperate: false,\n      // 是否显示生成图片\n      showProfile: false,\n      // 显示全部个人简介\n      showMore: '...展开',\n      // 个人简介显示更多\n      shareOptions: null // 分享配置\n\n    };\n  },\n  mounted: function mounted() {\n    this.userId = parseInt(this.$route.params.id);\n    if (this.user) this.isMine = this.user.id === this.userId;\n    this.getCardInfo();\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    // 离开清除名片缓存\n    if (to.path !== '/card/preview') {\n      this['system/updateRouter']({\n        type: 'del',\n        data: 'cardDetail'\n      });\n    }\n\n    next();\n  },\n  methods: _objectSpread({}, mapActions(['user/updateUser', 'system/updateRouter']), {\n    // 获取名片信息\n    getCardInfo: function () {\n      var _getCardInfo = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return card.getCardByUserId(this.userId);\n\n              case 3:\n                res = _context.sent;\n\n                if (!(res.status !== 0)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                throw new Error(res.message);\n\n              case 6:\n                if (!Array.isArray(res.data)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                throw new Error('Ta还没有完善个人信息');\n\n              case 8:\n                this.card = res.data;\n                this.loading = false;\n                this.getIMG(res.data.logo);\n                this.$nextTick(function () {\n                  _this.showProfile = _this.$refs.profile.offsetHeight > 190;\n                });\n\n                try {\n                  debugger;\n                  this.photos = JSON.parse(res.data.album);\n                } catch (e) {\n                  this.photos = [];\n                }\n\n                this.shareConfig();\n                _context.next = 19;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](0);\n                dialogService.alert(_context.t0.message);\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 16]]);\n      }));\n\n      function getCardInfo() {\n        return _getCardInfo.apply(this, arguments);\n      }\n\n      return getCardInfo;\n    }(),\n    // 分享配置\n    shareConfig: function shareConfig() {\n      this.shareOptions = sdkService.cardConfig(this.card, this.userId);\n      if (this.platform !== 'wechat') return;\n      sdkService.share(this.shareOptions);\n    },\n    // 查看相册\n    showAblum: function showAblum(index) {\n      this.ablum = {\n        index: index,\n        ablum: this.photos\n      };\n    },\n    // 关闭相册\n    closeAblum: function closeAblum() {\n      this.ablum = null;\n    },\n    // 个人简介收起/展开\n    toggleShow: function toggleShow() {\n      this.showMore = this.showMore === '...展开' ? '收起' : '...展开';\n    },\n    // 点击分享\n    shareHandler: function shareHandler() {\n      shareService(this.shareOptions);\n    },\n    // toggleOperate\n    toggleOperate: function toggleOperate() {\n      this.showOperate = !this.showOperate;\n    },\n    // scrollHandler\n    scrollHandler: function scrollHandler(scrolled, scrollHeight) {\n      if (this.showOperate) this.showOperate = false;\n    },\n    // 收藏/取消收藏\n    toggleCollecte: function toggleCollecte() {\n      var _self = this;\n\n      if (!this.user) {\n        guideService.login();\n        return false;\n      }\n\n      if (this.card.has_holder) {\n        this.cancleCollecte();\n      } else {\n        this.collecteCard();\n      }\n    },\n    // 收藏名片\n    collecteCard: function () {\n      var _collecteCard = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return card.collecteCard(this.card.card_id);\n\n              case 3:\n                res = _context2.sent;\n\n                if (!(res.status !== 0)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                throw new Error(res.message);\n\n              case 6:\n                this.$set(this.card, 'has_holder', true);\n                dialogService.toast('收藏成功');\n                this['user/updateUser']({\n                  card_num: Number(this.user.card_num) + 1\n                });\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                dialogService.alert(_context2.t0.message);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 11]]);\n      }));\n\n      function collecteCard() {\n        return _collecteCard.apply(this, arguments);\n      }\n\n      return collecteCard;\n    }(),\n    // 取消收藏名片\n    cancleCollecte: function () {\n      var _cancleCollecte = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return card.cancleCollecte(this.card.card_id);\n\n              case 3:\n                res = _context3.sent;\n\n                if (!(res.status !== 0)) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                throw new Error(res.message);\n\n              case 6:\n                this.$set(this.card, 'has_holder', false);\n                dialogService.toast('取消收藏');\n                this['user/updateUser']({\n                  card_num: Number(this.user.card_num) - 1\n                });\n                _context3.next = 14;\n                break;\n\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](0);\n                dialogService.alert(_context3.t0.message);\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 11]]);\n      }));\n\n      function cancleCollecte() {\n        return _cancleCollecte.apply(this, arguments);\n      }\n\n      return cancleCollecte;\n    }(),\n    // 生成名片主体\n    drawCard: function () {\n      var _drawCard = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var _card, code, canvas, ctx;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                this.showOperate = false;\n                _context4.next = 4;\n                return html2canvas(document.querySelector('#card'), {\n                  scale: 2,\n                  logging: false,\n                  dpi: window.devicePixelRatio * 2\n                });\n\n              case 4:\n                _card = _context4.sent;\n                _context4.next = 7;\n                return this.drawQrcode();\n\n              case 7:\n                code = _context4.sent;\n                // 创建一个新画布\n                canvas = document.createElement('canvas');\n                canvas.width = 750;\n                canvas.height = 750;\n                ctx = canvas.getContext('2d');\n                ctx.fillStyle = '#fff';\n                ctx.fillRect(0, 0, 750, 750);\n                ctx.shadowBlur = 12;\n                ctx.shadowOffsetY = 8;\n                ctx.shadowColor = 'rgba(110, 110, 110, 0.16)';\n                ctx.drawImage(_card, 20, 20, 710, 400);\n                ctx.drawImage(code, 72, 480, 200, 200);\n                ctx.textBaseline = 'top';\n                ctx.fillStyle = '#4697ff';\n                ctx.strokeStyle = '#4697ff';\n                ctx.font = '28px Arial normal';\n                ctx.fillText('长按识别二维码', 294, 544);\n                ctx.strokeText('长按识别二维码', 294, 544);\n                ctx.textBaseline = 'top';\n                ctx.fillStyle = '#333333';\n                ctx.strokeStyle = '#333333';\n                ctx.font = '28px Arial normal';\n                ctx.fillText('使用“汇脉宝营销”保存名片信息', 294, 586);\n                ctx.strokeText('使用“汇脉宝营销”保存名片信息', 294, 586);\n                window.cardPreview = canvas.toDataURL('image/jpeg');\n                this.$router.push('/card/preview');\n                _context4.next = 38;\n                break;\n\n              case 35:\n                _context4.prev = 35;\n                _context4.t0 = _context4[\"catch\"](0);\n                dialogService.alert('生成名片失败,请稍后再试');\n\n              case 38:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 35]]);\n      }));\n\n      function drawCard() {\n        return _drawCard.apply(this, arguments);\n      }\n\n      return drawCard;\n    }(),\n    // 生存二维码相关图片\n    drawQrcode: function () {\n      var _drawQrcode = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5() {\n        var logo, url, options, qrcode, ctx;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                logo = new Image();\n                logo.src = Logo;\n                url = \"\".concat(window.host, \"/#/card/detail/\").concat(this.userId);\n                options = {\n                  width: 256,\n                  height: 256,\n                  colorDark: '#000000',\n                  colorLight: '#ffffff',\n                  errorCorrectionLevel: 'H'\n                };\n                _context5.next = 6;\n                return QRCode.toCanvas(url, options);\n\n              case 6:\n                qrcode = _context5.sent;\n                ctx = qrcode.getContext('2d');\n                ctx.fillStyle = '#fff';\n                ctx.fillRect(100, 100, 56, 56);\n                ctx.drawImage(logo, 100, 100, 56, 56);\n                return _context5.abrupt(\"return\", qrcode);\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function drawQrcode() {\n        return _drawQrcode.apply(this, arguments);\n      }\n\n      return drawQrcode;\n    }(),\n    // 异步获取logo并转化为base64\n    getIMG: function () {\n      var _getIMG = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee6(url) {\n        var res;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (url) {\n                  _context6.next = 2;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\");\n\n              case 2:\n                _context6.prev = 2;\n                _context6.next = 5;\n                return card.getBase64Img(url);\n\n              case 5:\n                res = _context6.sent;\n                this.$set(this.card, 'logo', res);\n                _context6.next = 12;\n                break;\n\n              case 9:\n                _context6.prev = 9;\n                _context6.t0 = _context6[\"catch\"](2);\n                this.$set(this.card, 'logo', window.host + '/static/logo.ong');\n\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[2, 9]]);\n      }));\n\n      function getIMG(_x) {\n        return _getIMG.apply(this, arguments);\n      }\n\n      return getIMG;\n    }()\n  }),\n  components: {\n    Card: Card,\n    Wrapper: Wrapper,\n    AppAblum: AppAblum,\n    AppHeader: AppHeader,\n    AppLoading: AppLoading,\n    FooterInfo: FooterInfo,\n    RegisterGuid: RegisterGuid\n  },\n  computed: _objectSpread({}, mapState({\n    user: function user(state) {\n      return state.user.userInfo;\n    },\n    platform: function platform(state) {\n      return state.system.platform;\n    }\n  }), {\n    paddingTop: function paddingTop() {\n      if (this.platform === 'wechat') {\n        return this.user ? '0px' : '80px';\n      } else {\n        return '80px';\n      }\n    }\n  })\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Wrapper class=\"card-wrapper\" :paddingTop=\"paddingTop\" @scrolling=\"scrollHandler\">\n    <div class=\"card-header\" ref=\"header\">\n      <AppHeader :title=\"cardName\" iconColor=\"#fff\" fontColor=\"#fff\" background=\"#374ff3\"></AppHeader>\n      <RegisterGuid guidType=\"card\"></RegisterGuid>\n    </div>\n    <div class=\"card-container\">\n      <!-- 名片预览 -->\n      <Card id=\"card\" class=\"card\" :item=\"card\"></Card>\n      <!-- 名片信息 -->\n      <div class=\"card-info\">\n        <p class=\"card-title\">名片信息</p>\n        <div class=\"base-info\">\n          <div class=\"base-info-row\" v-if=\"isMine || card.name\">\n            <i class=\"iconfont icon-xingming1\"></i>\n            <p class=\"input\" v-text=\"card.name\"></p>\n          </div>\n          <div class=\"base-info-row\" v-if=\"isMine || card.profession\">\n            <i class=\"iconfont icon-zhiye2\"></i>\n            <p class=\"input\" v-text=\"card.profession\"></p>\n          </div>\n          <div class=\"base-info-row\" v-if=\"isMine || card.phone\">\n            <i class=\"iconfont icon-dianhua1\"></i>\n            <p class=\"input\" v-text=\"card.phone\"></p>\n          </div>\n          <div class=\"base-info-row\" v-if=\"isMine || card.wechat\">\n            <i class=\"iconfont icon-weixin\"></i>\n            <p class=\"input\" v-text=\"card.wechat\"></p>\n          </div>\n          <div class=\"base-info-row\" v-if=\"isMine || card.address\">\n            <i class=\"iconfont icon-qiye\"></i>\n            <p class=\"input\" v-text=\"card.address\"></p>\n          </div>\n          <div class=\"base-info-row\" v-if=\"isMine || card.address_detail\">\n            <i class=\"iconfont icon-dingwei\"></i>\n            <p class=\"input\" v-text=\"card.address_detail\"></p>\n          </div>\n        </div>\n      </div>\n      <!-- 个人简介 -->\n      <div class=\"card-profile\" :style=\"this.showMore === '...展开' ? {'max-height': '190px'} : {height : 'unset'}\">\n        <div class=\"icon-box\">\n          <i class=\"iconfont icon-jianli\"></i>\n        </div>\n        <div ref=\"profile\" class=\"profile-textarea\" v-html=\"card.introduce\"></div>\n        <span v-if=\"showProfile\" class=\"showAll\" v-text=\"showMore\" @click=\"toggleShow()\" :style=\"this.showMore === '...展开' ? null : {'bottom' : '20px'}\"></span>\n      </div>\n      <!-- 名片相册 -->\n      <div class=\"card-ablum\">\n        <div class=\"icon-box\">\n          <i class=\"iconfont icon-xiangce\"></i>\n        </div>\n        <div class=\"card-photos\">\n          <div class=\"photo\" v-for=\"(item,index) in photos\" :key=\"index\">\n            <div class=\"img-box\" @click=\"showAblum(index)\" :style=\"{'background-image': 'url(' + item + ')'}\">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ref=\"footer\" class=\"card-footer\" :class=\"[isMine ? 'self-operate' : 'other-operate']\">\n      <template v-if=\"isMine\">\n        <router-link to=\"/card/edit\" class=\"card-edit\">编辑</router-link>\n        <button class=\"card-share\" @click=\"shareHandler()\">分享</button>\n      </template>\n      <template v-else>\n        <FooterInfo :input=\"card\" :type=\"'card'\" @share=\"shareHandler\"></FooterInfo>\n      </template>\n    </div>\n    <div v-if=\"isMine\" class=\"generated-img\" :class=\"{'show' : showOperate}\">\n      <div class=\"operate-ball\" @click=\"toggleOperate()\"><i class=\"iconfont icon-yangshiqiehuan1\"></i></div>\n      <div class=\"operate-texts\" @click=\"drawCard()\">生成图片</div>\n    </div>\n    <AppLoading v-if=\"loading\" visible=\"true\"></AppLoading>\n    <AppAblum v-if=\"ablum\" :data=\"ablum\" @close=\"closeAblum\"></AppAblum>\n  </Wrapper>\n</template>\n\n<script>\nimport QRCode from 'qrcode'\nimport Logo from './logo.png'\nimport card from '../../../api/card'\nimport html2canvas from 'html2canvas'\nimport circle from '../../../api/circle'\nimport Card from '../../../components/Card'\nimport { mapActions, mapState } from 'vuex'\nimport AppLoading from '../../../components/AppLoading'\nimport Wrapper from '../../../components/Wrapper'\nimport AppAblum from '../../../components/AppAblum'\nimport RegisterGuid from '../../../components/RegisterGuid'\nimport sdkService from '../../../service/sdkService'\nimport httpService from '../../../service/httpService'\nimport guideService from '../../../service/guideService'\nimport shareService from '../../../service/shareService'\nimport dialogService from '../../../service/dialogService'\nimport AppHeader from '../../../components/AppHeader'\nimport FooterInfo from '../../../components/FooterInfo'\n\nexport default {\n  name: 'cardDetail',\n  data() {\n    return {\n      card: {}, // 名片信息\n      photos: [], // 名片相册\n      ablum: null, // 相册\n      userId: null, // 名片的userId\n      isMine: false, // 是否本人\n      loading: true, // 加载名片\n      cardName: '名片', // 名片名称\n      showOperate: false, // 是否显示生成图片\n      showProfile: false, // 显示全部个人简介\n      showMore: '...展开', // 个人简介显示更多\n      shareOptions: null // 分享配置\n    }\n  },\n  mounted() {\n    this.userId = parseInt(this.$route.params.id)\n    if (this.user) this.isMine = this.user.id === this.userId\n    this.getCardInfo()\n  },\n  beforeRouteLeave(to, from, next) {\n    // 离开清除名片缓存\n    if (to.path !== '/card/preview') {\n      this['system/updateRouter']({\n        type: 'del',\n        data: 'cardDetail'\n      })\n    }\n    next()\n  },\n  methods: {\n    ...mapActions(['user/updateUser', 'system/updateRouter']),\n    // 获取名片信息\n    async getCardInfo() {\n      try {\n        let res = await card.getCardByUserId(this.userId)\n        if (res.status !== 0) throw new Error(res.message)\n        if (Array.isArray(res.data)) throw new Error('Ta还没有完善个人信息')\n        this.card = res.data\n        this.loading = false\n        this.getIMG(res.data.logo)\n        this.$nextTick(() => {\n          this.showProfile = this.$refs.profile.offsetHeight > 190\n        })\n        try {\n          debugger\n          this.photos = JSON.parse(res.data.album)\n        } catch (e) {\n          this.photos = []\n        }\n        this.shareConfig()\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 分享配置\n    shareConfig() {\n      this.shareOptions = sdkService.cardConfig(this.card, this.userId)\n      if (this.platform !== 'wechat') return\n      sdkService.share(this.shareOptions)\n    },\n    // 查看相册\n    showAblum(index) {\n      this.ablum = {\n        index: index,\n        ablum: this.photos\n      }\n    },\n    // 关闭相册\n    closeAblum() {\n      this.ablum = null\n    },\n    // 个人简介收起/展开\n    toggleShow() {\n      this.showMore = this.showMore === '...展开' ? '收起' : '...展开'\n    },\n    // 点击分享\n    shareHandler() {\n      shareService(this.shareOptions)\n    },\n    // toggleOperate\n    toggleOperate() {\n      this.showOperate = !this.showOperate\n    },\n    // scrollHandler\n    scrollHandler(scrolled, scrollHeight) {\n      if (this.showOperate) this.showOperate = false\n    },\n    // 收藏/取消收藏\n    toggleCollecte() {\n      let _self = this\n      if (!this.user) {\n        guideService.login()\n        return false\n      }\n      if (this.card.has_holder) {\n        this.cancleCollecte()\n      } else {\n        this.collecteCard()\n      }\n    },\n    // 收藏名片\n    async collecteCard() {\n      try {\n        let res = await card.collecteCard(this.card.card_id)\n        if (res.status !== 0) throw new Error(res.message)\n        this.$set(this.card, 'has_holder', true)\n        dialogService.toast('收藏成功')\n        this['user/updateUser']({\n          card_num: Number(this.user.card_num) + 1\n        })\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 取消收藏名片\n    async cancleCollecte() {\n      try {\n        let res = await card.cancleCollecte(this.card.card_id)\n        if (res.status !== 0) throw new Error(res.message)\n        this.$set(this.card, 'has_holder', false)\n        dialogService.toast('取消收藏')\n        this['user/updateUser']({\n          card_num: Number(this.user.card_num) - 1\n        })\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 生成名片主体\n    async drawCard() {\n      try {\n        this.showOperate = false\n        let card = await html2canvas(document.querySelector('#card'), {\n          scale: 2,\n          logging: false,\n          dpi: window.devicePixelRatio * 2\n        })\n        let code = await this.drawQrcode()\n        // 创建一个新画布\n        let canvas = document.createElement('canvas')\n        canvas.width = 750\n        canvas.height = 750\n        let ctx = canvas.getContext('2d')\n        ctx.fillStyle = '#fff'\n        ctx.fillRect(0, 0, 750, 750)\n        ctx.shadowBlur = 12\n        ctx.shadowOffsetY = 8\n        ctx.shadowColor = 'rgba(110, 110, 110, 0.16)'\n        ctx.drawImage(card, 20, 20, 710, 400)\n        ctx.drawImage(code, 72, 480, 200, 200)\n        ctx.textBaseline = 'top'\n        ctx.fillStyle = '#4697ff'\n        ctx.strokeStyle = '#4697ff'\n        ctx.font = '28px Arial normal'\n        ctx.fillText('长按识别二维码', 294, 544)\n        ctx.strokeText('长按识别二维码', 294, 544)\n        ctx.textBaseline = 'top'\n        ctx.fillStyle = '#333333'\n        ctx.strokeStyle = '#333333'\n        ctx.font = '28px Arial normal'\n        ctx.fillText('使用“汇脉宝营销”保存名片信息', 294, 586)\n        ctx.strokeText('使用“汇脉宝营销”保存名片信息', 294, 586)\n        window.cardPreview = canvas.toDataURL('image/jpeg')\n        this.$router.push('/card/preview')\n      } catch (err) {\n        dialogService.alert('生成名片失败,请稍后再试')\n      }\n    },\n    // 生存二维码相关图片\n    async drawQrcode() {\n      let logo = new Image()\n      logo.src = Logo\n      let url = `${window.host}/#/card/detail/${this.userId}`\n      let options = {\n        width: 256,\n        height: 256,\n        colorDark: '#000000',\n        colorLight: '#ffffff',\n        errorCorrectionLevel: 'H'\n      }\n      let qrcode = await QRCode.toCanvas(url, options)\n      let ctx = qrcode.getContext('2d')\n      ctx.fillStyle = '#fff'\n      ctx.fillRect(100, 100, 56, 56)\n      ctx.drawImage(logo, 100, 100, 56, 56)\n      return qrcode\n    },\n    // 异步获取logo并转化为base64\n    async getIMG(url) {\n      if (!url) return\n      try {\n        let res = await card.getBase64Img(url)\n        this.$set(this.card, 'logo', res)\n      } catch (err) {\n        this.$set(this.card, 'logo', window.host + '/static/logo.ong')\n      }\n    }\n  },\n  components: {\n    Card,\n    Wrapper,\n    AppAblum,\n    AppHeader,\n    AppLoading,\n    FooterInfo,\n    RegisterGuid\n  },\n  computed: {\n    ...mapState({\n      user: state => state.user.userInfo,\n      platform: state => state.system.platform\n    }),\n    paddingTop: function() {\n      if (this.platform === 'wechat') {\n        return this.user ? '0px' : '80px'\n      } else {\n        return '80px'\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.card-wrapper {\n  padding-bottom: 120px;\n  box-sizing: border-box;\n}\n\n.card-container {\n  overflow: hidden;\n\n  .card {\n    margin: 30px auto 24px auto;\n  }\n}\n\n.card-header {\n  top: 0;\n  z-index: 1;\n  width: 100%;\n  overflow: hidden;\n  position: fixed;\n}\n\n.card-info {\n  overflow: hidden;\n\n  .card-title {\n    height: 70px;\n    padding: 0 20px;\n    font-size: 24px;\n    color: #444444;\n    line-height: 70px;\n    background: #f5f5f5;\n    font-family: 'PingFang SC Medium';\n  }\n\n  .base-info {\n    width: 100%;\n    overflow: hidden;\n    position: relative;\n    margin: 0 auto 20px;\n  }\n\n  .base-info-row {\n    width: 710px;\n    height: 90px;\n    display: flex;\n    margin: 0 20px;\n    line-height: 90px;\n    position: relative;\n    align-items: center;\n    border-bottom: 1px solid #f2f2f2;\n  }\n\n  .input {\n    flex: 1;\n    height: 90px;\n    font-size: 28px;\n    color: #0a0a0a;\n    overflow: hidden;\n    line-height: 90px;\n    margin-left: 50px;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    font-family: 'PingFang SC Medium';\n  }\n\n  .iconfont {\n    font-size: 32px;\n    color: #333;\n  }\n}\n\n.card-profile {\n  width: 710px;\n  margin: 0 20px;\n  overflow: hidden;\n  position: relative;\n  border-bottom: 1px solid #f2f2f2;\n\n  .icon-box {\n    float: left;\n    width: 32px;\n    height: 90px;\n    line-height: 90px;\n    text-align: center;\n    margin-right: 50px;\n  }\n\n  .iconfont {\n    font-size: 32px;\n    color: #333;\n  }\n\n  .profile-textarea {\n    float: left;\n    width: 628px;\n    padding: 20px 0;\n    font-size: 30px;\n    color: #0a0a0a;\n    line-height: 50px;\n    box-sizing: border-box;\n  }\n\n  .showAll {\n    right: 0;\n    bottom: 10px;\n    color: #4597fe;\n    font-size: 30px;\n    line-height: 50px;\n    background: #fff;\n    position: absolute;\n  }\n}\n\n.card-ablum {\n  width: 710px;\n  overflow: hidden;\n  position: relative;\n  margin: 0 20px 70px;\n  border-bottom: 1px solid #f2f2f2;\n\n  .icon-box {\n    float: left;\n    width: 32px;\n    height: 90px;\n    line-height: 90px;\n    text-align: center;\n    margin-right: 50px;\n  }\n\n  .iconfont {\n    font-size: 32px;\n  }\n\n  .card-photos {\n    float: left;\n    width: 628px;\n    font-size: 30px;\n    overflow: hidden;\n    color: #0a0a0a;\n    line-height: 50px;\n    box-sizing: border-box;\n  }\n\n  .photo {\n    float: left;\n    width: 160px;\n    height: 160px;\n    position: relative;\n    margin-right: 60px;\n    border-radius: 4px;\n    margin-top: 30px;\n\n    &:nth-of-type(3n) {\n      margin-right: 0;\n    }\n  }\n\n  .img-box {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    overflow: hidden;\n    align-items: center;\n    background-size: cover;\n    justify-content: center;\n    background-position: center;\n  }\n}\n\n.card-footer {\n  bottom: 0;\n  width: 100%;\n  height: 120px;\n  position: fixed;\n  background: #fff;\n}\n\n.self-operate {\n  display: flex;\n  padding: 0 20px;\n  align-items: center;\n  box-sizing: border-box;\n  justify-content: space-between;\n\n  .card-edit {\n    width: 240px;\n    height: 80px;\n    display: block;\n    font-size: 32px;\n    color: #374ff3;\n    overflow: hidden;\n    line-height: 80px;\n    text-align: center;\n    border-radius: 4px;\n    box-sizing: border-box;\n    border: 2px solid #374ff3;\n    font-family: 'PingFang SC Regular';\n  }\n\n  .card-share {\n    width: 440px;\n    height: 80px;\n    display: block;\n    font-size: 32px;\n    color: #ffffff;\n    overflow: hidden;\n    line-height: 80px;\n    text-align: center;\n    border-radius: 4px;\n    background: #374ff3;\n    box-sizing: border-box;\n    border: 2px solid #374ff3;\n    font-family: 'PingFang SC Regular';\n  }\n}\n\n.other-operate {\n  overflow: hidden;\n  box-sizing: border-box;\n\n  .footer-operates {\n    width: 100%;\n    height: 100px;\n    display: flex;\n    margin-top: 20px;\n    position: relative;\n    justify-content: flex-end;\n    box-shadow: 0px 0px 15px 0px rgba(0, 0, 0, 0.15);\n  }\n\n  .head-img-box {\n    top: -20px;\n    left: 40px;\n    width: 90px;\n    height: 90px;\n    overflow: hidden;\n    position: absolute;\n    border-radius: 45px;\n  }\n\n  .head-img {\n    width: 100%;\n    height: 100%;\n  }\n\n  .collecte-card {\n    width: 125px;\n    display: flex;\n    height: 100px;\n    font-size: 20px;\n    color: #333333;\n    position: relative;\n    margin-right: 15px;\n    align-items: center;\n    flex-direction: column;\n    justify-content: center;\n    font-family: 'PingFang SC Medium';\n  }\n\n  .icon-star {\n    font-size: 36px;\n    color: #5d7bf7;\n    margin-bottom: 10px;\n  }\n\n  .icon-shoucang2 {\n    font-size: 36px;\n    color: #5d7bf7;\n    margin-bottom: 10px;\n  }\n\n  .card-share-count {\n    width: 140px;\n    display: flex;\n    height: 100px;\n    font-size: 20px;\n    color: #333333;\n    position: relative;\n    margin-right: 60px;\n    align-items: center;\n    flex-direction: column;\n    justify-content: center;\n    font-family: 'PingFang SC Medium';\n  }\n\n  .icon-fenxiang4 {\n    font-size: 36px;\n    color: #5d7bf7;\n    margin-bottom: 10px;\n  }\n\n  .share-count {\n    right: 0;\n    top: 10px;\n    width: 60px;\n    height: 24px;\n    color: #fff;\n    font-size: 16px;\n    line-height: 24px;\n    position: absolute;\n    text-align: center;\n    border-radius: 12px;\n    background: #0bc782;\n    font-family: 'PingFang SC Bold';\n  }\n\n  .call-phone {\n    width: 248px;\n    height: 100px;\n    color: #fff;\n    display: flex;\n    font-size: 30px;\n    overflow: hidden;\n    align-items: center;\n    background: #06c773;\n    justify-content: center;\n    font-family: 'PingFang SC Medium';\n  }\n\n  .icon-dianhua1 {\n    font-size: 32px;\n    margin-right: 10px;\n  }\n}\n\n.generated-img {\n  top: 70%;\n  width: 60px;\n  right: 10px;\n  height: 60px;\n  position: fixed;\n  overflow: hidden;\n  transition: all ease 0.4s;\n\n  &.show {\n    width: 178px;\n  }\n\n  .operate-ball {\n    top: 0;\n    left: 0;\n    width: 60px;\n    height: 60px;\n    color: #fff;\n    display: flex;\n    position: absolute;\n    align-items: center;\n    border-radius: 30px;\n    background: #374ff3;\n    justify-content: center;\n  }\n\n  .iconfont {\n    font-size: 32px;\n  }\n\n  .operate-texts {\n    width: 178px;\n    height: 48px;\n    font-size: 22px;\n    margin-top: 6px;\n    color: #333333;\n    text-align: right;\n    line-height: 48px;\n    padding-right: 20px;\n    border-radius: 24px;\n    background: #f2f2f2;\n    box-sizing: border-box;\n    font-family: 'PingFang SC Medium';\n  }\n}\n</style>"],"sourceRoot":"src/module/card/detail"}]}