{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/thread-loader/dist/cjs.js!/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/mine/wallet/addCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/mine/wallet/addCard.vue","mtime":1548296329459},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ListItem from '../../../components/ListItem/index';\nimport List from '../../../components/List/index';\nimport httpService from '../../../service/httpService';\nimport AppHeader from '../../../components/AppHeader';\nimport dialogService from '../../../service/dialogService';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'mine-addCard',\n  data: function data() {\n    return {\n      type: null,\n      //是否有跳转\n      loading: false,\n      bank: '工商银行',\n      cardMan: '',\n      cardNum: ''\n    };\n  },\n  components: {\n    ListItem: ListItem,\n    AppHeader: AppHeader,\n    List: List\n  },\n  mounted: function mounted() {\n    this.type = this.$route.query && this.$route.query.type;\n  },\n  computed: _objectSpread({}, mapState({\n    platform: function platform(state) {\n      return state.system.platform;\n    }\n  }), {\n    paddingTop: function paddingTop() {\n      return this.platform === 'wechat' ? '0px' : '100px';\n    }\n  }),\n  methods: {\n    submit: function submit() {\n      var _this = this;\n\n      if (this.loading) return;\n\n      var _self = this;\n\n      if (!this.cardMan) {\n        dialogService.alert('持卡人不能为空');\n        return;\n      }\n\n      if (!this.bank) {\n        dialogService.alert('银行名称不能为空');\n        return;\n      }\n\n      if (!this.cardNum) {\n        dialogService.alert('银行卡卡号不能为空');\n        return;\n      } // 先获取银行卡信息，确认无误后提交到后台\n      // 绑定成功后跳转到银行卡管理\n\n\n      this.loading = true;\n      httpService.post('/front/bank-card', {\n        name: this.cardMan,\n        bank_name: this.bank,\n        card_no: this.cardNum,\n        card_no_confirmation: this.cardNum\n      }).then(function (res) {\n        if (res.status !== 0) {\n          dialogService.alert(res.message);\n          _self.loading = false;\n          return;\n        }\n\n        dialogService.toast('添加成功');\n        _self.loading = false;\n\n        if (_self.type) {\n          _this.$router.replace('/wallet/card/withdraw');\n        } else {\n          _self.$router.back();\n        }\n      }).catch(function (err) {\n        dialogService.alert(err.message);\n        _self.loading = false;\n      });\n    },\n    tips: function tips() {\n      dialogService.toast('暂时只支持工商银行');\n    }\n  }\n};",{"version":3,"sources":["addCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAmBA,OAAA,QAAA,MAAA,oCAAA;AACA,OAAA,IAAA,MAAA,gCAAA;AACA,OAAA,WAAA,MAAA,8BAAA;AACA,OAAA,SAAA,MAAA,+BAAA;AACA,OAAA,aAAA,MAAA,gCAAA;AACA,SAAA,QAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,IADA;AACA;AACA,MAAA,OAAA,EAAA,KAFA;AAGA,MAAA,IAAA,EAAA,MAHA;AAIA,MAAA,OAAA,EAAA,EAJA;AAKA,MAAA,OAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAWA,EAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA,QADA;AAEA,IAAA,SAAA,EAAA,SAFA;AAGA,IAAA,IAAA,EAAA;AAHA,GAXA;AAgBA,EAAA,OAhBA,qBAgBA;AACA,SAAA,IAAA,GAAA,KAAA,MAAA,CAAA,KAAA,IAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA;AACA,GAlBA;AAmBA,EAAA,QAAA,oBACA,QAAA,CAAA;AACA,IAAA,QAAA,EAAA,kBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,MAAA,CAAA,QAAA;AAAA;AADA,GAAA,CADA;AAIA,IAAA,UAAA,EAAA,sBAAA;AACA,aAAA,KAAA,QAAA,KAAA,QAAA,GAAA,KAAA,GAAA,OAAA;AACA;AANA,IAnBA;AA2BA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AACA,UAAA,KAAA,OAAA,EAAA;;AACA,UAAA,KAAA,GAAA,IAAA;;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA,QAAA,aAAA,CAAA,KAAA,CAAA,SAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,IAAA,EAAA;AACA,QAAA,aAAA,CAAA,KAAA,CAAA,UAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA,QAAA,aAAA,CAAA,KAAA,CAAA,WAAA;AACA;AACA,OAdA,CAeA;AACA;;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,MAAA,WAAA,CACA,IADA,CACA,kBADA,EACA;AACA,QAAA,IAAA,EAAA,KAAA,OADA;AAEA,QAAA,SAAA,EAAA,KAAA,IAFA;AAGA,QAAA,OAAA,EAAA,KAAA,OAHA;AAIA,QAAA,oBAAA,EAAA,KAAA;AAJA,OADA,EAOA,IAPA,CAOA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,aAAA,CAAA,KAAA,CAAA,GAAA,CAAA,OAAA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA;AACA;;AACA,QAAA,aAAA,CAAA,KAAA,CAAA,MAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AACA,YAAA,KAAA,CAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,uBAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA;AACA;AACA,OApBA,EAqBA,KArBA,CAqBA,UAAA,GAAA,EAAA;AACA,QAAA,aAAA,CAAA,KAAA,CAAA,GAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,OAxBA;AAyBA,KA5CA;AA6CA,IAAA,IA7CA,kBA6CA;AACA,MAAA,aAAA,CAAA,KAAA,CAAA,WAAA;AACA;AA/CA;AA3BA,CAAA","sourcesContent":["<template>\n  <div class=\"warpper\" :style=\"{paddingTop:paddingTop}\">\n    <AppHeader ref=\"header\" title=\"添加银行卡\"></AppHeader>\n    <p class=\"tips\">请绑定持卡人本人的银行卡</p>\n    <List style=\"margin-top:25px;\">\n      <ListItem label=\"持卡人\">\n        <input placeholder=\"请输入持卡人姓名\" v-model=\"cardMan\" class=\"input\" type=\"text\" />\n      </ListItem>\n      <ListItem label=\"银行\">\n        <p class=\"input\">工商银行<i @click=\"tips\" class=\"iconfont icon-gantan\"></i></p>\n      </ListItem>\n      <ListItem label=\"卡号\">\n        <input placeholder=\"请输入银行卡号\" v-model=\"cardNum\" class=\"input\" type=\"text\" />\n      </ListItem>\n    </List>\n    <div class=\"submit\" @click=\"submit\">{{loading?'正在提交,请稍后':'完成'}}</div>\n  </div>\n</template>\n<script>\nimport ListItem from '../../../components/ListItem/index'\nimport List from '../../../components/List/index'\nimport httpService from '../../../service/httpService'\nimport AppHeader from '../../../components/AppHeader'\nimport dialogService from '../../../service/dialogService'\nimport { mapState } from 'vuex'\nexport default {\n  name: 'mine-addCard',\n  data() {\n    return {\n      type: null, //是否有跳转\n      loading: false,\n      bank: '工商银行',\n      cardMan: '',\n      cardNum: ''\n    }\n  },\n  components: {\n    ListItem,\n    AppHeader,\n    List\n  },\n  mounted() {\n    this.type = this.$route.query && this.$route.query.type\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    }),\n    paddingTop: function() {\n      return this.platform === 'wechat' ? '0px' : '100px'\n    }\n  },\n  methods: {\n    submit() {\n      if (this.loading) return\n      let _self = this\n      if (!this.cardMan) {\n        dialogService.alert('持卡人不能为空')\n        return\n      }\n      if (!this.bank) {\n        dialogService.alert('银行名称不能为空')\n        return\n      }\n      if (!this.cardNum) {\n        dialogService.alert('银行卡卡号不能为空')\n        return\n      }\n      // 先获取银行卡信息，确认无误后提交到后台\n      // 绑定成功后跳转到银行卡管理\n      this.loading = true\n      httpService\n        .post('/front/bank-card', {\n          name: this.cardMan,\n          bank_name: this.bank,\n          card_no: this.cardNum,\n          card_no_confirmation: this.cardNum\n        })\n        .then(res => {\n          if (res.status !== 0) {\n            dialogService.alert(res.message)\n            _self.loading = false\n            return\n          }\n          dialogService.toast('添加成功')\n          _self.loading = false\n          if (_self.type) {\n            this.$router.replace('/wallet/card/withdraw')\n          } else {\n            _self.$router.back()\n          }\n        })\n        .catch(err => {\n          dialogService.alert(err.message)\n          _self.loading = false\n        })\n    },\n    tips() {\n      dialogService.toast('暂时只支持工商银行')\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.warpper {\n  .submit {\n    width: 690px;\n    height: 88px;\n    background: #274ff3;\n    color: #fff;\n    line-height: 88px;\n    margin: 35px auto;\n    text-align: center;\n    border-radius: 10px;\n    font-size: 34px;\n  }\n  .input {\n    flex: 4;\n    outline: none;\n  }\n  .icon-gantan {\n    color: #ed2828;\n    font-size: 32px;\n    float: right;\n  }\n  .tips {\n    margin-top: 25px;\n    color: #666666;\n    font-size: 24px;\n    padding-left: 30px;\n  }\n  width: 100%;\n  min-height: 100vh;\n  background: #f4f4f4;\n  overflow: hidden;\n  position: relative;\n}\n</style>\n \n "],"sourceRoot":"src/module/mine/wallet"}]}