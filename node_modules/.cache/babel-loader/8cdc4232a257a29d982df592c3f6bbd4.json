{"remainingRequest":"/Users/qiang/work/hytx/circle/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/circle/src/components/Pickers/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/circle/src/components/Pickers/index.vue","mtime":1547781185270},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      province: [],\n      // 省\n      city: [],\n      // 城市\n      area: [],\n      // 地区\n      select: [],\n      // 选择的值\n      selectName: [],\n      //选择的地区的文本\n      defaultTop: 134,\n      // 默认ul距离父级的高度\n      itemHeight: 72,\n      // 默认li的高度\n      timer: null,\n      isScroll: true,\n      level: 1,\n      // 有几级\n      show: false,\n      // 是都显示弹窗\n      defalutValue: '' // 默认值\n\n    };\n  },\n  props: ['value', 'data', 'msg'],\n  mounted: function mounted() {\n    if (!this.msg && !this.defalutValue) this.defalutValue = '请选择';\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      // 初始化话\n      this.province = this.data;\n\n      if (this.value && this.value.length) {\n        this.select = this.value;\n        this.level = this.value.length;\n        this.province.find(function (item, index) {\n          _this.$nextTick(function () {\n            if (item.id == _this.select[0]) {\n              _this.selectName[0] = item.text;\n              _this.$refs.province.scrollTop = index * _this.itemHeight;\n\n              if (_this.select[1] !== undefined) {\n                item.children.find(function (its, indexs) {\n                  if (its.id == _this.select[1]) {\n                    _this.city = item.children;\n                    _this.selectName[1] = its.text;\n\n                    _this.$nextTick(function () {\n                      _this.$refs.city.scrollTop = indexs * _this.itemHeight;\n\n                      if (_this.select[2] !== undefined) {\n                        its.children.find(function (it, t) {\n                          if (it.id == _this.select[2]) {\n                            _this.selectName[2] = it.text;\n                            _this.area = its.children;\n\n                            _this.$nextTick(function () {\n                              _this.$refs.area.scrollTop = t * _this.itemHeight;\n                            });\n\n                            return false;\n                          }\n                        });\n                      }\n                    });\n                  }\n\n                  return false;\n                });\n              }\n\n              return false;\n            }\n          });\n        });\n      } else {\n        var step2 = false; // 2级孩子\n\n        var step3 = false; //3级孩子\n\n        this.province.map(function (item) {\n          if (item.children) {\n            step2 = true;\n            item.children.map(function (it) {\n              if (it.children) {\n                step3 = true;\n              }\n            });\n          }\n        });\n        if (step2) this.level = 2;\n        if (step3) this.level = 3;\n        this.select[0] = this.province[0].id;\n        this.selectName[0] = this.province[0].text;\n\n        if (this.level >= 2) {\n          this.city = this.province[0].children ? this.province[0].children : [];\n          this.select[1] = this.city[0] ? this.city[0].id : '';\n          this.selectName[1] = this.city[0] ? this.city[0].text : '';\n        }\n\n        if (this.level >= 3) {\n          this.area = this.city[0] && this.city[0].children ? this.city[0].children : [];\n          this.select[2] = this.area[0] ? this.area[0].id : '';\n          this.selectName[2] = this.area[0] ? this.area[0].text : '';\n        }\n      }\n    },\n    // 关闭弹窗\n    cancel: function cancel() {\n      this.show = false;\n    },\n    // 设置省\n    setProvince: function setProvince(index) {\n      var _this2 = this;\n\n      try {\n        this.$set(this.select, 0, this.province[index].id);\n        this.$set(this.selectName, 0, this.province[index].text);\n\n        if (this.level >= 2) {\n          this.city = this.province[index].children;\n          this.$set(this.select, 1, this.city[0] ? this.city[0].id : '');\n          this.$set(this.selectName, 1, this.city[0] ? this.city[0].text : '');\n          this.$refs.city.scrollTop = 0;\n        }\n\n        if (this.level == 3) {\n          this.area = this.city[0] ? this.city[0].children : [];\n          this.$refs.area.scrollTop = 0;\n          this.$set(this.select, 2, this.area[0] ? this.area[0].id : '');\n          this.$set(this.selectName, 2, this.area[0] ? this.area[0].text : '');\n        }\n      } catch (err) {\n        console.error(err.message);\n      }\n\n      setTimeout(function () {\n        _this2.isScroll = true;\n      }, 100);\n    },\n    // 设置城市\n    setCity: function setCity(index) {\n      var _this3 = this;\n\n      this.$set(this.select, 1, this.city[index].id);\n      this.$set(this.selectName, 1, this.city[index].text);\n\n      if (this.level === 3) {\n        this.area = this.city[index].children;\n        this.$refs.area.scrollTop = 0;\n        this.$set(this.select, 2, this.area[0] ? this.area[0].id : '');\n        this.$set(this.selectName, 2, this.area[0] ? this.area[0].text : '');\n      }\n\n      setTimeout(function () {\n        _this3.isScroll = true;\n      }, 100);\n    },\n    // 设置城市\n    setArea: function setArea(index) {\n      var _this4 = this;\n\n      this.$set(this.select, 2, this.area[index].id);\n      this.$set(this.selectName, 2, this.area[index].text);\n      setTimeout(function () {\n        _this4.isScroll = true;\n      }, 100);\n    },\n    selectArea: function selectArea(e, index, type) {\n      this.isScroll = false;\n      this.smoothRolling(e.srcElement.parentElement.parentElement, 5, index, type);\n    },\n    // 平滑滚动\n\n    /**\n     *  parentSrcElement DOM元素 需要滑动操作的元素\n     *  limts <int> + 步长\n     *  index <number> 选择的地几个元素\n     *  type  <string> 选择的是省还是地区\n     */\n    smoothRolling: function smoothRolling(parentSrcElement, limts, index, type) {\n      var self = this;\n      var rollLimt = parentSrcElement.scrollTop - index * self.itemHeight; // 回滚的距离\n\n      var limt = rollLimt > 0 ? -limts : limts; // 步长为5\n\n      var time = setInterval(function () {\n        if (Math.abs(rollLimt) > Math.abs(limt)) {\n          // parentSrcElement.scrollBy(0, limt)\n          parentSrcElement.scrollTop = parentSrcElement.scrollTop + limt;\n          rollLimt = rollLimt + limt;\n        } else {\n          parentSrcElement.scrollTop = index * self.itemHeight; //   parentSrcElement.scrollTo(0, index * self.itemHeight) // 让元素居中\n\n          if (type === 'province') {\n            self.setProvince(index);\n          } else if (type === 'city') {\n            self.setCity(index);\n          } else if (type === 'area') {\n            self.setArea(index);\n          }\n\n          clearInterval(time);\n        }\n      }, 5);\n    },\n    // 滚动事件\n    scrollFn: function scrollFn(e, type) {\n      var self = this;\n      clearTimeout(this.timer);\n\n      if (this.isScroll) {\n        // 判断是否是因为调整距离而发生的滚动，false正在调整距离，true 才执行\n        var num = Math.round(e.srcElement.scrollTop / this.itemHeight); // 滚动到第几个元素\n\n        this.timer = setTimeout(function () {\n          // 用setTimeout说明滚动停止了才执行下面的操作\n          self.isScroll = false;\n          self.smoothRolling(e.srcElement, 2, num, type);\n        }, 100);\n      }\n    },\n    confirm: function confirm() {\n      this.defalutValue = this.selectName.join(' ');\n      this.$emit('input', this.select);\n      this.$emit('chinese', this.defalutValue);\n      this.show = false;\n    }\n  },\n  watch: {\n    show: function show(newval, oldval) {\n      if (newval) {\n        this.init();\n      }\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- \n    @name   Pickers\n    @desc   选择组件\n    @props\n            value    用于实现v-model 组件外只需要绑定v-model <Array>\n            data     默认json数据 格式为{id:XX,text:XX,children:[{id:xx,text:xx,children:[]}]}\n            msg      提示语 default['请选择']\n-->\n<template>\n  <div class=\"picker\">\n    <div @click=\"show=true\" class=\"info\">{{defalutValue||msg}}</div>\n\n    <div class=\"picker-mask\" @click=\"cancel\" v-if=\"show\"></div>\n    <div class=\"picker-container\" v-if=\"show\">\n      <div class=\"picker-choose\">\n        <span class=\"cancel\" @click=\"cancel\">取消</span>\n        <span class=\"confirm\" @click=\"confirm\">确定</span>\n      </div>\n      <div class=\"picker-wheel-wrapper\">\n        <!-- 上层遮盖 -->\n        <i class=\"border-top\"></i>\n        <!-- 下层遮盖 -->\n        <i class=\"border-bottom\"></i>\n        <!-- 内容区域 -->\n        <div @scroll=\"scrollFn($event,'province')\" class=\"scroll-div\" ref=\"province\" v-if=\"level>=1\">\n          <ul>\n            <li v-for=\" (item,index) in province\" :key=\"index\" @click.stop=\"selectArea($event,index,'province')\">{{item.text}}</li>\n          </ul>\n        </div>\n        <div @scroll=\"scrollFn($event,'city')\" class=\"scroll-div\" ref=\"city\" v-if=\"level>=2\">\n          <ul>\n            <li v-for=\"(item,index) in city\" :key=\"index\" @click.stop=\"selectArea($event,index,'city')\">{{item.text}}</li>\n          </ul>\n        </div>\n        <div @scroll=\"scrollFn($event,'area')\" class=\"scroll-div\" ref=\"area\" v-if=\"level>=3\">\n          <ul>\n            <li v-for=\"(item,index) in area\" :key=\"index\" @click.stop=\"selectArea($event,index,'area')\">{{item.text}}</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      province: [], // 省\n      city: [], // 城市\n      area: [], // 地区\n      select: [], // 选择的值\n      selectName: [], //选择的地区的文本\n      defaultTop: 134, // 默认ul距离父级的高度\n      itemHeight: 72, // 默认li的高度\n      timer: null,\n      isScroll: true,\n      level: 1, // 有几级\n      show: false, // 是都显示弹窗\n      defalutValue: '' // 默认值\n    }\n  },\n  props: ['value', 'data', 'msg'],\n  mounted() {\n    if (!this.msg && !this.defalutValue) this.defalutValue = '请选择'\n  },\n  methods: {\n    init() {\n      // 初始化话\n      this.province = this.data\n      if (this.value && this.value.length) {\n        this.select = this.value\n        this.level = this.value.length\n        this.province.find((item, index) => {\n          this.$nextTick(() => {\n            if (item.id == this.select[0]) {\n              this.selectName[0] = item.text\n              this.$refs.province.scrollTop = index * this.itemHeight\n              if (this.select[1] !== undefined) {\n                item.children.find((its, indexs) => {\n                  if (its.id == this.select[1]) {\n                    this.city = item.children\n                    this.selectName[1] = its.text\n                    this.$nextTick(() => {\n                      this.$refs.city.scrollTop = indexs * this.itemHeight\n                      if (this.select[2] !== undefined) {\n                        its.children.find((it, t) => {\n                          if (it.id == this.select[2]) {\n                            this.selectName[2] = it.text\n                            this.area = its.children\n                            this.$nextTick(() => {\n                              this.$refs.area.scrollTop = t * this.itemHeight\n                            })\n                            return false\n                          }\n                        })\n                      }\n                    })\n                  }\n                  return false\n                })\n              }\n              return false\n            }\n          })\n        })\n      } else {\n        let step2 = false // 2级孩子\n        let step3 = false //3级孩子\n        this.province.map(item => {\n          if (item.children) {\n            step2 = true\n            item.children.map(it => {\n              if (it.children) {\n                step3 = true\n              }\n            })\n          }\n        })\n        if (step2) this.level = 2\n        if (step3) this.level = 3\n        this.select[0] = this.province[0].id\n        this.selectName[0] = this.province[0].text\n        if (this.level >= 2) {\n          this.city = this.province[0].children ? this.province[0].children : []\n          this.select[1] = this.city[0] ? this.city[0].id : ''\n          this.selectName[1] = this.city[0] ? this.city[0].text : ''\n        }\n        if (this.level >= 3) {\n          this.area =\n            this.city[0] && this.city[0].children ? this.city[0].children : []\n          this.select[2] = this.area[0] ? this.area[0].id : ''\n          this.selectName[2] = this.area[0] ? this.area[0].text : ''\n        }\n      }\n    },\n    // 关闭弹窗\n    cancel() {\n      this.show = false\n    },\n    // 设置省\n    setProvince(index) {\n      try {\n        this.$set(this.select, 0, this.province[index].id)\n        this.$set(this.selectName, 0, this.province[index].text)\n        if (this.level >= 2) {\n          this.city = this.province[index].children\n          this.$set(this.select, 1, this.city[0] ? this.city[0].id : '')\n          this.$set(this.selectName, 1, this.city[0] ? this.city[0].text : '')\n          this.$refs.city.scrollTop = 0\n        }\n        if (this.level == 3) {\n          this.area = this.city[0] ? this.city[0].children : []\n          this.$refs.area.scrollTop = 0\n          this.$set(this.select, 2, this.area[0] ? this.area[0].id : '')\n          this.$set(this.selectName, 2, this.area[0] ? this.area[0].text : '')\n        }\n      } catch (err) {\n        console.error(err.message)\n      }\n      setTimeout(() => {\n        this.isScroll = true\n      }, 100)\n    },\n    // 设置城市\n    setCity(index) {\n      this.$set(this.select, 1, this.city[index].id)\n      this.$set(this.selectName, 1, this.city[index].text)\n\n      if (this.level === 3) {\n        this.area = this.city[index].children\n        this.$refs.area.scrollTop = 0\n        this.$set(this.select, 2, this.area[0] ? this.area[0].id : '')\n        this.$set(this.selectName, 2, this.area[0] ? this.area[0].text : '')\n      }\n      setTimeout(() => {\n        this.isScroll = true\n      }, 100)\n    },\n    // 设置城市\n    setArea(index) {\n      this.$set(this.select, 2, this.area[index].id)\n      this.$set(this.selectName, 2, this.area[index].text)\n      setTimeout(() => {\n        this.isScroll = true\n      }, 100)\n    },\n    selectArea(e, index, type) {\n      this.isScroll = false\n      this.smoothRolling(\n        e.srcElement.parentElement.parentElement,\n        5,\n        index,\n        type\n      )\n    },\n    // 平滑滚动\n    /**\n     *  parentSrcElement DOM元素 需要滑动操作的元素\n     *  limts <int> + 步长\n     *  index <number> 选择的地几个元素\n     *  type  <string> 选择的是省还是地区\n     */\n    smoothRolling(parentSrcElement, limts, index, type) {\n      let self = this\n      let rollLimt = parentSrcElement.scrollTop - index * self.itemHeight // 回滚的距离\n      let limt = rollLimt > 0 ? -limts : limts // 步长为5\n\n      var time = setInterval(() => {\n        if (Math.abs(rollLimt) > Math.abs(limt)) {\n          // parentSrcElement.scrollBy(0, limt)\n          parentSrcElement.scrollTop = parentSrcElement.scrollTop + limt\n          rollLimt = rollLimt + limt\n        } else {\n          parentSrcElement.scrollTop = index * self.itemHeight\n          //   parentSrcElement.scrollTo(0, index * self.itemHeight) // 让元素居中\n          if (type === 'province') {\n            self.setProvince(index)\n          } else if (type === 'city') {\n            self.setCity(index)\n          } else if (type === 'area') {\n            self.setArea(index)\n          }\n          clearInterval(time)\n        }\n      }, 5)\n    },\n    // 滚动事件\n    scrollFn(e, type) {\n      let self = this\n      clearTimeout(this.timer)\n      if (this.isScroll) {\n        // 判断是否是因为调整距离而发生的滚动，false正在调整距离，true 才执行\n        let num = Math.round(e.srcElement.scrollTop / this.itemHeight) // 滚动到第几个元素\n        this.timer = setTimeout(() => {\n          // 用setTimeout说明滚动停止了才执行下面的操作\n          self.isScroll = false\n          self.smoothRolling(e.srcElement, 2, num, type)\n        }, 100)\n      }\n    },\n    confirm() {\n      this.defalutValue = this.selectName.join(' ')\n      this.$emit('input', this.select)\n      this.$emit('chinese', this.defalutValue)\n      this.show = false\n    }\n  },\n  watch: {\n    show(newval, oldval) {\n      if (newval) {\n        this.init()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.picker {\n  width: inherit;\n  height: inherit;\n  display: flex;\n  align-items: center;\n\n  .info {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n  }\n}\n\n.picker-mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.3);\n  animation: mymove 0.3s;\n  z-index: 99;\n}\n\n@keyframes mymove {\n  from {\n    background: rgba(0, 0, 0, 0);\n  }\n\n  to {\n    background: rgba(0, 0, 0, 0.3);\n  }\n}\n\n@-webkit-keyframes mymove\n\n  /*Safari and Chrome*/ {\n  from {\n    background: rgba(0, 0, 0, 0);\n  }\n\n  to {\n    background: rgba(0, 0, 0, 0.3);\n  }\n}\n\n.picker-container {\n  position: fixed;\n  left: 0;\n  right: 0;\n  background: #fff;\n  bottom: 0;\n  height: 540px;\n  border-top: 2px solid #f2f2f2;\n  animation: moves 0.3s;\n  z-index: 100;\n\n  @keyframes moves {\n    from {\n      bottom: -540px;\n    }\n\n    to {\n      bottom: 0;\n    }\n  }\n\n  @-webkit-keyframes moves\n\n    /*Safari and Chrome*/ {\n    from {\n      bottom: -540px;\n    }\n\n    to {\n      bottom: 0;\n    }\n  }\n\n  .scroll-div {\n    -webkit-overflow-scrolling: touch;\n  }\n\n  .picker-choose {\n    height: 120px;\n    box-sizing: border-box;\n    padding: 0 40px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 26px;\n    border-bottom: 2px solid #f2f2f2;\n\n    .cancel {\n      color: #999;\n    }\n\n    .confirm {\n      color: #4388e1;\n    }\n  }\n}\n\n.picker-wheel-wrapper {\n  display: flex;\n  padding: 0 20px;\n  box-sizing: border-box;\n  align-items: center;\n  height: 420px;\n  overflow: hidden;\n  position: relative;\n\n  div {\n    flex: 1;\n    font-size: 26px;\n    text-align: center;\n    height: 340px;\n    overflow: auto;\n\n    &::-webkit-scrollbar {\n      display: none;\n    }\n\n    ul {\n      transform: translateY(134px);\n\n      > li {\n        height: 72px;\n        line-height: 72px;\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        -webkit-line-clamp: 1;\n        overflow: hidden;\n        color: #000;\n\n        &:nth-last-of-type(1) {\n          padding-bottom: 134px;\n        }\n      }\n    }\n  }\n\n  i {\n    position: absolute;\n    z-index: 10;\n    left: 0;\n    width: 100%;\n    height: 172px;\n    pointer-events: none;\n    -webkit-transform: translateZ(0);\n    transform: translateZ(0);\n  }\n\n  .border-top {\n    top: 0;\n    background: linear-gradient(\n      0deg,\n      hsla(0, 0%, 100%, 0.4),\n      hsla(0, 0%, 100%, 0.8)\n    );\n    border-bottom: 2px solid #ebebeb;\n  }\n\n  .border-bottom {\n    bottom: 0;\n    background: linear-gradient(\n      180deg,\n      hsla(0, 0%, 100%, 0.4),\n      hsla(0, 0%, 100%, 0.8)\n    );\n    border-top: 2px solid #ebebeb;\n  }\n}\n</style>"],"sourceRoot":"src/components/Pickers"}]}