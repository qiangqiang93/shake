{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/thread-loader/dist/cjs.js!/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/hytx-rebuild/node_modules/eslint-loader/index.js??ref--13-0!/Users/qiang/work/hytx/hytx-rebuild/src/service/auth-guard.js","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/service/auth-guard.js","mtime":1548831898039},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { getCookie } from '@/utils';\nimport store from '../store';\n\nvar authGuard = function authGuard(to, from, next) {\n  // 路由发生变化修改页面title\n  if (to.meta.title) {\n    document.title = to.meta.title;\n  } // 把需要缓存的路由放到数组中\n\n\n  if (to.name && to.meta.keepAlive && !store.state.system.router.includes(to.name)) {\n    store.commit('system/updateRouter', {\n      type: 'add',\n      data: to.name\n    });\n  }\n\n  if (to.meta.auth) {\n    var token = getCookie();\n\n    if (!token) {\n      next('/login');\n    } else {\n      if (to.path === '/index' && store.state.user.userInfo && !store.state.user.userInfo.is_per && store.state.user.userInfo.is_per != undefined) {\n        next('/information');\n      } else {\n        next();\n      }\n    }\n  } else {\n    next();\n  }\n};\n\nexport default authGuard;",{"version":3,"sources":["/Users/qiang/work/hytx/hytx-rebuild/src/service/auth-guard.js"],"names":["getCookie","store","authGuard","to","from","next","meta","title","document","name","keepAlive","state","system","router","includes","commit","type","data","auth","token","path","user","userInfo","is_per","undefined"],"mappings":"AAAA,SAASA,SAAT,QAA0B,SAA1B;AACA,OAAOC,KAAP,MAAkB,UAAlB;;AACA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC;AACA,MAAIF,EAAE,CAACG,IAAH,CAAQC,KAAZ,EAAmB;AACjBC,IAAAA,QAAQ,CAACD,KAAT,GAAiBJ,EAAE,CAACG,IAAH,CAAQC,KAAzB;AACD,GAJmC,CAKpC;;;AACA,MACEJ,EAAE,CAACM,IAAH,IACAN,EAAE,CAACG,IAAH,CAAQI,SADR,IAEA,CAACT,KAAK,CAACU,KAAN,CAAYC,MAAZ,CAAmBC,MAAnB,CAA0BC,QAA1B,CAAmCX,EAAE,CAACM,IAAtC,CAHH,EAIE;AACAR,IAAAA,KAAK,CAACc,MAAN,CAAa,qBAAb,EAAoC;AAClCC,MAAAA,IAAI,EAAE,KAD4B;AAElCC,MAAAA,IAAI,EAAEd,EAAE,CAACM;AAFyB,KAApC;AAID;;AACD,MAAIN,EAAE,CAACG,IAAH,CAAQY,IAAZ,EAAkB;AAChB,QAAIC,KAAK,GAAGnB,SAAS,EAArB;;AACA,QAAI,CAACmB,KAAL,EAAY;AACVd,MAAAA,IAAI,CAAC,QAAD,CAAJ;AACD,KAFD,MAEO;AACL,UACEF,EAAE,CAACiB,IAAH,KAAY,QAAZ,IACAnB,KAAK,CAACU,KAAN,CAAYU,IAAZ,CAAiBC,QADjB,IAEA,CAACrB,KAAK,CAACU,KAAN,CAAYU,IAAZ,CAAiBC,QAAjB,CAA0BC,MAF3B,IAGAtB,KAAK,CAACU,KAAN,CAAYU,IAAZ,CAAiBC,QAAjB,CAA0BC,MAA1B,IAAoCC,SAJtC,EAKE;AACAnB,QAAAA,IAAI,CAAC,cAAD,CAAJ;AACD,OAPD,MAOO;AACLA,QAAAA,IAAI;AACL;AACF;AACF,GAhBD,MAgBO;AACLA,IAAAA,IAAI;AACL;AACF,CAnCD;;AAqCA,eAAeH,SAAf","sourcesContent":["import { getCookie } from '@/utils'\nimport store from '../store'\nconst authGuard = (to, from, next) => {\n  // 路由发生变化修改页面title\n  if (to.meta.title) {\n    document.title = to.meta.title\n  }\n  // 把需要缓存的路由放到数组中\n  if (\n    to.name &&\n    to.meta.keepAlive &&\n    !store.state.system.router.includes(to.name)\n  ) {\n    store.commit('system/updateRouter', {\n      type: 'add',\n      data: to.name\n    })\n  }\n  if (to.meta.auth) {\n    let token = getCookie()\n    if (!token) {\n      next('/login')\n    } else {\n      if (\n        to.path === '/index' &&\n        store.state.user.userInfo &&\n        !store.state.user.userInfo.is_per &&\n        store.state.user.userInfo.is_per != undefined\n      ) {\n        next('/information')\n      } else {\n        next()\n      }\n    }\n  } else {\n    next()\n  }\n}\n\nexport default authGuard\n"]}]}