{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/components/CustomComponent/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/components/CustomComponent/index.vue","mtime":1547004851846},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.link\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport _objectSpread from \"/Users/qiang/work/hytx/hytx-rebuild/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Swiper from 'swiper';\nimport eventBus from '@/utils/eventBus';\nimport Tools from './component/Tools';\nimport AppUploadImg from '../../components/AppUploadImg/index';\nimport Textarea from '../Textarea/index';\nimport 'swiper/dist/css/swiper.min.css';\nimport { mapActions } from 'vuex';\nexport default {\n  props: ['item', 'index', 'canEdit', 'datalen', 'hots'],\n  components: {\n    Tools: Tools,\n    Textarea: Textarea,\n    AppUploadImg: AppUploadImg\n  },\n  data: function data() {\n    return {\n      mySwiper: null,\n      paginationStyle: null,\n      date: new Date().getTime(),\n      move: false // 是否移动，用于轮播图切换位置时出现的bug，true时再一次初始化\n\n    };\n  },\n  mounted: function mounted() {\n    var _self = this;\n\n    if (this.item.type === 'slider') {\n      this.swiperInit();\n    }\n\n    if (this.canEdit && (this.item.type === 'slider' || this.item.type === 'pics' || this.item.type === 'imgText')) {\n      var flag = null;\n      flag = this.item.children.some(function (item) {\n        // 解决只有item.type = 'text' 时img为null没有item.img.src就会报错\n        var src = item.img ? item.img.src : item.img;\n        return src;\n      });\n      this.item.isAddSuperLink = flag;\n    }\n  },\n  methods: _objectSpread({}, mapActions(['updatePreviewGoods', 'updateTempDatas']), {\n    // tools组件操作\n    toolsAction: function toolsAction(e) {\n      this.$parent.$parent.childOperation(e[0], e[1]);\n    },\n    // 组件操作\n    componentOperate: function componentOperate(type, index) {\n      this.move = true;\n      this.$parent.$parent.childOperation(type, index);\n    },\n    // swiper初始化\n    swiperInit: function swiperInit() {\n      this.mySwiper = new Swiper('#' + this.item.className + this.date, {\n        autoplay: !!(this.$route.params.id || !this.canEdit),\n        pagination: {\n          el: '.swiper-pagination'\n        },\n        navigation: {\n          nextEl: '.swiper-button-next',\n          prevEl: '.swiper-button-prev'\n        }\n      });\n    },\n    // 删除banner\n    delswiperImg: function delswiperImg(index) {\n      this.$parent.$parent.delswiper(this.index, index);\n    },\n    // 上传图片\n    uploadImg: function uploadImg(path, index) {\n      this.$emit('upload', {\n        path: path,\n        index: index\n      });\n    },\n    // 缩放\n    scale: function scale(index, ra) {\n      this.$parent.$parent.scale(this.index, index, ra);\n    },\n    // 保留换行符等\n    format: function format(input) {\n      return input.replace(/\\n/g, '<br/>').replace(/ /gim, '&nbsp;&nbsp;');\n    },\n    buying: function buying(its) {\n      this.updatePreviewGoods(true);\n      this.updateTempDatas(this.$parent.$parent.datas);\n\n      if (its.link) {\n        window.location.href = /^http:\\/\\/|^https:\\/\\//.test(its.link) ? its.link : 'http://' + its.link;\n      }\n    }\n  }),\n  beforeDestroy: function beforeDestroy() {\n    if (this.mySwiper) {\n      this.mySwiper.destroy();\n    }\n  },\n  watch: {\n    item: function item(newval, oldval) {\n      if (this.item.type === 'slider' || this.item.type === 'pics' || this.item.type === 'imgText') {\n        var hasLink = this.item.children.some(function (it) {\n          it.img.superLink.text;\n        });\n        this.paginationStyle = hasLink ? {\n          bottom: '60px'\n        } : {\n          bottom: '20px'\n        };\n      }\n    },\n    canEdit: function canEdit(newval, oldval) {\n      if (this.mySwiper) {\n        !newval ? this.mySwiper.autoplay.start() : this.mySwiper.autoplay.stop();\n      }\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"custom-child\" :class=\"item.className\">\n    <div class=\"custom-child-content\">\n      <!-- 标题 -->\n      <template v-if=\"item.type==='title'\">\n        <div class=\"custom-title-box\" :class=\"canEdit ? 'edit' : ''\">\n          <div class=\"custom-title-detail\">\n            <template v-if=\"canEdit\">\n              <input v-if=\"item.index.length>=0\" class=\"title-index\" type=\"text\" v-model=\"item.index\" maxlength=\"1\" placeholder=\"副\">\n              <input class=\"custom-title-text\" type=\"text\" v-model=\"item.title\" maxlength=\"6\" placeholder=\"添加标题\">\n            </template>\n            <template v-else>\n              <span v-if=\"item.index.length>=0\" class=\"title-index\">{{item.index}}</span>\n              <span class=\"custom-title-text\" v-text=\"item.title\"></span>\n            </template>\n          </div>\n        </div>\n        <div class=\"custom-subTitle-box\" :class=\"canEdit ? 'edit' : ''\" v-if=\"item.subTitle!==null\">\n          <p v-if=\"!canEdit\">{{item.subTitle}}</p>\n          <input v-else type=\"text\" v-model=\"item.subTitle\" placeholder=\"我是副标题\" maxlength=\"9\">\n        </div>\n      </template>\n      <!-- 基础信息 -->\n      <template v-else-if=\"item.type==='baseInfo'\">\n        <div class=\"custom-baseInfo\">\n          <div class=\"avatar\" :class=\"canEdit ? 'edit' : ''\">\n            <img class=\"avatar-img\" v-if=\"item.infos.avatar.href\" :src=\"item.infos.avatar.href\" @click=\"scale('baseInfo')\">\n            <img v-else src=\"./opcity.png\" alt=\"\" class=\"cropper-preview\">\n            <AppUploadImg @success=\"uploadImg\" class=\"input\"></AppUploadImg>\n          </div>\n          <p class=\"popularity\">\n            <span>人气: </span>\n            <span v-text=\"hots || 88\"></span>\n          </p>\n          <p class=\"name\">\n            <span>姓名: </span>\n            <span v-if=\"!canEdit\">{{item.infos.name}}</span>\n            <input v-else type=\"text\" v-model=\"item.infos.name\" placeholder=\"姓名\">\n          </p>\n          <p class=\"jobs\">\n            <span>职位:</span>\n            <span v-if=\"!canEdit\">{{item.infos.jobs}}</span>\n            <input v-else type=\"text\" v-model=\"item.infos.jobs\" placeholder=\"职位\">\n          </p>\n          <p class=\"company\">\n            <span>公司: </span>\n            <span v-if=\"!canEdit\">{{item.infos.company}}</span>\n            <input v-else type=\"text\" v-model=\"item.infos.company\" placeholder=\"公司名称\">\n          </p>\n        </div>\n      </template>\n      <!-- 轮播图片 -->\n      <template v-else-if=\"item.type==='slider'\">\n        <div class=\"swiper-container\" :id=\"item.className+date\">\n          <div class=\"swiper-wrapper\">\n            <div class=\"custom-imgText-wrapper swiper-slide\" v-for=\"(its, indexs) in item.children\" :key=\"indexs\">\n              <template v-if=\"its.isSliderItem\">\n                <div class=\"swiperdel\" v-if=\"canEdit\" @click=\"delswiperImg(indexs)\">X</div>\n                <div class=\"custom-imgText-imgBox\" v-if=\"its.type !== 'text'\" :class=\"canEdit ? 'edit' : ''\">\n                  <img v-if=\"its.img.src\" :src=\"its.img.src\" alt=\"\" @click=\"scale(indexs)\">\n                  <img v-else src=\"./opcity.png\" alt=\"\" class=\"cropper-preview\">\n                  <AppUploadImg @success=\"uploadImg($event,indexs)\" class=\"input\"></AppUploadImg>\n                  <div class=\"custom-imgText-superLink\" v-show=\"its.img.superLink.link\">\n                    <input v-if=\"canEdit\" type=\"text\" placeholder=\"\" v-model=\"its.img.superLink.text\">\n                    <router-link v-else :to=\"its.img.superLink.link\">\n                      <i class=\"iconfont icon-738bianjiqi_chaolianjie\"></i>{{its.img.superLink.text}}</router-link>\n                  </div>\n                </div>\n              </template>\n            </div>\n          </div>\n          <div class=\"swiper-pagination\" :style=\"paginationStyle\">\n          </div>\n          <div class=\"swiper-button-prev\" v-show=\"canEdit\"></div>\n          <!--左箭头-->\n          <div class=\"swiper-button-next\" v-show=\"canEdit\"></div>\n          <!--右箭头-->\n        </div>\n      </template>\n      <!-- 视频 -->\n      <template v-else-if=\"item.type==='video'\">\n        <div class=\"custom-imgText-wrapper\">\n          <div class=\"custom-imgText-textBox edit\">\n            <textarea class=\"custom-imgText-text edit\" placeholder=\"标题在添加视频后显示\" v-model=\"item.video.title\" :maxlength=\"100\" disabled v-if=\"canEdit\"></textarea>\n            <p v-if=\"!canEdit&&item.video.title\" style=\"font-size:32px;font-weight: 700;\">{{item.video.title}}</p>\n            <textarea class=\"custom-imgText-text edit\" style=\"height:100px;\" placeholder=\"内容在添加视频后显示\" v-model=\"item.video.content\" :maxlength=\"300\" disabled v-if=\"canEdit\"></textarea>\n            <p v-if=\"!canEdit&&item.video.title\" style=\"text-indent:28px;\">{{item.video.content}}</p>\n          </div>\n          <div class=\"custom-imgText-imgBox edit-video edit\" @click=\"componentOperate('addVideo', index)\" style=\"height:390px;\" v-if=\"canEdit\">\n            <img :src=\"item.video.img.src\" alt=\"\">\n          </div>\n          <div class=\"custom-imgText-imgBox edit-video\" style=\"height:390px;\" v-else>\n            <iframe :src=\"item.video.link\" frameborder=\"0\" style=\"width:100%; height:390px;\">\n            </iframe>\n          </div>\n        </div>\n      </template>\n      <!-- 商品 -->\n      <template v-else-if=\"item.type==='goods'\">\n        <div class=\"custom-goods\" v-for=\"(its, indexs) in item.goods\" :key=\"indexs\" :class=\"canEdit ? 'edit' : ''\">\n          <div class=\"custom-goods-info\">\n            <div class=\"custom-goods-img\">\n              <img v-if=\"its.img.src\" :src=\"its.img.src\" alt=\"\" @click=\"scale(indexs,'goods')\">\n              <img v-else src=\"./opcity.png\" alt=\"\">\n              <AppUploadImg @success=\"uploadImg($event,indexs)\" class=\"input\"></AppUploadImg>\n            </div>\n            <div class=\"custom-goods-price\">\n              <div class=\"title\">\n                <textarea placeholder=\"请输入内容\" v-model=\"its.title\" v-if=\"canEdit\"></textarea>\n                <p v-if=\"!canEdit\" v-text=\"its.title\"></p>\n              </div>\n              <div class=\"price\">\n                <div>\n                  <span class=\"lowPrice\" v-if=\"canEdit\">￥<input type=\"text\" placeholder=\"折合价\" v-model=\"its.lowPrice\" maxlength=\"7\"></span>\n                  <span class=\"lowPrice\" v-else><span v-if=\"its.lowPrice\">￥</span><span class=\"price\">{{its.lowPrice}}</span></span>\n                  <span class=\"highPrice\" v-if=\"canEdit\">￥<input type=\"text\" placeholder=\"原价\" v-model=\"its.highPrice\" maxlength=\"7\"></span>\n                  <span class=\"highPrice\" v-else><span v-if=\"its.lowPrice\">￥</span>{{its.highPrice}}</span>\n                </div>\n                <!-- <div class=\"btn\"><span v-if=\"canEdit\">立即抢购</span><a :href=\"its.link?its.link:'javascript:void(0)'\" v-else><span>立即抢购</span></a></div>-->\n                <div class=\"btn\"><span v-if=\"canEdit\">立即抢购</span><span v-else @click=\"buying(its)\">立即抢购</span></div>\n              </div>\n            </div>\n          </div>\n          <textarea placeholder=\"请输入除“淘宝链接”外的平台链接\" style=\"height:auto;\" v-model=\"its.link\" v-if=\"canEdit\"></textarea>\n        </div>\n      </template>\n      <!-- 图文 -->\n      <template v-else>\n        <div class=\"custom-imgText-wrapper\" v-for=\"(its, indexs) in item.children\" :key=\"indexs\">\n          <div class=\"custom-imgText-textBox\" v-if=\"its.type === 'text' || its.type === 'imgText'\" :class=\"canEdit ? 'edit' : ''\">\n            <Textarea class=\"custom-imgText-text\" :value=\"its.text\" :canEdit=\"canEdit\" v-model=\"its.text\"></Textarea>\n            <!-- <Textarea class=\"custom-imgText-text edit\" v-if=\"canEdit\" v-model=\"its.text\"></Textarea> -->\n            <!-- <textarea class=\"custom-imgText-text edit\" v-if=\"canEdit\" v-model=\"its.text\" placeholder=\"请输入内容\" :maxlength=\"its.maxLenth || 300\"></textarea>\n            <p class=\"custom-imgText-text\" v-else v-html=\"format(its.text)\"></p> -->\n          </div>\n          <div class=\"custom-imgText-imgBox\" v-if=\"its.type !== 'text'\" :class=\"canEdit ? 'edit' : ''\">\n            <img v-if=\"its.img.src\" :src=\"its.img.src\" alt=\"\" @click=\"scale(indexs)\">\n            <img v-else src=\"./opcity.png\" alt=\"\" class=\"cropper-preview\">\n            <AppUploadImg v-if=\"canEdit&&item.type !== 'video'\" @success=\"uploadImg($event,indexs)\" class=\"input\"></AppUploadImg>\n            <div class=\"custom-imgText-superLink\" v-show=\"its.img.superLink.link\">\n              <input v-if=\"canEdit\" type=\"text\" placeholder=\"\" v-model=\"its.img.superLink.text\" maxlength=\"20\">\n              <router-link v-else :to=\"its.img.superLink.link\">\n                <i class=\"iconfont icon-738bianjiqi_chaolianjie\"></i>{{its.img.superLink.text}}</router-link>\n            </div>\n          </div>\n        </div>\n      </template>\n\n    </div>\n    <!-- 组件通用工具栏 -->\n    <Tools @actions=\"toolsAction\" v-if=\"canEdit\" :item=\"item\" :index=\"index\" :datalen=\"datalen\"></Tools>\n  </div>\n</template>\n<script>\nimport Swiper from 'swiper'\nimport eventBus from '@/utils/eventBus'\nimport Tools from './component/Tools'\nimport AppUploadImg from '../../components/AppUploadImg/index'\nimport Textarea from '../Textarea/index'\nimport 'swiper/dist/css/swiper.min.css'\nimport { mapActions } from 'vuex'\n\nexport default {\n  props: ['item', 'index', 'canEdit', 'datalen', 'hots'],\n  components: {\n    Tools,\n    Textarea,\n    AppUploadImg\n  },\n  data() {\n    return {\n      mySwiper: null,\n      paginationStyle: null,\n      date: new Date().getTime(),\n      move: false // 是否移动，用于轮播图切换位置时出现的bug，true时再一次初始化\n    }\n  },\n  mounted() {\n    let _self = this\n    if (this.item.type === 'slider') {\n      this.swiperInit()\n    }\n    if (\n      this.canEdit &&\n      (this.item.type === 'slider' ||\n        this.item.type === 'pics' ||\n        this.item.type === 'imgText')\n    ) {\n      let flag = null\n      flag = this.item.children.some(item => {\n        // 解决只有item.type = 'text' 时img为null没有item.img.src就会报错\n        let src = item.img ? item.img.src : item.img\n        return src\n      })\n      this.item.isAddSuperLink = flag\n    }\n  },\n  methods: {\n    ...mapActions(['updatePreviewGoods', 'updateTempDatas']),\n    // tools组件操作\n    toolsAction(e) {\n      this.$parent.$parent.childOperation(e[0], e[1])\n    },\n    // 组件操作\n    componentOperate(type, index) {\n      this.move = true\n      this.$parent.$parent.childOperation(type, index)\n    },\n    // swiper初始化\n    swiperInit() {\n      this.mySwiper = new Swiper('#' + this.item.className + this.date, {\n        autoplay: !!(this.$route.params.id || !this.canEdit),\n        pagination: {\n          el: '.swiper-pagination'\n        },\n        navigation: {\n          nextEl: '.swiper-button-next',\n          prevEl: '.swiper-button-prev'\n        }\n      })\n    },\n    // 删除banner\n    delswiperImg(index) {\n      this.$parent.$parent.delswiper(this.index, index)\n    },\n    // 上传图片\n    uploadImg(path, index) {\n      this.$emit('upload', {\n        path,\n        index\n      })\n    },\n    // 缩放\n    scale(index, ra) {\n      this.$parent.$parent.scale(this.index, index, ra)\n    },\n    // 保留换行符等\n    format: function(input) {\n      return input.replace(/\\n/g, '<br/>').replace(/ /gim, '&nbsp;&nbsp;')\n    },\n    buying(its) {\n      this.updatePreviewGoods(true)\n      this.updateTempDatas(this.$parent.$parent.datas)\n      if (its.link) {\n        window.location.href = /^http:\\/\\/|^https:\\/\\//.test(its.link)\n          ? its.link\n          : 'http://' + its.link\n      }\n    }\n  },\n  beforeDestroy() {\n    if (this.mySwiper) {\n      this.mySwiper.destroy()\n    }\n  },\n  watch: {\n    item(newval, oldval) {\n      if (\n        this.item.type === 'slider' ||\n        this.item.type === 'pics' ||\n        this.item.type === 'imgText'\n      ) {\n        let hasLink = this.item.children.some(it => {\n          it.img.superLink.text\n        })\n        this.paginationStyle = hasLink ? { bottom: '60px' } : { bottom: '20px' }\n      }\n    },\n    canEdit(newval, oldval) {\n      if (this.mySwiper) {\n        !newval ? this.mySwiper.autoplay.start() : this.mySwiper.autoplay.stop()\n      }\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.swiperdel {\n  width: 80px;\n  height: 80px;\n  background: rgba(0, 0, 0, 0.4);\n  font-size: 36px;\n  line-height: 60px;\n  padding-left: 14px;\n  box-sizing: border-box;\n  color: #fff;\n  border-radius: 0 0 0 80px;\n  text-align: center;\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 1;\n}\n.custom-imgText-wrapper {\n  width: 100%;\n  width: 690px;\n  margin: auto;\n  font-size: 28px;\n  .custom-imgText-imgBox {\n    position: relative;\n    background: #e0e0e0;\n    &.edit {\n      box-sizing: border-box;\n      border: 2px dashed #47b3ff;\n      background-image: url('./add.png');\n      background-repeat: no-repeat;\n      background-size: auto 50%;\n      background-position: center;\n    }\n    &.edit-video {\n      background-image: url('./add-video.png');\n      position: relative;\n      background-repeat: no-repeat;\n      background-size: auto 50%;\n      background-position: center;\n      a {\n        position: absolute;\n        display: block;\n        width: 100%;\n        height: 100%;\n        background: rgba(1, 1, 1, 0.3);\n      }\n      .icon-kaishi {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        font-size: 72px;\n        color: #fff;\n      }\n    }\n    img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n    }\n    > input {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      z-index: 0;\n      opacity: 0;\n    }\n    .custom-imgText-superLink {\n      position: absolute;\n      width: 100%;\n      bottom: 2px;\n      left: 0;\n      z-index: 1;\n      height: 56px;\n      background: rgba(0, 0, 0, 0.3);\n      vertical-align: middle;\n      input {\n        position: relative;\n        display: block;\n        height: 40px;\n        width: 80%;\n        margin: 8px auto;\n        border: 2px dashed #47b3ff;\n        outline: none;\n        background: transparent;\n        color: #fff;\n        font-size: 28px;\n        text-align: center;\n      }\n      a {\n        display: block;\n        height: 100%;\n        line-height: 56px;\n        width: 100%;\n        font-size: 28px;\n        text-align: center;\n        color: #fff;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n    }\n  }\n  .custom-imgText-textBox {\n    &.edit textarea {\n      box-sizing: border-box;\n      border: 2px dashed #47b3ff;\n    }\n    textarea,\n    p {\n      width: 100%;\n      height: 100%;\n      resize: none;\n      outline: none;\n      border: 0;\n      padding: 0;\n      letter-spacing: 0px;\n    }\n    p {\n      border: 2px solid transparent;\n      white-space: pre-wrap;\n    }\n  }\n}\n.custom-slider-1 {\n  .swiper-container {\n    margin: 0 auto;\n    position: relative;\n    overflow: hidden;\n    list-style: none;\n    padding: 0;\n    z-index: 1;\n    .buttonac {\n      opacity: 0.3;\n    }\n    .swiper-wrapper {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      z-index: 1;\n      display: flex;\n      box-sizing: content-box;\n      transition: all 0.5s ease-in-out;\n      .swiper-slide {\n        flex-shrink: 0;\n        width: 100%;\n        height: 100%;\n        position: relative;\n      }\n    }\n    .custom-imgText-imgBox {\n      height: 420px;\n    }\n  }\n  .swiper-button-prev,\n  .swiper-container-rtl .swiper-button-next {\n    background-image: url('left.png');\n    outline: none;\n    left: 20px;\n    right: auto;\n  }\n  .swiper-button-next,\n  .swiper-container-rtl .swiper-button-prev {\n    background-image: url('right.png');\n    outline: none;\n    right: 20px;\n    left: auto;\n  }\n  .swiper-button-next,\n  .swiper-button-prev {\n    position: absolute;\n    top: 50%;\n    width: 54px;\n    height: 88px;\n    margin-top: -44px;\n    z-index: 10;\n    cursor: pointer;\n    background-size: 54px 88px;\n    background-position: center;\n    background-repeat: no-repeat;\n  }\n  .swiper-pagination {\n    position: absolute;\n    text-align: center;\n    transition: 0.3s opacity;\n    transform: translate3d(0, 0, 0);\n    z-index: 10;\n    bottom: 20px;\n    left: 0;\n    width: 100%;\n    .swiper-pagination-bullet {\n      border: 2px solid #dadada;\n      box-sizing: border-box;\n      opacity: 1;\n      margin: 0 4px;\n      width: 16px;\n      height: 16px;\n      display: inline-block;\n      border-radius: 100%;\n      background: #000;\n      opacity: 0.2;\n    }\n    .swiper-pagination-bullet-active {\n      opacity: 1 !important;\n      background: #fff !important;\n    }\n  }\n}\n</style>\n<style lang=\"scss\">\n@import './index.scss';\n@import './custom-title.scss';\n@import './custom-text.scss';\n@import './custom-imgText.scss';\n@import './custom-baseInfo.scss';\n@import './custom-pics.scss';\n@import './custom-video.scss';\n@import './custom-goods.scss';\n</style>\n"],"sourceRoot":"src/components/CustomComponent"}]}