{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/mine/wallet/addCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/mine/wallet/addCard.vue","mtime":1547544461280},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ListItem from '../../../components/ListItem/index';\nimport List from '../../../components/List/index';\nimport httpService from '../../../service/httpService';\nimport dialogService from '../../../service/dialogService';\nexport default {\n  name: 'mine-addCard',\n  data: function data() {\n    return {\n      loading: false,\n      bank: '工商银行',\n      cardMan: '',\n      cardNum: ''\n    };\n  },\n  components: {\n    ListItem: ListItem,\n    List: List\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    // 离开清除缓存\n    if (to.path == '/wallet/card/withdraw') {\n      this.$router.replace('mine/wallet');\n    }\n\n    next();\n  },\n  methods: {\n    submit: function submit() {\n      if (this.loading) return;\n\n      var _self = this;\n\n      if (!this.cardMan) {\n        dialogService.alert('持卡人不能为空');\n        return;\n      }\n\n      if (!this.bank) {\n        dialogService.alert('银行名称不能为空');\n        return;\n      }\n\n      if (!this.cardNum) {\n        dialogService.alert('银行卡卡号不能为空');\n        return;\n      } // 先获取银行卡信息，确认无误后提交到后台\n      // 绑定成功后跳转到银行卡管理\n\n\n      this.loading = true;\n      httpService.post('/front/bank-card', {\n        name: this.cardMan,\n        bank_name: this.bank,\n        card_no: this.cardNum,\n        card_no_confirmation: this.cardNum\n      }).then(function (res) {\n        if (res.status !== 0) {\n          dialogService.alert(res.message);\n          _self.loading = false;\n          return;\n        }\n\n        dialogService.toast('添加成功');\n        _self.loading = false;\n\n        if (_self.$router.query && _self.$router.query.type) {\n          _self.$router.replace('/wallet/card/withdraw');\n        } else {\n          _self.$router.back();\n        }\n      }).catch(function (err) {\n        dialogService.alert(err.message);\n        _self.loading = false;\n      });\n    },\n    tips: function tips() {\n      dialogService.toast('暂时只支持工商银行');\n    }\n  }\n};",{"version":3,"sources":["addCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA,OAAA,QAAA,MAAA,oCAAA;AACA,OAAA,IAAA,MAAA,gCAAA;AACA,OAAA,WAAA,MAAA,8BAAA;AACA,OAAA,aAAA,MAAA,gCAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,IAAA,EAAA,MAFA;AAGA,MAAA,OAAA,EAAA,EAHA;AAIA,MAAA,OAAA,EAAA;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA,QADA;AAEA,IAAA,IAAA,EAAA;AAFA,GAVA;AAcA,EAAA,gBAdA,4BAcA,EAdA,EAcA,IAdA,EAcA,IAdA,EAcA;AACA;AACA,QAAA,EAAA,CAAA,IAAA,IAAA,uBAAA,EAAA;AACA,WAAA,OAAA,CAAA,OAAA,CAAA,aAAA;AACA;;AACA,IAAA,IAAA;AACA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,UAAA,KAAA,OAAA,EAAA;;AACA,UAAA,KAAA,GAAA,IAAA;;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA,QAAA,aAAA,CAAA,KAAA,CAAA,SAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,IAAA,EAAA;AACA,QAAA,aAAA,CAAA,KAAA,CAAA,UAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA,QAAA,aAAA,CAAA,KAAA,CAAA,WAAA;AACA;AACA,OAdA,CAeA;AACA;;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,MAAA,WAAA,CACA,IADA,CACA,kBADA,EACA;AACA,QAAA,IAAA,EAAA,KAAA,OADA;AAEA,QAAA,SAAA,EAAA,KAAA,IAFA;AAGA,QAAA,OAAA,EAAA,KAAA,OAHA;AAIA,QAAA,oBAAA,EAAA,KAAA;AAJA,OADA,EAOA,IAPA,CAOA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,aAAA,CAAA,KAAA,CAAA,GAAA,CAAA,OAAA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA;AACA;;AACA,QAAA,aAAA,CAAA,KAAA,CAAA,MAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AACA,YAAA,KAAA,CAAA,OAAA,CAAA,KAAA,IAAA,KAAA,CAAA,OAAA,CAAA,KAAA,CAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,uBAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA;AACA;AACA,OApBA,EAqBA,KArBA,CAqBA,UAAA,GAAA,EAAA;AACA,QAAA,aAAA,CAAA,KAAA,CAAA,GAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,OAxBA;AAyBA,KA5CA;AA6CA,IAAA,IA7CA,kBA6CA;AACA,MAAA,aAAA,CAAA,KAAA,CAAA,WAAA;AACA;AA/CA;AArBA,CAAA","sourcesContent":["<template>\n  <div class=\"warpper\">\n    <p class=\"tips\">请绑定持卡人本人的银行卡</p>\n    <List style=\"margin-top:25px;\">\n      <ListItem label=\"持卡人\">\n        <input placeholder=\"请输入持卡人姓名\" v-model=\"cardMan\" class=\"input\" type=\"text\" />\n      </ListItem>\n      <ListItem label=\"银行\">\n        <p class=\"input\">工商银行<i @click=\"tips\" class=\"iconfont icon-gantan\"></i></p>\n      </ListItem>\n      <ListItem label=\"卡号\">\n        <input placeholder=\"请输入银行卡号\" v-model=\"cardNum\" class=\"input\" type=\"text\" />\n      </ListItem>\n    </List>\n    <div class=\"submit\" @click=\"submit\">{{loading?'正在提交,请稍后':'完成'}}</div>\n  </div>\n</template>\n<script>\nimport ListItem from '../../../components/ListItem/index'\nimport List from '../../../components/List/index'\nimport httpService from '../../../service/httpService'\nimport dialogService from '../../../service/dialogService'\nexport default {\n  name: 'mine-addCard',\n  data() {\n    return {\n      loading: false,\n      bank: '工商银行',\n      cardMan: '',\n      cardNum: ''\n    }\n  },\n  components: {\n    ListItem,\n    List\n  },\n  beforeRouteLeave(to, from, next) {\n    // 离开清除缓存\n    if (to.path == '/wallet/card/withdraw') {\n      this.$router.replace('mine/wallet')\n    }\n    next()\n  },\n  methods: {\n    submit() {\n      if (this.loading) return\n      let _self = this\n      if (!this.cardMan) {\n        dialogService.alert('持卡人不能为空')\n        return\n      }\n      if (!this.bank) {\n        dialogService.alert('银行名称不能为空')\n        return\n      }\n      if (!this.cardNum) {\n        dialogService.alert('银行卡卡号不能为空')\n        return\n      }\n      // 先获取银行卡信息，确认无误后提交到后台\n      // 绑定成功后跳转到银行卡管理\n      this.loading = true\n      httpService\n        .post('/front/bank-card', {\n          name: this.cardMan,\n          bank_name: this.bank,\n          card_no: this.cardNum,\n          card_no_confirmation: this.cardNum\n        })\n        .then(res => {\n          if (res.status !== 0) {\n            dialogService.alert(res.message)\n            _self.loading = false\n            return\n          }\n          dialogService.toast('添加成功')\n          _self.loading = false\n          if (_self.$router.query && _self.$router.query.type) {\n            _self.$router.replace('/wallet/card/withdraw')\n          } else {\n            _self.$router.back()\n          }\n        })\n        .catch(err => {\n          dialogService.alert(err.message)\n          _self.loading = false\n        })\n    },\n    tips() {\n      dialogService.toast('暂时只支持工商银行')\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.warpper {\n  .submit {\n    width: 690px;\n    height: 88px;\n    background: #274ff3;\n    color: #fff;\n    line-height: 88px;\n    margin: 35px auto;\n    text-align: center;\n    border-radius: 10px;\n    font-size: 34px;\n  }\n  .input {\n    flex: 4;\n    outline: none;\n  }\n  .icon-gantan {\n    color: #ed2828;\n    font-size: 32px;\n    float: right;\n  }\n  .tips {\n    margin-top: 25px;\n    color: #666666;\n    font-size: 24px;\n    padding-left: 30px;\n  }\n  width: 100%;\n  min-height: 100vh;\n  background: #f4f4f4;\n  overflow: hidden;\n  position: relative;\n}\n</style>\n \n "],"sourceRoot":"src/module/mine/wallet"}]}