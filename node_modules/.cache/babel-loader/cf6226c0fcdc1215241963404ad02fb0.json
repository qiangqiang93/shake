{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/components/AppAblum/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/components/AppAblum/index.vue","mtime":1545377467271},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  props: ['data'],\n  mounted: function mounted() {\n    this.style = {\n      width: this.data.ablum.length + '00%',\n      transform: 'translateX(-' + this.data.index * 750 + 'px)'\n    };\n  },\n  data: function data() {\n    return {\n      pos: null,\n      style: null,\n      oldScale: null,\n      distance: null,\n      touchType: false,\n      // false【滑动】 true【缩放】\n      ablum: this.data.ablum,\n      page: this.data.index + 1,\n      allPage: this.data.ablum.length\n    };\n  },\n  methods: {\n    close: function close() {\n      this.$emit('close');\n    },\n    // touchstart\n    startHander: function startHander(event) {\n      if (event.touches.length > 1) {\n        this.touchType = true;\n        var x = event.touches[0].pageX - event.touches[1].pageX;\n        var y = event.touches[0].pageY - event.touches[1].pageY;\n        this.distance = Math.sqrt(x * x + y * y);\n        var index = this.page - 1;\n        var imgs = this.$refs.ablum.querySelectorAll('.img');\n\n        try {\n          var style = imgs[index].style.transform;\n          this.oldScale = style ? style.replace(/[^0-9.]/gi, '') : 1;\n        } catch (err) {\n          this.oldScale = 1;\n        }\n      } else {\n        this.pos = {\n          x: event.touches[0].pageX,\n          y: event.touches[0].pageY\n        };\n      }\n    },\n    // touchmove\n    moveHander: function moveHander(event) {// nothing\n    },\n    // touchend\n    endHander: function endHander(event) {\n      var _this = this;\n\n      if (this.touchType) {\n        setTimeout(function () {\n          _this.touchType = false;\n        });\n      } else {\n        var pos = {\n          x: event.changedTouches[0].pageX,\n          y: event.changedTouches[0].pageY\n        };\n        var index = this.page - 1;\n        var imgBoxs = this.$refs.ablum.querySelectorAll('.img-box');\n        var imgBox = imgBoxs[index];\n\n        if (pos.x - this.pos.x >= 80 && this.page !== 1 && imgBox.scrollLeft === 0) {\n          // 左滑\n          this.page = this.page - 1;\n        } else if (pos.x - this.pos.x <= -80 && this.page !== this.ablum.length && (imgBox.scrollLeft === imgBox.offsetWidth || imgBox.scrollLeft === 0)) {\n          // 右滑\n          // if (imgBox.scrollLeft)\n          this.page = this.page + 1;\n        }\n\n        this.style = {\n          width: this.data.ablum.length + '00%',\n          transform: 'translateX(-' + (this.page - 1) * 750 + 'px)'\n        };\n        this.pos = null;\n      }\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- \n    @name AppAblum\n    @desc 通用相册组件\n    @props \n        data: [\n            {\n                src,\n                superLink: {\n                    link,\n                    text\n                }\n            }\n        ]\n-->\n\n<template>\n  <div class=\"app-ablum\">\n    <div class=\"content\" @touchstart=\"startHander($event)\" @touchmove=\"moveHander($event)\" @touchend=\"endHander($event)\">\n      <div class=\"img-wrapper\" :style=\"style\" ref=\"ablum\">\n        <div class=\"img-box\" v-for=\"(item, index) in ablum\" :key=\"index\" @click=\"close()\">\n          <img class=\"img\" :src=\" item.src || item\" alt=\"\">\n          <div class=\"loading\">\n            <img src=\"\" alt=\"\">\n          </div>\n          <template v-if=\"item.superLink\">\n            <router-link v-if=\"item.superLink.link\" class=\"ablum-link\" :to=\"item.superLink.link\">\n              <i class=\"iconfont icon-738bianjiqi_chaolianjie\"></i>{{item.superLink.text}}</router-link>\n          </template>\n        </div>\n      </div>\n    </div>\n    <div class=\"page\">\n      <span>{{page}}/{{allPage}}</span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['data'],\n  mounted() {\n    this.style = {\n      width: this.data.ablum.length + '00%',\n      transform: 'translateX(-' + this.data.index * 750 + 'px)'\n    }\n  },\n  data() {\n    return {\n      pos: null,\n      style: null,\n      oldScale: null,\n      distance: null,\n      touchType: false, // false【滑动】 true【缩放】\n      ablum: this.data.ablum,\n      page: this.data.index + 1,\n      allPage: this.data.ablum.length\n    }\n  },\n  methods: {\n    close() {\n      this.$emit('close')\n    },\n    // touchstart\n    startHander(event) {\n      if (event.touches.length > 1) {\n        this.touchType = true\n        let x = event.touches[0].pageX - event.touches[1].pageX\n        let y = event.touches[0].pageY - event.touches[1].pageY\n        this.distance = Math.sqrt(x * x + y * y)\n        let index = this.page - 1\n        let imgs = this.$refs.ablum.querySelectorAll('.img')\n        try {\n          let style = imgs[index].style.transform\n          this.oldScale = style ? style.replace(/[^0-9.]/gi, '') : 1\n        } catch (err) {\n          this.oldScale = 1\n        }\n      } else {\n        this.pos = {\n          x: event.touches[0].pageX,\n          y: event.touches[0].pageY\n        }\n      }\n    },\n    // touchmove\n    moveHander(event) {\n      // nothing\n    },\n    // touchend\n    endHander(event) {\n      if (this.touchType) {\n        setTimeout(() => {\n          this.touchType = false\n        })\n      } else {\n        let pos = {\n          x: event.changedTouches[0].pageX,\n          y: event.changedTouches[0].pageY\n        }\n        let index = this.page - 1\n        let imgBoxs = this.$refs.ablum.querySelectorAll('.img-box')\n        let imgBox = imgBoxs[index]\n        if (\n          pos.x - this.pos.x >= 80 &&\n          this.page !== 1 &&\n          imgBox.scrollLeft === 0\n        ) {\n          // 左滑\n          this.page = this.page - 1\n        } else if (\n          pos.x - this.pos.x <= -80 &&\n          this.page !== this.ablum.length &&\n          (imgBox.scrollLeft === imgBox.offsetWidth || imgBox.scrollLeft === 0)\n        ) {\n          // 右滑\n          // if (imgBox.scrollLeft)\n          this.page = this.page + 1\n        }\n        this.style = {\n          width: this.data.ablum.length + '00%',\n          transform: 'translateX(-' + (this.page - 1) * 750 + 'px)'\n        }\n        this.pos = null\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.app-ablum {\n  top: 0;\n  left: 0;\n  z-index: 9;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  overflow: hidden;\n  background: rgb(0, 0, 0);\n  .close {\n    z-index: 2;\n    right: 20px;\n    color: #fff;\n    position: fixed;\n  }\n  .content {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n  }\n  .img-wrapper {\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n    transition: all 0.3s ease-out;\n  }\n  .img-box {\n    float: left;\n    width: 750px;\n    height: 100%;\n    display: flex;\n    overflow: auto;\n    align-items: center;\n    justify-content: center;\n    .img {\n      width: 100%;\n      transform-origin: 0;\n    }\n  }\n  .ablum-link {\n    position: absolute;\n    font-size: 32px;\n    bottom: 120px;\n    color: #fff;\n  }\n  .page {\n    top: 40px;\n    width: 100%;\n    color: #fff;\n    position: fixed;\n    font-size: 28px;\n    text-align: center;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/AppAblum"}]}