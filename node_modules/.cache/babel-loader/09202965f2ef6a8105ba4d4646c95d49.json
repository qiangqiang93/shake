{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/app/webPage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/app/webPage/index.vue","mtime":1547623681165},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/Users/qiang/work/hytx/hytx-rebuild/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport webPage from '../../../api/webPage';\nimport Wrapper from '../../../components/Wrapper';\nimport AppAblum from '../../../components/AppAblum';\nimport AppLoading from '../../../components/AppLoading';\nimport CustomComponent from '../../../components/CustomComponent';\nimport dialogService from '../../../service/dialogService';\nexport default {\n  name: 'appWebPage',\n  data: function data() {\n    return {\n      firstIn: true,\n      //是否第一次进入\n      datas: [],\n      ablum: null,\n      bgcolor: '',\n      pageId: null,\n      canEdit: false,\n      components: null\n    };\n  },\n  beforeMount: function beforeMount() {\n    this.pageId = this.$route.params.id;\n    this.getCustomInfo();\n  },\n  methods: {\n    // 获取自定义网页信息\n    getCustomInfo: function () {\n      var _getCustomInfo = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return webPage.getWebPageById(this.pageId);\n\n              case 3:\n                res = _context.sent;\n\n                if (!(res.status !== 0)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                throw new Error(res.message);\n\n              case 6:\n                this.datas = JSON.parse(res.data.content);\n                this.popularity = res.data.popularity;\n                this.bgcolor = res.data.background;\n                document.title = res.data.title;\n                this.firstIn = false;\n                _context.next = 16;\n                break;\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](0);\n                dialogService.alert(_context.t0.message);\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 13]]);\n      }));\n\n      function getCustomInfo() {\n        return _getCustomInfo.apply(this, arguments);\n      }\n\n      return getCustomInfo;\n    }(),\n    // 相册\n    scale: function scale(index, i) {\n      var ablum = [];\n\n      if (i === 'baseInfo') {\n        ablum = [this.datas[index].infos.avatar.href];\n        i = 0;\n      } else {\n        this.datas[index].children.forEach(function (element) {\n          if (element.type !== 'text') {\n            if (element.type === 'slider') {\n              if (element.isSliderItem) {\n                ablum.push(element.img);\n              }\n            } else {\n              ablum.push(element.img);\n            }\n          }\n        });\n      } // slide的时候bug\n\n\n      if (i > ablum.length - 1) {\n        i = ablum.length - 1;\n      }\n\n      this.ablum = {\n        ablum: ablum,\n        index: i\n      };\n    },\n    // 关闭相册\n    closeScale: function closeScale() {\n      this.ablum = null;\n    }\n  },\n  components: {\n    Wrapper: Wrapper,\n    AppAblum: AppAblum,\n    AppLoading: AppLoading,\n    CustomComponent: CustomComponent\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAeA,OAAA,OAAA,MAAA,sBAAA;AAEA,OAAA,OAAA,MAAA,6BAAA;AACA,OAAA,QAAA,MAAA,8BAAA;AACA,OAAA,UAAA,MAAA,gCAAA;AACA,OAAA,eAAA,MAAA,qCAAA;AAEA,OAAA,aAAA,MAAA,gCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,IADA;AACA;AACA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,IAHA;AAIA,MAAA,OAAA,EAAA,EAJA;AAKA,MAAA,MAAA,EAAA,IALA;AAMA,MAAA,OAAA,EAAA,KANA;AAOA,MAAA,UAAA,EAAA;AAPA,KAAA;AASA,GAZA;AAaA,EAAA,WAbA,yBAaA;AACA,SAAA,MAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,SAAA,aAAA;AACA,GAhBA;AAiBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,aAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAIA,OAAA,CAAA,cAAA,CAAA,KAAA,MAAA,CAJA;;AAAA;AAIA,gBAAA,GAJA;;AAAA,sBAKA,GAAA,CAAA,MAAA,KAAA,CALA;AAAA;AAAA;AAAA;;AAAA,sBAKA,IAAA,KAAA,CAAA,GAAA,CAAA,OAAA,CALA;;AAAA;AAMA,qBAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA;AACA,qBAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AACA,qBAAA,OAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AACA,gBAAA,QAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA,qBAAA,OAAA,GAAA,KAAA;AAVA;AAAA;;AAAA;AAAA;AAAA;AAYA,gBAAA,aAAA,CAAA,KAAA,CAAA,YAAA,OAAA;;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAeA;AACA,IAAA,KAhBA,iBAgBA,KAhBA,EAgBA,CAhBA,EAgBA;AACA,UAAA,KAAA,GAAA,EAAA;;AACA,UAAA,CAAA,KAAA,UAAA,EAAA;AACA,QAAA,KAAA,GAAA,CAAA,KAAA,KAAA,CAAA,KAAA,EAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA;AACA,QAAA,CAAA,GAAA,CAAA;AACA,OAHA,MAGA;AACA,aAAA,KAAA,CAAA,KAAA,EAAA,QAAA,CAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,cAAA,OAAA,CAAA,IAAA,KAAA,MAAA,EAAA;AACA,gBAAA,OAAA,CAAA,IAAA,KAAA,QAAA,EAAA;AACA,kBAAA,OAAA,CAAA,YAAA,EAAA;AACA,gBAAA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA;AACA;AACA,aAJA,MAIA;AACA,cAAA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA;AACA;AACA;AACA,SAVA;AAWA,OAjBA,CAkBA;;;AACA,UAAA,CAAA,GAAA,KAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,CAAA,GAAA,KAAA,CAAA,MAAA,GAAA,CAAA;AACA;;AACA,WAAA,KAAA,GAAA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAAA;AAIA,KA1CA;AA2CA;AACA,IAAA,UA5CA,wBA4CA;AACA,WAAA,KAAA,GAAA,IAAA;AACA;AA9CA,GAjBA;AAiEA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,QAAA,EAAA,QAFA;AAGA,IAAA,UAAA,EAAA,UAHA;AAIA,IAAA,eAAA,EAAA;AAJA;AAjEA,CAAA","sourcesContent":["<template>\n  <div class=\"app-webPage\">\n    <AppLoading v-show=\"firstIn\"></AppLoading>\n    <div class=\"custom-wrapper\" :style=\"'background:'+bgcolor\">\n      <div class=\"custom-content\">\n        <template v-for=\"(item, index) in datas\">\n          <CustomComponent :key=\"index\" :index=\"index\" :item=\"item\" :hots=\"popularity\" :canEdit=\"canEdit\" v-if=\"item.isShow\"></CustomComponent>\n        </template>\n      </div>\n    </div>\n    <AppAblum v-if=\"ablum\" :data=\"ablum\" @close=\"closeScale\"></AppAblum>\n  </div>\n</template>\n\n<script>\nimport webPage from '../../../api/webPage'\n\nimport Wrapper from '../../../components/Wrapper'\nimport AppAblum from '../../../components/AppAblum'\nimport AppLoading from '../../../components/AppLoading'\nimport CustomComponent from '../../../components/CustomComponent'\n\nimport dialogService from '../../../service/dialogService'\n\nexport default {\n  name: 'appWebPage',\n  data() {\n    return {\n      firstIn: true, //是否第一次进入\n      datas: [],\n      ablum: null,\n      bgcolor: '',\n      pageId: null,\n      canEdit: false,\n      components: null\n    }\n  },\n  beforeMount() {\n    this.pageId = this.$route.params.id\n    this.getCustomInfo()\n  },\n  methods: {\n    // 获取自定义网页信息\n    async getCustomInfo() {\n      try {\n        let res = await webPage.getWebPageById(this.pageId)\n        if (res.status !== 0) throw new Error(res.message)\n        this.datas = JSON.parse(res.data.content)\n        this.popularity = res.data.popularity\n        this.bgcolor = res.data.background\n        document.title = res.data.title\n        this.firstIn = false\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 相册\n    scale(index, i) {\n      let ablum = []\n      if (i === 'baseInfo') {\n        ablum = [this.datas[index].infos.avatar.href]\n        i = 0\n      } else {\n        this.datas[index].children.forEach(element => {\n          if (element.type !== 'text') {\n            if (element.type === 'slider') {\n              if (element.isSliderItem) {\n                ablum.push(element.img)\n              }\n            } else {\n              ablum.push(element.img)\n            }\n          }\n        })\n      }\n      // slide的时候bug\n      if (i > ablum.length - 1) {\n        i = ablum.length - 1\n      }\n      this.ablum = {\n        ablum: ablum,\n        index: i\n      }\n    },\n    // 关闭相册\n    closeScale() {\n      this.ablum = null\n    }\n  },\n  components: {\n    Wrapper,\n    AppAblum,\n    AppLoading,\n    CustomComponent\n  }\n}\n</script>\n\n\n\n<style lang=\"scss\" scoped>\n.app-webPage {\n  width: 100%;\n  overflow: auto;\n  position: relative;\n  -webkit-overflow-scrolling: touch;\n}\n.custom-content {\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n  box-sizing: border-box;\n}\n</style>"],"sourceRoot":"src/module/app/webPage"}]}