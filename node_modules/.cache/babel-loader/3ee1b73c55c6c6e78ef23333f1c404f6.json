{"remainingRequest":"/Users/qiang/work/hytx/circle/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/circle/node_modules/eslint-loader/index.js??ref--13-0!/Users/qiang/work/hytx/circle/src/api/login/index.js","dependencies":[{"path":"/Users/qiang/work/hytx/circle/src/api/login/index.js","mtime":1548819948600},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/Users/qiang/work/hytx/circle/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport user from '../user';\nimport store from '../../store';\nimport httpService from '../../service/httpService';\nexport default {\n  // 密码登录\n  pwdLogin: function () {\n    var _pwdLogin = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(obj) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", httpService({\n                url: \"/app/login\",\n                method: 'post',\n                body: obj,\n                loading: false\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function pwdLogin(_x) {\n      return _pwdLogin.apply(this, arguments);\n    }\n\n    return pwdLogin;\n  }(),\n  // 短信登录\n  codeLogin: function () {\n    var _codeLogin = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(obj) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", httpService({\n                url: \"/app/phone_login\",\n                method: 'post',\n                body: obj,\n                loading: false\n              }));\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function codeLogin(_x2) {\n      return _codeLogin.apply(this, arguments);\n    }\n\n    return codeLogin;\n  }(),\n  // 找回密码\n  retrievePwd: function () {\n    var _retrievePwd = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(obj) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", httpService({\n                url: \"/app/retrieve-password\",\n                method: 'post',\n                body: obj,\n                loading: false\n              }));\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    function retrievePwd(_x3) {\n      return _retrievePwd.apply(this, arguments);\n    }\n\n    return retrievePwd;\n  }(),\n  // 注册\n  register: function () {\n    var _register = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4(obj) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return httpService.post('/front/register', obj);\n\n            case 2:\n              res = _context4.sent;\n\n              if (res.token) {\n                store.commit('system/setToken', res.token);\n                user.getProfile();\n              }\n\n              return _context4.abrupt(\"return\", res);\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this);\n    }));\n\n    function register(_x4) {\n      return _register.apply(this, arguments);\n    }\n\n    return register;\n  }(),\n  // app注册\n  appReg: function () {\n    var _appReg = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee5(obj) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return httpService.post('/app/register', obj);\n\n            case 2:\n              res = _context5.sent;\n\n              if (res.status === 0) {\n                store.commit('system/setToken', res.data.token);\n                user.getProfile();\n              }\n\n              return _context5.abrupt(\"return\", res);\n\n            case 5:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, this);\n    }));\n\n    function appReg(_x5) {\n      return _appReg.apply(this, arguments);\n    }\n\n    return appReg;\n  }(),\n  // 判断手机是否存在\n  phoneExist: function () {\n    var _phoneExist = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee6(phone) {\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              return _context6.abrupt(\"return\", httpService({\n                url: \"/front/phone-exist\",\n                method: 'post',\n                body: {\n                  phone: phone\n                },\n                loading: false\n              }));\n\n            case 1:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, this);\n    }));\n\n    function phoneExist(_x6) {\n      return _phoneExist.apply(this, arguments);\n    }\n\n    return phoneExist;\n  }(),\n  // 微信登录\n  wechatLogin: function () {\n    var _wechatLogin = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee7(obj) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return httpService.post('/app/wechat_login', obj);\n\n            case 2:\n              res = _context7.sent;\n              return _context7.abrupt(\"return\", res);\n\n            case 4:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, this);\n    }));\n\n    function wechatLogin(_x7) {\n      return _wechatLogin.apply(this, arguments);\n    }\n\n    return wechatLogin;\n  }(),\n  // 通过code 获取网页授权access_token\n  getAccessToken: function () {\n    var _getAccessToken = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee8(obj) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.next = 2;\n              return httpService.get(\"https://api.weixin.qq.com/sns/oauth2/access_token?appid=\".concat(obj.appid, \"&secret=\").concat(obj.secret, \"&code=\").concat(obj.code, \"&grant_type=authorization_code\"));\n\n            case 2:\n              res = _context8.sent;\n              return _context8.abrupt(\"return\", res);\n\n            case 4:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8, this);\n    }));\n\n    function getAccessToken(_x8) {\n      return _getAccessToken.apply(this, arguments);\n    }\n\n    return getAccessToken;\n  }(),\n  // 拉取微信用户息息\n  getWechatInfo: function () {\n    var _getWechatInfo = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee9(obj) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              _context9.next = 2;\n              return httpService.get(\"https://api.weixin.qq.com/sns/userinfo?access_token=\".concat(obj.access_token, \"&openid=\").concat(obj.openid, \"&lang=zh_CN\"));\n\n            case 2:\n              res = _context9.sent;\n              return _context9.abrupt(\"return\", res);\n\n            case 4:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9, this);\n    }));\n\n    function getWechatInfo(_x9) {\n      return _getWechatInfo.apply(this, arguments);\n    }\n\n    return getWechatInfo;\n  }(),\n  // 绑定手机\n  bindPhone: function () {\n    var _bindPhone = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee10(obj) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              _context10.next = 2;\n              return httpService.post('/app/bind_phone_login', obj);\n\n            case 2:\n              res = _context10.sent;\n\n              if (res.status === 0) {\n                store.commit('system/setToken', res.data.token);\n                user.getProfile();\n              }\n\n              return _context10.abrupt(\"return\", res);\n\n            case 5:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10, this);\n    }));\n\n    function bindPhone(_x10) {\n      return _bindPhone.apply(this, arguments);\n    }\n\n    return bindPhone;\n  }()\n};",{"version":3,"sources":["/Users/qiang/work/hytx/circle/src/api/login/index.js"],"names":["user","store","httpService","pwdLogin","obj","url","method","body","loading","codeLogin","retrievePwd","register","post","res","token","commit","getProfile","appReg","status","data","phoneExist","phone","wechatLogin","getAccessToken","get","appid","secret","code","getWechatInfo","access_token","openid","bindPhone"],"mappings":";;;;;;AAAA,OAAOA,IAAP,MAAiB,SAAjB;AAEA,OAAOC,KAAP,MAAkB,aAAlB;AAEA,OAAOC,WAAP,MAAwB,2BAAxB;AAEA,eAAe;AACb;AACMC,EAAAA,QAFO;AAAA;AAAA;AAAA,8CAEEC,GAFF;AAAA;AAAA;AAAA;AAAA;AAAA,+CAGJF,WAAW,CAAC;AACjBG,gBAAAA,GAAG,cADc;AAEjBC,gBAAAA,MAAM,EAAE,MAFS;AAGjBC,gBAAAA,IAAI,EAAEH,GAHW;AAIjBI,gBAAAA,OAAO,EAAE;AAJQ,eAAD,CAHP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAWb;AACMC,EAAAA,SAZO;AAAA;AAAA;AAAA,+CAYGL,GAZH;AAAA;AAAA;AAAA;AAAA;AAAA,gDAaJF,WAAW,CAAC;AACjBG,gBAAAA,GAAG,oBADc;AAEjBC,gBAAAA,MAAM,EAAE,MAFS;AAGjBC,gBAAAA,IAAI,EAAEH,GAHW;AAIjBI,gBAAAA,OAAO,EAAE;AAJQ,eAAD,CAbP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAsBb;AACME,EAAAA,WAvBO;AAAA;AAAA;AAAA,+CAuBKN,GAvBL;AAAA;AAAA;AAAA;AAAA;AAAA,gDA0BJF,WAAW,CAAC;AACjBG,gBAAAA,GAAG,0BADc;AAEjBC,gBAAAA,MAAM,EAAE,MAFS;AAGjBC,gBAAAA,IAAI,EAAEH,GAHW;AAIjBI,gBAAAA,OAAO,EAAE;AAJQ,eAAD,CA1BP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAiCb;AACMG,EAAAA,QAlCO;AAAA;AAAA;AAAA,+CAkCEP,GAlCF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAmCKF,WAAW,CAACU,IAAZ,CAAiB,iBAAjB,EAAoCR,GAApC,CAnCL;;AAAA;AAmCPS,cAAAA,GAnCO;;AAoCX,kBAAIA,GAAG,CAACC,KAAR,EAAe;AACbb,gBAAAA,KAAK,CAACc,MAAN,CAAa,iBAAb,EAAgCF,GAAG,CAACC,KAApC;AACAd,gBAAAA,IAAI,CAACgB,UAAL;AACD;;AAvCU,gDAwCJH,GAxCI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA0Cb;AACMI,EAAAA,MA3CO;AAAA;AAAA;AAAA,+CA2CAb,GA3CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBA4CKF,WAAW,CAACU,IAAZ,CAAiB,eAAjB,EAAkCR,GAAlC,CA5CL;;AAAA;AA4CPS,cAAAA,GA5CO;;AA6CX,kBAAIA,GAAG,CAACK,MAAJ,KAAe,CAAnB,EAAsB;AACpBjB,gBAAAA,KAAK,CAACc,MAAN,CAAa,iBAAb,EAAgCF,GAAG,CAACM,IAAJ,CAASL,KAAzC;AACAd,gBAAAA,IAAI,CAACgB,UAAL;AACD;;AAhDU,gDAiDJH,GAjDI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAoDb;AACMO,EAAAA,UArDO;AAAA;AAAA;AAAA,+CAqDIC,KArDJ;AAAA;AAAA;AAAA;AAAA;AAAA,gDAsDJnB,WAAW,CAAC;AACjBG,gBAAAA,GAAG,sBADc;AAEjBC,gBAAAA,MAAM,EAAE,MAFS;AAGjBC,gBAAAA,IAAI,EAAE;AACJc,kBAAAA,KAAK,EAALA;AADI,iBAHW;AAMjBb,gBAAAA,OAAO,EAAE;AANQ,eAAD,CAtDP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA+Db;AACMc,EAAAA,WAhEO;AAAA;AAAA;AAAA,+CAgEKlB,GAhEL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAiEKF,WAAW,CAACU,IAAZ,CAAiB,mBAAjB,EAAsCR,GAAtC,CAjEL;;AAAA;AAiEPS,cAAAA,GAjEO;AAAA,gDAkEJA,GAlEI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAoEb;AACMU,EAAAA,cArEO;AAAA;AAAA;AAAA,+CAqEQnB,GArER;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAsEKF,WAAW,CAACsB,GAAZ,mEAA2EpB,GAAG,CAACqB,KAA/E,qBAA+FrB,GAAG,CAACsB,MAAnG,mBAAkHtB,GAAG,CAACuB,IAAtH,oCAtEL;;AAAA;AAsEPd,cAAAA,GAtEO;AAAA,gDAuEJA,GAvEI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAyEb;AACMe,EAAAA,aA1EO;AAAA;AAAA;AAAA,+CA0EOxB,GA1EP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBA2EKF,WAAW,CAACsB,GAAZ,+DAAuEpB,GAAG,CAACyB,YAA3E,qBAAkGzB,GAAG,CAAC0B,MAAtG,iBA3EL;;AAAA;AA2EPjB,cAAAA,GA3EO;AAAA,gDA4EJA,GA5EI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA8Eb;AACMkB,EAAAA,SA/EO;AAAA;AAAA;AAAA,gDA+EG3B,GA/EH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAgFKF,WAAW,CAACU,IAAZ,CAAiB,uBAAjB,EAA0CR,GAA1C,CAhFL;;AAAA;AAgFPS,cAAAA,GAhFO;;AAiFX,kBAAIA,GAAG,CAACK,MAAJ,KAAe,CAAnB,EAAsB;AACpBjB,gBAAAA,KAAK,CAACc,MAAN,CAAa,iBAAb,EAAgCF,GAAG,CAACM,IAAJ,CAASL,KAAzC;AACAd,gBAAAA,IAAI,CAACgB,UAAL;AACD;;AApFU,iDAqFJH,GArFI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAf","sourcesContent":["import user from '../user'\n\nimport store from '../../store'\n\nimport httpService from '../../service/httpService'\n\nexport default {\n  // 密码登录\n  async pwdLogin(obj) {\n    return httpService({\n      url: `/app/login`,\n      method: 'post',\n      body: obj,\n      loading: false\n    })\n    // return httpService.post(`/app/login`, obj)\n  },\n  // 短信登录\n  async codeLogin(obj) {\n    return httpService({\n      url: `/app/phone_login`,\n      method: 'post',\n      body: obj,\n      loading: false\n    })\n    // return httpService.post(`/app/phone_login\n    // `, obj)\n  },\n  // 找回密码\n  async retrievePwd(obj) {\n    // return httpService.post(`/app/retrieve-password\n    // `, obj)\n    return httpService({\n      url: `/app/retrieve-password`,\n      method: 'post',\n      body: obj,\n      loading: false\n    })\n  },\n  // 注册\n  async register(obj) {\n    let res = await httpService.post('/front/register', obj)\n    if (res.token) {\n      store.commit('system/setToken', res.token)\n      user.getProfile()\n    }\n    return res\n  },\n  // app注册\n  async appReg(obj) {\n    let res = await httpService.post('/app/register', obj)\n    if (res.status === 0) {\n      store.commit('system/setToken', res.data.token)\n      user.getProfile()\n    }\n    return res\n  },\n\n  // 判断手机是否存在\n  async phoneExist(phone) {\n    return httpService({\n      url: `/front/phone-exist`,\n      method: 'post',\n      body: {\n        phone\n      },\n      loading: false\n    })\n  },\n  // 微信登录\n  async wechatLogin(obj) {\n    let res = await httpService.post('/app/wechat_login', obj)\n    return res\n  },\n  // 通过code 获取网页授权access_token\n  async getAccessToken(obj) {\n    let res = await httpService.get(`https://api.weixin.qq.com/sns/oauth2/access_token?appid=${obj.appid}&secret=${obj.secret}&code=${obj.code}&grant_type=authorization_code`)\n    return res\n  },\n  // 拉取微信用户息息\n  async getWechatInfo(obj) {\n    let res = await httpService.get(`https://api.weixin.qq.com/sns/userinfo?access_token=${obj.access_token}&openid=${obj.openid}&lang=zh_CN`)\n    return res\n  },\n  // 绑定手机\n  async bindPhone(obj) {\n    let res = await httpService.post('/app/bind_phone_login', obj)\n    if (res.status === 0) {\n      store.commit('system/setToken', res.data.token)\n      user.getProfile()\n    }\n    return res\n  }\n\n}"]}]}