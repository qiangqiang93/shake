{"remainingRequest":"/Users/qiang/work/hytx/circle/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/circle/src/components/FooterInfo/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/circle/src/components/FooterInfo/index.vue","mtime":1547781185269},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/Users/qiang/work/hytx/circle/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState, mapActions } from 'vuex';\nimport card from '../../api/card';\nimport guideService from '../../service/guideService';\nimport dialogService from '../../service/dialogService';\nexport default {\n  props: ['input', 'type'],\n  data: function data() {\n    return {};\n  },\n  mounted: function mounted() {},\n  methods: _objectSpread({}, mapActions(['user/updateUser']), {\n    // 名片操作[收藏、取消收藏]\n    cardHandler: function cardHandler() {\n      var _self = this;\n\n      if (!this.user) {\n        guideService.login();\n        return false;\n      }\n\n      if (this.input.has_holder) {\n        this.cancleCollecte();\n      } else {\n        this.submitCollecte();\n      }\n    },\n    // 收藏名片\n    submitCollecte: function () {\n      var _submitCollecte = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return card.collecteCard(this.input.card_id);\n\n              case 3:\n                res = _context.sent;\n\n                if (!(res.status !== 0)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                throw new Error(res.message);\n\n              case 6:\n                this.$set(this.input, 'has_holder', true);\n                dialogService.toast('收藏成功');\n                this['user/updateUser']({\n                  card_num: Number(this.user.card_num) + 1\n                });\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n                dialogService.alert(_context.t0.message);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 11]]);\n      }));\n\n      function submitCollecte() {\n        return _submitCollecte.apply(this, arguments);\n      }\n\n      return submitCollecte;\n    }(),\n    // 取消收藏名片\n    cancleCollecte: function () {\n      var _cancleCollecte = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return card.cancleCollecte(this.input.card_id);\n\n              case 3:\n                res = _context2.sent;\n\n                if (!(res.status !== 0)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                throw new Error(res.message);\n\n              case 6:\n                this.$set(this.input, 'has_holder', false);\n                dialogService.toast('取消收藏');\n                this['user/updateUser']({\n                  card_num: Number(this.user.card_num) - 1\n                });\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                dialogService.alert(_context2.t0.message);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 11]]);\n      }));\n\n      function cancleCollecte() {\n        return _cancleCollecte.apply(this, arguments);\n      }\n\n      return cancleCollecte;\n    }(),\n    // 克隆网页\n    clonePage: function clonePage() {\n      this.$emit('clone');\n    },\n    // 感兴趣\n    interesting: function interesting() {\n      this.$emit('interesting');\n    },\n    // 点击分享\n    shareHandler: function shareHandler() {\n      this.$emit('share');\n    }\n  }),\n  computed: _objectSpread({}, mapState({\n    user: function user(state) {\n      return state.user.userInfo;\n    }\n  }))\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<!--\n    @name       FooterInfo\n    @desc       底部信息操作组件 [名片详情、个人微网、营销网页]\n    @props\n            type    emun['card', 'webPage', 'marketing']\n            input   Object\n    @emit \n            share\n-->\n\n<template>\n  <div class=\"footer-info-wrapper\">\n    <template v-if=\"input\">\n      <div v-if=\"type === 'card'\" class=\"footer-info-content card\">\n        <router-link tag=\"div\" :to=\"'/other/preview/' + input.user_id\" class=\"footer-info-head\">\n          <img class=\"footer-info-img\" :src=\"input.portrait\" alt=\"\">\n        </router-link>\n        <div class=\"footer-info-collecte\" @click=\"cardHandler()\">\n          <template v-if=\"input.has_holder\">\n            <i class=\"iconfont icon-ganxingqu\"></i>\n            <span>取消收藏</span>\n          </template>\n          <template v-else>\n            <i class=\"iconfont icon-tubiaozhizuomoban\"></i>\n            <span>收藏名片</span>\n          </template>\n        </div>\n        <div class=\"footer-info-share\" @click=\"shareHandler()\">\n          <i class=\"iconfont icon-fenxiang4\"></i>\n          <span class=\"share-count\">{{input.share_count | numFormat('input')}}</span>\n          <span>分享</span>\n        </div>\n        <a :href=\"'tel:' + input.phone\" :disabled=\"!input.phone\" class=\"footer-info-phone\">\n          <i class=\"iconfont icon-dianhua1\"></i>拨打电话\n        </a>\n      </div>\n      <div v-if=\"type === 'webPage'\" class=\"footer-info-content webPage\">\n        <template v-if=\"input.user\">\n          <router-link tag=\"div\" :to=\"'/other/preview/' + input.user.id\" class=\"footer-info-head\">\n            <img class=\"footer-info-img\" :src=\"input.user.portrait\" alt=\"\">\n          </router-link>\n          <router-link tag=\"div\" :to=\"'/card/detail/' + input.user.id\" class=\"footer-info-card\">\n            <i class=\"iconfont icon-chakanmingpian\"></i>\n            <span class=\"footer-info-text\">名片</span>\n          </router-link>\n          <div v-if=\"user && user.id!==input.user_id&&input.is_clone\" class=\"footer-info-clone\" @click=\"clonePage()\">\n            <i class=\"iconfont icon-kelong\"></i>\n            <span class=\"footer-info-text\">克隆</span>\n          </div>\n        </template>\n        <div class=\"footer-info-interested\" @click=\"interesting()\">\n          <i v-if=\"input.is_interest\" class=\"iconfont icon-star\"></i>\n          <i v-else class=\"iconfont icon-duiwoganxingqu\"></i>\n          <p class=\"footer-info-text\">感兴趣</p>\n          <p class=\"footer-info-num\" v-text=\"input.interest\"></p>\n        </div>\n        <div class=\"footer-info-share\" @click=\"shareHandler()\">\n          <i class=\"iconfont icon-fenxiang2\"></i>\n          <p class=\"footer-info-text\">分享</p>\n          <p class=\"footer-info-num\" v-text=\"input.share\"></p>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex'\n\nimport card from '../../api/card'\n\nimport guideService from '../../service/guideService'\nimport dialogService from '../../service/dialogService'\n\nexport default {\n  props: ['input', 'type'],\n  data() {\n    return {}\n  },\n  mounted() {},\n  methods: {\n    ...mapActions(['user/updateUser']),\n    // 名片操作[收藏、取消收藏]\n    cardHandler() {\n      let _self = this\n      if (!this.user) {\n        guideService.login()\n        return false\n      }\n      if (this.input.has_holder) {\n        this.cancleCollecte()\n      } else {\n        this.submitCollecte()\n      }\n    },\n    // 收藏名片\n    async submitCollecte() {\n      try {\n        let res = await card.collecteCard(this.input.card_id)\n        if (res.status !== 0) throw new Error(res.message)\n\n        this.$set(this.input, 'has_holder', true)\n        dialogService.toast('收藏成功')\n        this['user/updateUser']({\n          card_num: Number(this.user.card_num) + 1\n        })\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 取消收藏名片\n    async cancleCollecte() {\n      try {\n        let res = await card.cancleCollecte(this.input.card_id)\n        if (res.status !== 0) throw new Error(res.message)\n        this.$set(this.input, 'has_holder', false)\n        dialogService.toast('取消收藏')\n        this['user/updateUser']({\n          card_num: Number(this.user.card_num) - 1\n        })\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 克隆网页\n    clonePage() {\n      this.$emit('clone')\n    },\n    // 感兴趣\n    interesting() {\n      this.$emit('interesting')\n    },\n    // 点击分享\n    shareHandler() {\n      this.$emit('share')\n    }\n  },\n  computed: {\n    ...mapState({\n      user: state => state.user.userInfo\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.footer-info-wrapper {\n  bottom: 0;\n  width: 100%;\n  position: fixed;\n}\n.footer-info-content.card {\n  width: 100%;\n  height: 100px;\n  display: flex;\n  margin-top: 20px;\n  position: relative;\n  justify-content: flex-end;\n  box-shadow: 0px 0px 15px 0px rgba(0, 0, 0, 0.15);\n  .footer-info-head {\n    top: -20px;\n    left: 40px;\n    width: 90px;\n    height: 90px;\n    overflow: hidden;\n    position: absolute;\n    border-radius: 45px;\n  }\n  .footer-info-img {\n    width: 100%;\n    height: 100%;\n  }\n  .footer-info-collecte {\n    width: 125px;\n    display: flex;\n    height: 100px;\n    font-size: 20px;\n    color: #333333;\n    position: relative;\n    margin-right: 15px;\n    align-items: center;\n    flex-direction: column;\n    justify-content: center;\n    font-family: 'PingFang SC Medium';\n  }\n  .icon-star,\n  .icon-ganxingqu {\n    font-size: 36px;\n    color: #5d7bf7;\n    margin-bottom: 10px;\n  }\n  .icon-tubiaozhizuomoban {\n    font-size: 36px;\n    color: #5d7bf7;\n    margin-bottom: 10px;\n  }\n  .footer-info-share {\n    width: 140px;\n    display: flex;\n    height: 100px;\n    font-size: 20px;\n    color: #333333;\n    position: relative;\n    margin-right: 60px;\n    align-items: center;\n    flex-direction: column;\n    justify-content: center;\n    font-family: 'PingFang SC Medium';\n  }\n  .icon-fenxiang4 {\n    font-size: 36px;\n    color: #5d7bf7;\n    margin-bottom: 10px;\n  }\n  .share-count {\n    right: 0;\n    top: 10px;\n    width: 60px;\n    height: 24px;\n    color: #fff;\n    font-size: 16px;\n    line-height: 24px;\n    position: absolute;\n    text-align: center;\n    border-radius: 12px;\n    background: #0bc782;\n    font-family: 'PingFang SC Bold';\n  }\n  .footer-info-phone {\n    width: 248px;\n    height: 100px;\n    color: #fff;\n    display: flex;\n    font-size: 30px;\n    overflow: hidden;\n    align-items: center;\n    background: #06c773;\n    justify-content: center;\n    font-family: 'PingFang SC Medium';\n  }\n  .icon-dianhua1 {\n    font-size: 32px;\n    margin-right: 10px;\n  }\n}\n.footer-info-content.webPage {\n  left: 0;\n  bottom: 0;\n  z-index: 1;\n  width: 100%;\n  height: 98px;\n  display: flex;\n  padding: 0 30px;\n  position: fixed;\n  background: #fff;\n  align-items: center;\n  box-sizing: border-box;\n  justify-content: space-around;\n  box-shadow: 0 -1px 10px 0 rgba(0, 0, 0, 0.08);\n  .footer-info-head {\n    width: 90px;\n    height: 90px;\n    overflow: hidden;\n    margin-top: -61px;\n    border-radius: 45px;\n  }\n  .footer-info-img {\n    width: 100%;\n    height: 100%;\n  }\n  .footer-info-card,\n  .footer-info-share,\n  .footer-info-clone,\n  .footer-info-interested {\n    width: 130px;\n    position: relative;\n    text-align: center;\n  }\n  .iconfont {\n    font-size: 40px;\n    color: #5d7bf7;\n  }\n  .footer-info-text {\n    color: #666;\n    display: block;\n    font-size: 20px;\n    margin-top: 6px;\n  }\n  .footer-info-num {\n    top: 0;\n    right: 0;\n    width: 57px;\n    height: 23px;\n    color: #fff;\n    font-size: 16px;\n    line-height: 23px;\n    position: absolute;\n    text-align: center;\n    border-radius: 12px;\n    background: #0bc782;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/FooterInfo"}]}