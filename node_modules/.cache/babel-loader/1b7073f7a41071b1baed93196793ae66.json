{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js!/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/mine/maibao/send.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/mine/maibao/send.vue","mtime":1546946999376},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/qiang/work/hytx/hytx-rebuild/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/qiang/work/hytx/hytx-rebuild/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport userApi from '../../../api/user/index';\nimport httpService from '../../../service/httpService';\nimport { mapState, mapActions } from 'vuex';\nimport Wrapper from '../../../components/Wrapper';\nimport Loading from '../../../components/Loading';\nimport CardItem from '../../../components/CardItem';\nimport dialogService from '../../../service/dialogService';\nimport AndroidHeader from '../../../components/AndroidHeader';\nexport default {\n  data: function data() {\n    return {\n      firstIn: true,\n      //是否第一次进入\n      cards: [],\n      // 名片夹名片列表\n      keyWord: null,\n      // 搜索关键字\n      isRequest: false,\n      // 是否正在请求\n      isShow: false,\n      // 赠送弹框\n      maibaoNum: '',\n      // 赠送脉宝个数\n      giveFriendId: null // 赠送给哪个朋友\n\n    };\n  },\n  mounted: function mounted() {\n    this.getCollectCard();\n  },\n  methods: {\n    // 提醒开通会员\n    attention: function () {\n      var _attention = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(id) {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return userApi.attention(id);\n\n              case 2:\n                res = _context.sent;\n                dialogService.alert('提醒成功');\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function attention(_x) {\n        return _attention.apply(this, arguments);\n      }\n\n      return attention;\n    }(),\n    // 点赠送操作\n    selectFriend: function selectFriend(id) {\n      this.giveFriendId = id;\n      this.isShow = true;\n    },\n    // 确定赠送脉宝个数\n    sure: function () {\n      var _sure = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var self, res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!isNaN(this.maibaoNum)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                dialogService.alert('请输入个数');\n                return _context2.abrupt(\"return\", false);\n\n              case 5:\n                if (!(('' + this.maibaoNum).indexOf('.') > -1)) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                dialogService.alert('请输入整数');\n                return _context2.abrupt(\"return\", false);\n\n              case 10:\n                if (!(this.maibao < this.maibaoNum)) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                dialogService.alert('您的脉宝不足');\n                return _context2.abrupt(\"return\", false);\n\n              case 13:\n                self = this;\n                _context2.prev = 14;\n                _context2.next = 17;\n                return userApi.sendMaibao(self.giveFriendId, self.maibaoNum);\n\n              case 17:\n                res = _context2.sent;\n\n                if (!(res.status !== 0)) {\n                  _context2.next = 21;\n                  break;\n                }\n\n                dialogService.alert(res.message);\n                return _context2.abrupt(\"return\");\n\n              case 21:\n                dialogService.alert('赠送成功');\n                this.isShow = false;\n                userApi.getProfile();\n                _context2.next = 29;\n                break;\n\n              case 26:\n                _context2.prev = 26;\n                _context2.t0 = _context2[\"catch\"](14);\n                dialogService.alert(_context2.t0.message);\n\n              case 29:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[14, 26]]);\n      }));\n\n      function sure() {\n        return _sure.apply(this, arguments);\n      }\n\n      return sure;\n    }(),\n    // 获取收藏的名片\n    getCollectCard: function () {\n      var _getCollectCard = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                this.isRequest = true;\n                _context3.next = 4;\n                return userApi.getFriend();\n\n              case 4:\n                res = _context3.sent;\n\n                if (!(res.status !== 0)) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                throw new Error(res.message);\n\n              case 7:\n                this.isRequest = false;\n                this.cards = res.data;\n                this.firstIn = false;\n                _context3.next = 15;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](0);\n                dialogService.alert(_context3.t0.message);\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 12]]);\n      }));\n\n      function getCollectCard() {\n        return _getCollectCard.apply(this, arguments);\n      }\n\n      return getCollectCard;\n    }()\n  },\n  computed: _objectSpread({}, mapState({\n    platform: function platform(state) {\n      return state.system.platform;\n    },\n    maibao: function maibao(state) {\n      return state.user.userInfo.maibao;\n    }\n  }), {\n    paddingTop: function paddingTop() {\n      return this.platform !== 'wechat' ? '198px' : '125px';\n    }\n  }),\n  components: {\n    Wrapper: Wrapper,\n    CardItem: CardItem,\n    Loading: Loading,\n    AndroidHeader: AndroidHeader\n  }\n};",{"version":3,"sources":["send.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Wrapper class=\"card-collection\" :paddingTop=\"paddingTop\">\n    <div ref=\"header\" class=\"card-collection-header\">\n      <AndroidHeader :title=\"'我的名片夹'\" iconColor=\"#fff\" fontColor=\"#fff\" background=\"#000\">\n      </AndroidHeader>\n      <div class=\"header-search\">\n        <i class=\"iconfont icon-sousuo\"></i>\n        <input type=\"text\" v-model=\"keyWord\" class=\"input\" placeholder=\"快速查找名片\"></div>\n    </div>\n    <Loading v-show=\"firstIn\"></Loading>\n    <div class=\"card-collection-list\">\n      <p v-show=\"!cards.length\" class=\"lack\"><img src=\"./lack.png\" /></p>\n      <div class=\"card-item-wrapper\" v-for=\"(item, index) in cards\" :key=\"index\">\n        <div class=\"send\" v-show=\"item.is_vip\" @click=\"selectFriend(item.user_id)\">赠送</div>\n        <span class=\"tips\" v-show=\"!item.is_vip\" @click=\"attention(item.user_id)\">提醒他开通VIP</span>\n        <!-- <span class=\"tiped\" v-show=\"!is_vip\">已提醒开通</span> -->\n        <CardItem :item=\"item\"></CardItem>\n      </div>\n    </div>\n    <div class=\"mask\" v-if=\"isShow\" @click.self=\"isShow=false\" :class=\"isShow?'show':''\">\n      <div class=\"popup\" v-show=\"isShow\">\n        <div class=\"popup-content\">\n          <p class=\"title\">赠送脉宝</p>\n          <input type=\"number\" class=\"maibao\" placeholder=\"请输入赠送脉宝数量\" v-model=\"maibaoNum\">\n          <p class=\"info\">当前可用脉宝{{maibao||0}}个</p>\n        </div>\n        <div class=\"popop-btn\">\n          <div @click=\"isShow=false\">取消</div>\n          <div @click=\"sure\">确定</div>\n        </div>\n      </div>\n    </div>\n  </Wrapper>\n</template>\n\n<script>\nimport userApi from '../../../api/user/index'\nimport httpService from '../../../service/httpService'\nimport { mapState, mapActions } from 'vuex'\nimport Wrapper from '../../../components/Wrapper'\nimport Loading from '../../../components/Loading'\nimport CardItem from '../../../components/CardItem'\nimport dialogService from '../../../service/dialogService'\nimport AndroidHeader from '../../../components/AndroidHeader'\nexport default {\n  data() {\n    return {\n      firstIn: true, //是否第一次进入\n      cards: [], // 名片夹名片列表\n      keyWord: null, // 搜索关键字\n      isRequest: false, // 是否正在请求\n      isShow: false, // 赠送弹框\n      maibaoNum: '', // 赠送脉宝个数\n      giveFriendId: null // 赠送给哪个朋友\n    }\n  },\n  mounted() {\n    this.getCollectCard()\n  },\n  methods: {\n    // 提醒开通会员\n    async attention(id) {\n      let res = await userApi.attention(id)\n      dialogService.alert('提醒成功')\n    },\n    // 点赠送操作\n    selectFriend(id) {\n      this.giveFriendId = id\n      this.isShow = true\n    },\n    // 确定赠送脉宝个数\n    async sure() {\n      // /front/maibao/give/{id}\n      if (isNaN(this.maibaoNum)) {\n        dialogService.alert('请输入个数')\n        return false\n      } else if (('' + this.maibaoNum).indexOf('.') > -1) {\n        dialogService.alert('请输入整数')\n        return false\n      } else if (this.maibao < this.maibaoNum) {\n        dialogService.alert('您的脉宝不足')\n        return false\n      }\n      let self = this\n      try {\n        let res = await userApi.sendMaibao(self.giveFriendId, self.maibaoNum)\n        if (res.status !== 0) {\n          dialogService.alert(res.message)\n          return\n        }\n        dialogService.alert('赠送成功')\n        this.isShow = false\n        userApi.getProfile()\n      } catch (error) {\n        dialogService.alert(error.message)\n      }\n    },\n    // 获取收藏的名片\n    async getCollectCard() {\n      try {\n        this.isRequest = true\n        let res = await userApi.getFriend()\n        if (res.status !== 0) throw new Error(res.message)\n        this.isRequest = false\n        this.cards = res.data\n        this.firstIn = false\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    }\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform,\n      maibao: state => state.user.userInfo.maibao\n    }),\n    paddingTop: function() {\n      return this.platform !== 'wechat' ? '198px' : '125px'\n    }\n  },\n  components: {\n    Wrapper,\n    CardItem,\n    Loading,\n    AndroidHeader\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.card-collection {\n  background: #f3f3f3;\n}\n.mask {\n  z-index: 2;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  animation: mymove 0.3s;\n  background: rgba(0, 0, 0, 0.3);\n\n  @keyframes mymove {\n    from {\n      background: rgba(0, 0, 0, 0);\n    }\n\n    to {\n      background: rgba(0, 0, 0, 0.3);\n    }\n  }\n\n  @keyframes mymove {\n    from {\n      background: rgba(0, 0, 0, 0);\n    }\n\n    to {\n      background: rgba(0, 0, 0, 0.3);\n    }\n  }\n\n  .popup {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -215px;\n    margin-left: -295px;\n    width: 590px;\n    height: 430px;\n    background: #fff;\n    border-radius: 6px;\n    overflow: hidden;\n    animation: move 0.3s;\n  }\n\n  @keyframes move {\n    0% {\n      transform: scale(0.8, 0.8);\n    }\n\n    60% {\n      transform: scale(1.1, 1.1);\n    }\n\n    100% {\n      transform: scale(1, 1);\n    }\n  }\n\n  .popup-content {\n    text-align: center;\n    .maibao {\n      width: 492px;\n      display: block;\n      outline: none;\n      margin: 0 auto;\n      padding-bottom: 20px;\n      border-bottom: 1px solid #adadad;\n      font-size: 30px;\n      text-align: center;\n    }\n    .title {\n      margin: 60px 0 52px;\n      font-size: 34px;\n      color: #333333;\n      font-weight: bold;\n    }\n    .info {\n      text-align: right;\n      font-size: 28px;\n      color: #666666;\n      margin-top: 30px;\n      margin-right: 45px;\n    }\n  }\n\n  .popop-btn {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    display: flex;\n    border-top: 1px solid #f2f2f2;\n    margin-top: 40px;\n\n    div {\n      width: 50%;\n      font-weight: bold;\n      height: 100px;\n      line-height: 100px;\n      font-size: 34px;\n      text-align: center;\n      color: #374ff3;\n\n      &:nth-of-type(1) {\n        border-right: 1px solid #f2f2f2;\n        color: #333;\n      }\n\n      &:active {\n        background: #e2e2e2;\n      }\n    }\n  }\n}\n.card-collection-header {\n  z-index: 1;\n  top: 0;\n  width: 100%;\n  position: fixed;\n  overflow: hidden;\n  border-bottom: 2px solid rgba(249, 249, 249, 1);\n  .android-header {\n    position: relative;\n  }\n  .header-search {\n    display: flex;\n    padding: 26px 0;\n    position: relative;\n    background: #fff;\n    justify-content: center;\n  }\n  .icon-sousuo {\n    top: 50%;\n    left: 50px;\n    font-size: 24px;\n    position: absolute;\n    transform: translateY(-50%);\n  }\n  .input {\n    width: 700px;\n    height: 64px;\n    outline: none;\n    font-size: 24px;\n    padding-left: 70px;\n    border-radius: 12px;\n    box-sizing: border-box;\n    background: rgba(249, 249, 249, 1);\n  }\n}\n.card-collection-list {\n  .lack {\n    text-align: center;\n    padding: 50px 0;\n    background: #fff;\n  }\n  overflow: hidden;\n}\n.card-item-wrapper {\n  .send {\n    position: absolute;\n    right: 30px;\n    top: 30px;\n    text-align: center;\n    line-height: 50px;\n    width: 110px;\n    height: 50px;\n    background: #274ff3;\n    color: #fff;\n    font-size: 24px;\n    border-radius: 25px;\n  }\n  .tips {\n    height: 42px;\n    background: #fff;\n    padding-left: 20px;\n    font-size: 24px;\n    color: #274ff3;\n    position: absolute;\n    right: 30px;\n    top: 35px;\n  }\n  .tiped {\n    font-size: 24px;\n    color: #c2c2c2;\n    position: absolute;\n    right: 30px;\n    top: 35px;\n  }\n  background: #fff;\n  position: relative;\n  width: 100%;\n  height: 190px;\n  display: flex;\n  padding: 29px 30px;\n  box-sizing: border-box;\n  margin-bottom: 10px;\n}\n</style>"],"sourceRoot":"src/module/mine/maibao"}]}