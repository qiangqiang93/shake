{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/app/webPage/index.vue?vue&type=style&index=0&id=0ec591e6&lang=scss&scoped=true&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/app/webPage/index.vue","mtime":1547623681165},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.app-webPage {\n  width: 100%;\n  overflow: auto;\n  position: relative;\n  -webkit-overflow-scrolling: touch;\n}\n.custom-content {\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n  box-sizing: border-box;\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/module/app/webPage","sourcesContent":["<template>\n  <div class=\"app-webPage\">\n    <AppLoading v-show=\"firstIn\"></AppLoading>\n    <div class=\"custom-wrapper\" :style=\"'background:'+bgcolor\">\n      <div class=\"custom-content\">\n        <template v-for=\"(item, index) in datas\">\n          <CustomComponent :key=\"index\" :index=\"index\" :item=\"item\" :hots=\"popularity\" :canEdit=\"canEdit\" v-if=\"item.isShow\"></CustomComponent>\n        </template>\n      </div>\n    </div>\n    <AppAblum v-if=\"ablum\" :data=\"ablum\" @close=\"closeScale\"></AppAblum>\n  </div>\n</template>\n\n<script>\nimport webPage from '../../../api/webPage'\n\nimport Wrapper from '../../../components/Wrapper'\nimport AppAblum from '../../../components/AppAblum'\nimport AppLoading from '../../../components/AppLoading'\nimport CustomComponent from '../../../components/CustomComponent'\n\nimport dialogService from '../../../service/dialogService'\n\nexport default {\n  name: 'appWebPage',\n  data() {\n    return {\n      firstIn: true, //是否第一次进入\n      datas: [],\n      ablum: null,\n      bgcolor: '',\n      pageId: null,\n      canEdit: false,\n      components: null\n    }\n  },\n  beforeMount() {\n    this.pageId = this.$route.params.id\n    this.getCustomInfo()\n  },\n  methods: {\n    // 获取自定义网页信息\n    async getCustomInfo() {\n      try {\n        let res = await webPage.getWebPageById(this.pageId)\n        if (res.status !== 0) throw new Error(res.message)\n        this.datas = JSON.parse(res.data.content)\n        this.popularity = res.data.popularity\n        this.bgcolor = res.data.background\n        document.title = res.data.title\n        this.firstIn = false\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 相册\n    scale(index, i) {\n      let ablum = []\n      if (i === 'baseInfo') {\n        ablum = [this.datas[index].infos.avatar.href]\n        i = 0\n      } else {\n        this.datas[index].children.forEach(element => {\n          if (element.type !== 'text') {\n            if (element.type === 'slider') {\n              if (element.isSliderItem) {\n                ablum.push(element.img)\n              }\n            } else {\n              ablum.push(element.img)\n            }\n          }\n        })\n      }\n      // slide的时候bug\n      if (i > ablum.length - 1) {\n        i = ablum.length - 1\n      }\n      this.ablum = {\n        ablum: ablum,\n        index: i\n      }\n    },\n    // 关闭相册\n    closeScale() {\n      this.ablum = null\n    }\n  },\n  components: {\n    Wrapper,\n    AppAblum,\n    AppLoading,\n    CustomComponent\n  }\n}\n</script>\n\n\n\n<style lang=\"scss\" scoped>\n.app-webPage {\n  width: 100%;\n  overflow: auto;\n  position: relative;\n  -webkit-overflow-scrolling: touch;\n}\n.custom-content {\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n  box-sizing: border-box;\n}\n</style>"]}]}