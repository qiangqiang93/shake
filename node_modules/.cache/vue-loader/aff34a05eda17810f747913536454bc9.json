{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/circle/material/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/circle/material/index.vue","mtime":1547110031204},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from 'vuex'\nimport card from '../../../api/card'\nimport circle from '../../../api/circle'\nimport article from '../../../api/article'\nimport webPage from '../../../api/webPage'\nimport Card from '../../../components/Card'\nimport marketing from '../../../api/marketing'\nimport Wrapper from '../../../components/Wrapper'\nimport AppLoading from '../../../components/AppLoading'\nimport ArticleItem from '../../../components/ArticleItem'\nimport WebPageItem from '../../../components/WebPageItem'\nimport dialogService from '../../../service/dialogService'\nimport MarketingItem from '../../../components/MarketingItem'\nimport AppHeader from '../../../components/AppHeader'\nexport default {\n  //   name: 'circleMaterial',\n  data() {\n    return {\n      type: null, // 当前所选分类\n      windowHeight: null,\n      recommandArticle: {\n        data: [], // 该项数据\n        firstIn: true, // 是否第一次加载\n        loading: false // 加载中\n      },\n      collectionArticle: {\n        page: 1, // 当前页码\n        data: [], // 该项数据\n        firstIn: true, // 是否第一次加载\n        allPage: null, // 总页码\n        loading: false // 加载中\n      },\n      webPage: {\n        page: 1, // 当前页码\n        data: [], // 该项数据\n        firstIn: true, // 是否第一次加载\n        allPage: null, // 总页码\n        loading: false // 加载中\n      },\n      marketing: {\n        page: 1, // 当前页码\n        data: [], // 该项数据\n        firstIn: true, // 是否第一次加载\n        allPage: null, // 总页码\n        loading: false // 加载中\n      },\n      card: {\n        data: null, // 名片信息\n        firstIn: true, // 是否第一次加载\n        loading: false, // 加载中\n        selected: false // 是否选择名片\n      }\n    }\n  },\n  mounted() {\n    this.selectCategory(1)\n    this.windowHeight = document.documentElement.clientHeight\n  },\n  methods: {\n    // 获取推荐文章[没有分页,可以一直加载]\n    async getRecommandArticle() {\n      try {\n        this.recommandArticle.loading = true\n        let res = await article.getRecommend()\n        if (res.status !== 0) throw new Error(res.message)\n        if (this.recommandArticle.firstIn) this.recommandArticle.firstIn = false\n        let temp = res.data.data.map(item => {\n          if (this.matchInfo.material_style === 1) {\n            item.selected = this.matchInfo.material_id === item.id\n          } else {\n            item.selected = false\n          }\n          return item\n        })\n        this.recommandArticle.data = this.recommandArticle.data.concat(temp)\n        this.recommandArticle.loading = false\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 获取收藏文章\n    async getFavoriteArticle() {\n      try {\n        this.collectionArticle.loading = true\n        let offset = (this.collectionArticle.page - 1) * 10\n        let res = await article.collectionArticle({ offset, limit: 10 })\n        if (res.status !== 0) throw new Error(res.message)\n        this.collectionArticle.allPage = Math.ceil(res.data.count / 10)\n        if (this.collectionArticle.firstIn) {\n          this.collectionArticle.firstIn = false\n        }\n        let temp = res.data.data.map(item => {\n          if (this.matchInfo.material_style === 1) {\n            item.selected = this.matchInfo.material_id === item.id\n          } else {\n            item.selected = false\n          }\n          return item\n        })\n        this.collectionArticle.data = this.collectionArticle.data.concat(temp)\n        this.collectionArticle.loading = false\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 获取个人微网\n    async getWebPage() {\n      try {\n        this.webPage.loading = true\n        let res = await webPage.getAllWebPage(this.webPage.page)\n        if (res.status !== 0) throw new Error(res.message)\n        this.webPage.loading = false\n        this.webPage.page = res.data.current_page\n        this.webPage.allPage = res.data.last_page\n        if (this.webPage.firstIn) this.webPage.firstIn = false\n        let temp = res.data.data.map(item => {\n          if (this.matchInfo.material_style === 2) {\n            item.selected = this.matchInfo.material_id === item.id\n          } else {\n            item.selected = false\n          }\n          return item\n        })\n        this.webPage.data = this.webPage.data.concat(temp)\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 获取营销网页\n    async getMarketings() {\n      try {\n        this.marketing.loading = true\n        let res = await marketing.getMarketings(this.marketing.page)\n        if (res.status !== 0) throw new Error(res.message)\n        this.marketing.loading = false\n        this.marketing.page = res.data.current_page\n        this.marketing.allPage = res.data.last_page\n        if (this.marketing.firstIn) this.marketing.firstIn = false\n        let temp = res.data.data.map(item => {\n          if (this.matchInfo.material_style === 3) {\n            item.selected = this.matchInfo.material_id === item.id\n          } else {\n            item.selected = false\n          }\n          return item\n        })\n        this.marketing.data = this.marketing.data.concat(temp)\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 获取名片信息\n    async getCardInfo() {\n      try {\n        let res = await card.getCardByUserId(this.user.id)\n        if (res.status !== 0) throw new Error(res.message)\n        this.card = {\n          firstIn: false,\n          data: res.data,\n          selected: this.matchInfo.material_style === 4\n        }\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 点击分类切换到对应的列表\n    selectCategory(type) {\n      let key\n      this.type = type\n      switch (type) {\n        case 1:\n          if (this.recommandArticle.firstIn) {\n            this.getRecommandArticle()\n          }\n          break\n        case 2:\n          if (this.collectionArticle.firstIn) {\n            this.getFavoriteArticle()\n          }\n          break\n        case 3:\n          if (this.webPage.firstIn) {\n            this.getWebPage()\n          }\n          break\n        case 4:\n          if (this.marketing.firstIn) {\n            this.getMarketings()\n          }\n          break\n        case 5:\n          if (this.card.firstIn) {\n            this.getCardInfo()\n          }\n          break\n        default:\n        // nothing\n      }\n    },\n    // 滚动处理函数\n    scrollHandler(scrolled, scrollHeight) {\n      let scrollBottom = this.windowHeight + scrolled > scrollHeight - 20\n      if (!scrollBottom) return\n      switch (this.type) {\n        case 1:\n          if (this.recommandArticle.loading) return\n          this.recommandArticle.page = this.recommandArticle + 1\n          this.getRecommandArticle()\n          break\n        case 2:\n          if (this.collectionArticle.loading) return\n          if (this.collectionArticle.page === this.collectionArticle.allPage) {\n            return false\n          }\n          this.collectionArticle.page = this.collectionArticle + 1\n          this.getFavoriteArticle()\n          break\n        case 3:\n          if (this.webPage.loading) return\n          if (this.webPage.page === this.webPage.allPage) return\n          this.webPage.page = this.webPage + 1\n          this.getWebPage()\n          break\n        case 4:\n          if (this.marketing.loading) return\n          if (this.marketing.page === this.marketing.allPage) return\n          this.marketing.page = this.marketing + 1\n          this.getMarketings()\n          break\n        case 5:\n        // nothing\n        default:\n        // nothing\n      }\n    },\n    // 选择一项\n    select(index) {\n      this.recommandArticle.data = this.recommandArticle.data.map(item => {\n        item.selected = false\n        return item\n      })\n      this.collectionArticle.data = this.collectionArticle.data.map(item => {\n        item.selected = false\n        return item\n      })\n      this.webPage.data = this.webPage.data.map(item => {\n        item.selected = false\n        return item\n      })\n      this.marketing.data = this.marketing.data.map(item => {\n        item.selected = false\n        return item\n      })\n      this.card.selected = false\n      // 显示选中\n      switch (this.type) {\n        case 1:\n          this.$set(this.recommandArticle.data[index], 'selected', true)\n          this.submit(this.recommandArticle.data[index])\n          break\n        case 2:\n          this.$set(this.collectionArticle.data[index], 'selected', true)\n          this.submit(this.collectionArticle.data[index])\n          break\n        case 3:\n          this.$set(this.webPage.data[index], 'selected', true)\n          this.submit(this.webPage.data[index])\n          break\n        case 4:\n          this.$set(this.marketing.data[index], 'selected', true)\n          this.submit(this.marketing.data[index])\n          break\n        case 5:\n          this.$set(this.card, 'selected', true)\n          this.submit(this.card.data)\n          break\n        // nothing\n        default:\n        // nothing\n      }\n    },\n    // 提交所选素材\n    async submit(item) {\n      let params\n      switch (this.type) {\n        case 1:\n        case 2:\n          params = {\n            material_style: 1,\n            material_id: item.id\n          }\n          break\n        case 3:\n          params = {\n            material_style: 2,\n            material_id: item.id\n          }\n          break\n        case 4:\n          params = {\n            material_style: 3,\n            material_id: item.id\n          }\n          break\n        case 5:\n          params = {\n            material_style: 4,\n            material_id: item.card_id\n          }\n          break\n        default:\n        // nothing\n      }\n      try {\n        let res = await circle.updateMatchInfo(params)\n        if (res.status !== 0) throw new Error(res.message)\n        setTimeout(() => {\n          this.$router.back()\n        }, 800)\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    }\n  },\n  computed: {\n    ...mapState({\n      user: state => state.user.userInfo,\n      platform: state => state.system.platform,\n      matchInfo: state => state.circle.matchInfo\n    }),\n    paddingTop: function() {\n      return this.platform !== 'wechat' ? '168px' : '88px'\n    }\n  },\n  components: {\n    Card,\n    Wrapper,\n    AppLoading,\n    ArticleItem,\n    WebPageItem,\n    MarketingItem,\n    AppHeader\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/module/circle/material","sourcesContent":["<template>\n  <Wrapper class=\"material-wrapper\" :paddingTop=\"paddingTop\" @scrolling=\"scrollHandler\">\n    <div ref=\"header\" class=\"material-wrapper-header\">\n      <AppHeader title=\"素材库\" iconColor=\"#fff\" fontColor=\"#fff\" background=\"#274ff3\"></AppHeader>\n      <div class=\"material-wrapper-categorys\">\n        <p class=\"material-wrapper-category\" :class=\"type === 1 ? 'active' : ''\" @click=\"selectCategory(1)\">推荐文章<span class=\"bottom-line\"></span></p>\n        <p class=\"material-wrapper-category\" :class=\"type === 2 ? 'active' : ''\" @click=\"selectCategory(2)\">收藏文章<span class=\"bottom-line\"></span></p>\n        <p class=\"material-wrapper-category\" :class=\"type === 3 ? 'active' : ''\" @click=\"selectCategory(3)\">个人微网<span class=\"bottom-line\"></span></p>\n        <p class=\"material-wrapper-category\" :class=\"type === 4 ? 'active' : ''\" @click=\"selectCategory(4)\">营销网页<span class=\"bottom-line\"></span></p>\n        <p class=\"material-wrapper-category\" :class=\"type === 5 ? 'active' : ''\" @click=\"selectCategory(5)\">名片<span class=\"bottom-line\"></span></p>\n      </div>\n    </div>\n    <div class=\"material--wrapper-lists\">\n      <ul class=\"material--wrapper-list\" v-if=\"type===1\">\n        <AppLoading v-if=\"recommandArticle.firstIn\" visible=\"true\"></AppLoading>\n        <template v-else>\n          <li v-for=\"(item,index) in recommandArticle.data\" :key=\"index\" class=\"material-list-item list-item-article\">\n            <div class=\"list-item-checkbox\" @click=\"select(index)\">\n              <span class=\"material-item-radio\" :class=\"{'active' : item.selected}\">\n                <i class=\"iconfont icon-dagou1\"></i>\n              </span>\n            </div>\n            <div class=\"list-item-content\">\n              <ArticleItem :item=\"item\" :isEdit=\"true\"></ArticleItem>\n            </div>\n          </li>\n        </template>\n      </ul>\n      <ul class=\"material--wrapper-list\" v-if=\"type===2\">\n        <AppLoading v-if=\"collectionArticle.firstIn\" visible=\"true\"></AppLoading>\n        <template v-else>\n          <li v-for=\"(item,index) in collectionArticle.data\" :key=\"index\" class=\"material-list-item list-item-article\">\n            <div class=\"list-item-checkbox\" @click=\"select(index)\">\n              <span class=\"material-item-radio\" :class=\"{'active' : item.selected}\">\n                <i class=\"iconfont icon-dagou1\"></i>\n              </span>\n            </div>\n            <div class=\"list-item-content\">\n              <ArticleItem :item=\"item\" :isEdit=\"true\"></ArticleItem>\n            </div>\n          </li>\n          <li v-if=\"!collectionArticle.data.length\" class=\"empty-images\">\n            <img src=\"./empty-article.png\" alt=\"\" class=\"empty-img\">\n            <p class=\"empty-title\">你还没有收藏文章</p>\n            <router-link tag=\"button\" to=\"/article/index\" class=\"empty-operate\">去收藏</router-link>\n          </li>\n        </template>\n      </ul>\n      <ul class=\"material--wrapper-list\" v-if=\"type===3\">\n        <AppLoading v-if=\"webPage.firstIn\" visible=\"true\"></AppLoading>\n        <template v-else>\n          <li v-for=\"(item,index) in webPage.data\" :key=\"index\" class=\"material-list-item\">\n            <div class=\"list-item-checkbox\" @click=\"select(index)\">\n              <span class=\"material-item-radio\" :class=\"{'active' : item.selected}\">\n                <i class=\"iconfont icon-dagou1\"></i>\n              </span>\n            </div>\n            <div class=\"list-item-content\">\n              <WebPageItem :item=\"item\" :operate=\"false\"></WebPageItem>\n            </div>\n          </li>\n          <li v-if=\"!webPage.data.length\" class=\"empty-images\">\n            <img src=\"./empty-page.png\" alt=\"\" class=\"empty-img\">\n            <p class=\"empty-title\">你还没有个人微网</p>\n            <router-link tag=\"button\" to=\"/webPage/edit\" class=\"empty-operate\">去制作</router-link>\n          </li>\n        </template>\n      </ul>\n      <ul class=\"material--wrapper-list\" v-if=\"type===4\">\n        <AppLoading v-if=\"marketing.firstIn\" visible=\"true\"></AppLoading>\n        <template v-else>\n          <li v-for=\"(item,index) in marketing.data\" :key=\"index\" class=\"material-list-item\">\n            <div class=\"list-item-checkbox\" @click=\"select(index)\">\n              <span class=\"material-item-radio\" :class=\"{'active' : item.selected}\">\n                <i class=\"iconfont icon-dagou1\"></i>\n              </span>\n            </div>\n            <div class=\"list-item-content\">\n              <MarketingItem :item=\"item\" :operate=\"false\"></MarketingItem>\n            </div>\n          </li>\n          <li v-if=\"!marketing.data.length\" class=\"empty-images\">\n            <img src=\"./empty-market.png\" alt=\"\" class=\"empty-img\">\n            <p class=\"empty-title\">你还没有营销网页</p>\n            <router-link tag=\"button\" to=\"/marketing/create\" class=\"empty-operate\">去制作</router-link>\n          </li>\n        </template>\n      </ul>\n      <ul class=\"material--wrapper-list\" v-if=\"type===5\">\n        <AppLoading v-if=\"card.firstIn\" visible=\"true\"></AppLoading>\n        <li v-else class=\"material-list-item\">\n          <div class=\"list-item-checkbox\" @click=\"select()\">\n            <span class=\"material-item-radio\" :class=\"{'active' : card.selected}\">\n              <i class=\"iconfont icon-dagou1\"></i>\n            </span>\n          </div>\n          <div class=\"list-item-content\">\n            <Card :item=\"card.data\" class=\"material-card\"></Card>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </Wrapper>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport card from '../../../api/card'\nimport circle from '../../../api/circle'\nimport article from '../../../api/article'\nimport webPage from '../../../api/webPage'\nimport Card from '../../../components/Card'\nimport marketing from '../../../api/marketing'\nimport Wrapper from '../../../components/Wrapper'\nimport AppLoading from '../../../components/AppLoading'\nimport ArticleItem from '../../../components/ArticleItem'\nimport WebPageItem from '../../../components/WebPageItem'\nimport dialogService from '../../../service/dialogService'\nimport MarketingItem from '../../../components/MarketingItem'\nimport AppHeader from '../../../components/AppHeader'\nexport default {\n  //   name: 'circleMaterial',\n  data() {\n    return {\n      type: null, // 当前所选分类\n      windowHeight: null,\n      recommandArticle: {\n        data: [], // 该项数据\n        firstIn: true, // 是否第一次加载\n        loading: false // 加载中\n      },\n      collectionArticle: {\n        page: 1, // 当前页码\n        data: [], // 该项数据\n        firstIn: true, // 是否第一次加载\n        allPage: null, // 总页码\n        loading: false // 加载中\n      },\n      webPage: {\n        page: 1, // 当前页码\n        data: [], // 该项数据\n        firstIn: true, // 是否第一次加载\n        allPage: null, // 总页码\n        loading: false // 加载中\n      },\n      marketing: {\n        page: 1, // 当前页码\n        data: [], // 该项数据\n        firstIn: true, // 是否第一次加载\n        allPage: null, // 总页码\n        loading: false // 加载中\n      },\n      card: {\n        data: null, // 名片信息\n        firstIn: true, // 是否第一次加载\n        loading: false, // 加载中\n        selected: false // 是否选择名片\n      }\n    }\n  },\n  mounted() {\n    this.selectCategory(1)\n    this.windowHeight = document.documentElement.clientHeight\n  },\n  methods: {\n    // 获取推荐文章[没有分页,可以一直加载]\n    async getRecommandArticle() {\n      try {\n        this.recommandArticle.loading = true\n        let res = await article.getRecommend()\n        if (res.status !== 0) throw new Error(res.message)\n        if (this.recommandArticle.firstIn) this.recommandArticle.firstIn = false\n        let temp = res.data.data.map(item => {\n          if (this.matchInfo.material_style === 1) {\n            item.selected = this.matchInfo.material_id === item.id\n          } else {\n            item.selected = false\n          }\n          return item\n        })\n        this.recommandArticle.data = this.recommandArticle.data.concat(temp)\n        this.recommandArticle.loading = false\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 获取收藏文章\n    async getFavoriteArticle() {\n      try {\n        this.collectionArticle.loading = true\n        let offset = (this.collectionArticle.page - 1) * 10\n        let res = await article.collectionArticle({ offset, limit: 10 })\n        if (res.status !== 0) throw new Error(res.message)\n        this.collectionArticle.allPage = Math.ceil(res.data.count / 10)\n        if (this.collectionArticle.firstIn) {\n          this.collectionArticle.firstIn = false\n        }\n        let temp = res.data.data.map(item => {\n          if (this.matchInfo.material_style === 1) {\n            item.selected = this.matchInfo.material_id === item.id\n          } else {\n            item.selected = false\n          }\n          return item\n        })\n        this.collectionArticle.data = this.collectionArticle.data.concat(temp)\n        this.collectionArticle.loading = false\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 获取个人微网\n    async getWebPage() {\n      try {\n        this.webPage.loading = true\n        let res = await webPage.getAllWebPage(this.webPage.page)\n        if (res.status !== 0) throw new Error(res.message)\n        this.webPage.loading = false\n        this.webPage.page = res.data.current_page\n        this.webPage.allPage = res.data.last_page\n        if (this.webPage.firstIn) this.webPage.firstIn = false\n        let temp = res.data.data.map(item => {\n          if (this.matchInfo.material_style === 2) {\n            item.selected = this.matchInfo.material_id === item.id\n          } else {\n            item.selected = false\n          }\n          return item\n        })\n        this.webPage.data = this.webPage.data.concat(temp)\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 获取营销网页\n    async getMarketings() {\n      try {\n        this.marketing.loading = true\n        let res = await marketing.getMarketings(this.marketing.page)\n        if (res.status !== 0) throw new Error(res.message)\n        this.marketing.loading = false\n        this.marketing.page = res.data.current_page\n        this.marketing.allPage = res.data.last_page\n        if (this.marketing.firstIn) this.marketing.firstIn = false\n        let temp = res.data.data.map(item => {\n          if (this.matchInfo.material_style === 3) {\n            item.selected = this.matchInfo.material_id === item.id\n          } else {\n            item.selected = false\n          }\n          return item\n        })\n        this.marketing.data = this.marketing.data.concat(temp)\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 获取名片信息\n    async getCardInfo() {\n      try {\n        let res = await card.getCardByUserId(this.user.id)\n        if (res.status !== 0) throw new Error(res.message)\n        this.card = {\n          firstIn: false,\n          data: res.data,\n          selected: this.matchInfo.material_style === 4\n        }\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 点击分类切换到对应的列表\n    selectCategory(type) {\n      let key\n      this.type = type\n      switch (type) {\n        case 1:\n          if (this.recommandArticle.firstIn) {\n            this.getRecommandArticle()\n          }\n          break\n        case 2:\n          if (this.collectionArticle.firstIn) {\n            this.getFavoriteArticle()\n          }\n          break\n        case 3:\n          if (this.webPage.firstIn) {\n            this.getWebPage()\n          }\n          break\n        case 4:\n          if (this.marketing.firstIn) {\n            this.getMarketings()\n          }\n          break\n        case 5:\n          if (this.card.firstIn) {\n            this.getCardInfo()\n          }\n          break\n        default:\n        // nothing\n      }\n    },\n    // 滚动处理函数\n    scrollHandler(scrolled, scrollHeight) {\n      let scrollBottom = this.windowHeight + scrolled > scrollHeight - 20\n      if (!scrollBottom) return\n      switch (this.type) {\n        case 1:\n          if (this.recommandArticle.loading) return\n          this.recommandArticle.page = this.recommandArticle + 1\n          this.getRecommandArticle()\n          break\n        case 2:\n          if (this.collectionArticle.loading) return\n          if (this.collectionArticle.page === this.collectionArticle.allPage) {\n            return false\n          }\n          this.collectionArticle.page = this.collectionArticle + 1\n          this.getFavoriteArticle()\n          break\n        case 3:\n          if (this.webPage.loading) return\n          if (this.webPage.page === this.webPage.allPage) return\n          this.webPage.page = this.webPage + 1\n          this.getWebPage()\n          break\n        case 4:\n          if (this.marketing.loading) return\n          if (this.marketing.page === this.marketing.allPage) return\n          this.marketing.page = this.marketing + 1\n          this.getMarketings()\n          break\n        case 5:\n        // nothing\n        default:\n        // nothing\n      }\n    },\n    // 选择一项\n    select(index) {\n      this.recommandArticle.data = this.recommandArticle.data.map(item => {\n        item.selected = false\n        return item\n      })\n      this.collectionArticle.data = this.collectionArticle.data.map(item => {\n        item.selected = false\n        return item\n      })\n      this.webPage.data = this.webPage.data.map(item => {\n        item.selected = false\n        return item\n      })\n      this.marketing.data = this.marketing.data.map(item => {\n        item.selected = false\n        return item\n      })\n      this.card.selected = false\n      // 显示选中\n      switch (this.type) {\n        case 1:\n          this.$set(this.recommandArticle.data[index], 'selected', true)\n          this.submit(this.recommandArticle.data[index])\n          break\n        case 2:\n          this.$set(this.collectionArticle.data[index], 'selected', true)\n          this.submit(this.collectionArticle.data[index])\n          break\n        case 3:\n          this.$set(this.webPage.data[index], 'selected', true)\n          this.submit(this.webPage.data[index])\n          break\n        case 4:\n          this.$set(this.marketing.data[index], 'selected', true)\n          this.submit(this.marketing.data[index])\n          break\n        case 5:\n          this.$set(this.card, 'selected', true)\n          this.submit(this.card.data)\n          break\n        // nothing\n        default:\n        // nothing\n      }\n    },\n    // 提交所选素材\n    async submit(item) {\n      let params\n      switch (this.type) {\n        case 1:\n        case 2:\n          params = {\n            material_style: 1,\n            material_id: item.id\n          }\n          break\n        case 3:\n          params = {\n            material_style: 2,\n            material_id: item.id\n          }\n          break\n        case 4:\n          params = {\n            material_style: 3,\n            material_id: item.id\n          }\n          break\n        case 5:\n          params = {\n            material_style: 4,\n            material_id: item.card_id\n          }\n          break\n        default:\n        // nothing\n      }\n      try {\n        let res = await circle.updateMatchInfo(params)\n        if (res.status !== 0) throw new Error(res.message)\n        setTimeout(() => {\n          this.$router.back()\n        }, 800)\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    }\n  },\n  computed: {\n    ...mapState({\n      user: state => state.user.userInfo,\n      platform: state => state.system.platform,\n      matchInfo: state => state.circle.matchInfo\n    }),\n    paddingTop: function() {\n      return this.platform !== 'wechat' ? '168px' : '88px'\n    }\n  },\n  components: {\n    Card,\n    Wrapper,\n    AppLoading,\n    ArticleItem,\n    WebPageItem,\n    MarketingItem,\n    AppHeader\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.material-wrapper-header {\n  top: 0;\n  z-index: 3;\n  width: 100%;\n  position: fixed;\n  padding: 0 30px;\n  overflow: hidden;\n  background: #fff;\n  box-sizing: border-box;\n}\n.material-wrapper-categorys {\n  width: 100%;\n  height: 88px;\n  display: flex;\n  overflow-x: auto;\n  line-height: 80px;\n  overflow-y: hidden;\n  white-space: nowrap;\n  font-family: 'PingFang SC Medium';\n}\n.material-wrapper-category {\n  float: left;\n  font-size: 30px;\n  padding: 0 40px;\n  color: #999999;\n  position: relative;\n  .bottom-line {\n    width: 0;\n    left: 50%;\n    height: 4px;\n    bottom: 10px;\n    position: absolute;\n    background: #274ff3;\n    transition: all ease 0.4s;\n    transform: translateX(-50%);\n  }\n  &.active {\n    color: #000000;\n    font-family: 'PingFang SC Bold';\n    .bottom-line {\n      width: 60%;\n    }\n  }\n}\n.material-list-item {\n  padding: 30px;\n  display: flex;\n  overflow: hidden;\n  max-height: 405px;\n  box-sizing: border-box;\n  border-bottom: 1px solid #efeff4;\n}\n.empty-images {\n  display: flex;\n  overflow: hidden;\n  margin-top: 40px;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  .empty-img {\n    width: 350px;\n  }\n  .empty-title {\n    margin: 30px;\n    font-size: 32px;\n    color: #484f64;\n    font-family: 'PingFang SC Medium';\n  }\n  .empty-operate {\n    width: 189px;\n    height: 68px;\n    color: #fff;\n    font-size: 32px;\n    border-radius: 34px;\n    background: #274ff3;\n    font-family: 'PingFang SC Medium';\n  }\n}\n.list-item-checkbox {\n  width: 80px;\n  display: flex;\n  align-items: center;\n  .material-item-radio {\n    width: 40px;\n    height: 40px;\n    display: flex;\n    overflow: hidden;\n    align-items: center;\n    border-radius: 20px;\n    justify-content: center;\n    border: 1px solid #afafaf;\n    &.active {\n      background: #274ff3;\n      border-color: #274ff3;\n    }\n  }\n  .icon-dagou1 {\n    color: #fff;\n    font-size: 32px;\n  }\n}\n.list-item-content {\n  width: 610px;\n  .material-card {\n    transform-origin: 0 0;\n    transform: scale(0.86);\n  }\n}\n.list-item-article {\n  padding: 0;\n  display: flex;\n  overflow: hidden;\n  max-height: initial;\n  align-items: center;\n  .list-item-checkbox {\n    width: 85px;\n    display: flex;\n    padding-left: 30px;\n    align-items: center;\n    box-sizing: border-box;\n  }\n  .list-item-content {\n    flex: 1;\n    width: unset;\n  }\n  .article-item {\n    border: none;\n  }\n}\n.material-card {\n  margin: 0 auto;\n}\n</style>\n"]}]}