{"remainingRequest":"/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/circle/src/module/mine/wallet/stream.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/circle/src/module/mine/wallet/stream.vue","mtime":1548296329461},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Wrapper from '../../../components/Wrapper/index'\nimport AppLoading from '../../../components/AppLoading/index'\nimport dialogService from '../../../service/dialogService'\nimport AppHeader from '../../../components/AppHeader'\nimport httpService from '../../../service/httpService'\nimport { mapState } from 'vuex'\nexport default {\n  name: 'mine-stream',\n  data() {\n    return {\n      loading: false, //是否在加载\n      windowHeight: null, //网页长度\n      type: null, //类型\n      firstIn: true, // 是否第一次应用\n      money: '--', // 余额\n      selectName: '全部', // 筛选\n      select: false, // 显示隐藏筛选条件\n      page: 1, //当前页\n      limit: 10, //每页数据\n      lists: [], //列表\n      last_page: null, //共多少页\n      cantLoad: true // 是否能继续加载下一页\n    }\n  },\n  components: {\n    Wrapper,\n    AppHeader,\n    AppLoading\n  },\n  async mounted() {\n    try {\n      let res = await httpService.get('/front/account/wallet')\n      if (res.status !== 0) {\n        throw new Error(res.message)\n      }\n      this.money = res.data.money\n    } catch (err) {\n      dialogService.alert(err)\n    }\n    this.getList()\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    }),\n    paddingTop: function() {\n      return this.platform === 'wechat' ? '0px' : '100px'\n    }\n  },\n  methods: {\n    selectType(name, type) {\n      this.page = 1\n      this.type = type\n      this.selectName = name\n      this.select = false\n      this.getList(false)\n    },\n    // 滚到底加载下一页\n    nextPage(scrolled, scrollHeight) {\n      let scrollBottom = this.windowHeight + scrolled > scrollHeight - 50\n      if (!scrollBottom || this.cantLoad) {\n        return false\n      } else {\n        this.getList(true)\n      }\n    },\n    // 获取列表\n    getList(load) {\n      if (this.loading) return\n      this.loading = true\n      let _self = this\n      httpService\n        .get('/front/account/wallet/bill', {\n          page: this.page,\n          limit: this.limit,\n          type: this.type\n        })\n        .then(res => {\n          if (res.status === 0) {\n            _self.page++\n            _self.last_page = res.data.last_page\n            _self.lists = load\n              ? _self.lists.concat(res.data.data)\n              : res.data.data\n            _self.windowHeight = document.documentElement.clientHeight\n            _self.cantLoad = res.data.current_page === res.data.last_page\n            _self.loading = false\n          } else {\n            throw new Error(res.message)\n            _self.loading = false\n          }\n        })\n        .catch(err => {\n          dialogService.alert(err)\n        })\n      this.firstIn = false\n    }\n  }\n}\n",{"version":3,"sources":["stream.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"stream.vue","sourceRoot":"src/module/mine/wallet","sourcesContent":["<template>\n  <Wrapper @scrolling=\"nextPage\" class=\"warpper\" :paddingTop=\"paddingTop\">\n    <AppHeader ref=\"header\" title=\"资金明细\"></AppHeader>\n    <div class=\"total\">\n      <p class=\"num\">{{money}}</p>\n      <p class=\"tips\">奖励金累计转入(元）</p>\n    </div>\n    <div class=\"search\">\n      <p @click=\"select=true\">{{selectName}}<i class=\"iconfont icon-jian-tou\"></i></p>\n      <div class=\"type-wrap\" v-if=\"select\" @click=\"select=false\">\n        <ul class=\"type\" @click.stop=\"\">\n          <li class=\"list\" :class=\"{active:selectName=='全部'}\" @click=\"selectType('全部')\">全部<i class=\"iconfont icon-dagou1\"></i></li>\n          <li class=\"list\" :class=\"{active:selectName=='奖励金转入'}\" @click=\"selectType('奖励金转入',1)\">奖励金转入<i class=\"iconfont icon-dagou1\"></i></li>\n          <li class=\"list\" :class=\"{active:selectName=='克隆收益'}\" @click=\"selectType('克隆收益',2)\">克隆收益<i class=\"iconfont icon-dagou1\"></i></li>\n          <li class=\"list\" :class=\"{active:selectName=='克隆支出'}\" @click=\"selectType('克隆支出',6)\">克隆支出<i class=\"iconfont icon-dagou1\"></i></li>\n          <li class=\"list\" :class=\"{active:selectName=='会员充值'}\" @click=\"selectType('会员充值',7)\">会员充值<i class=\"iconfont icon-dagou1\"></i></li>\n          <li class=\"list\" :class=\"{active:selectName=='提现'}\" @click=\"selectType('提现',5)\">提现<i class=\"iconfont icon-dagou1\"></i></li>\n        </ul>\n      </div>\n    </div>\n    <div class=\"detail\">\n      <AppLoading v-show=\"firstIn\"></AppLoading>\n      <div class=\"list\" v-for=\"(content,index) in lists\" :key=\"index\">\n        <p class=\"ting\">{{content.describe}}<span class=\"number\">{{content.income_type== 0 ? '-' : '+'}}￥{{content.money}}</span></p>\n        <p class=\"time\">{{content.created_at}}</p>\n      </div>\n      <p class=\"tip\" v-if=\"cantLoad\" v-text=\"lists.length ? '没有更多记录了' : '暂时还没有记录'\"></p>\n      <p class=\"tip\" v-else>正在加载...</p>\n    </div>\n  </Wrapper>\n</template>\n<script>\nimport Wrapper from '../../../components/Wrapper/index'\nimport AppLoading from '../../../components/AppLoading/index'\nimport dialogService from '../../../service/dialogService'\nimport AppHeader from '../../../components/AppHeader'\nimport httpService from '../../../service/httpService'\nimport { mapState } from 'vuex'\nexport default {\n  name: 'mine-stream',\n  data() {\n    return {\n      loading: false, //是否在加载\n      windowHeight: null, //网页长度\n      type: null, //类型\n      firstIn: true, // 是否第一次应用\n      money: '--', // 余额\n      selectName: '全部', // 筛选\n      select: false, // 显示隐藏筛选条件\n      page: 1, //当前页\n      limit: 10, //每页数据\n      lists: [], //列表\n      last_page: null, //共多少页\n      cantLoad: true // 是否能继续加载下一页\n    }\n  },\n  components: {\n    Wrapper,\n    AppHeader,\n    AppLoading\n  },\n  async mounted() {\n    try {\n      let res = await httpService.get('/front/account/wallet')\n      if (res.status !== 0) {\n        throw new Error(res.message)\n      }\n      this.money = res.data.money\n    } catch (err) {\n      dialogService.alert(err)\n    }\n    this.getList()\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    }),\n    paddingTop: function() {\n      return this.platform === 'wechat' ? '0px' : '100px'\n    }\n  },\n  methods: {\n    selectType(name, type) {\n      this.page = 1\n      this.type = type\n      this.selectName = name\n      this.select = false\n      this.getList(false)\n    },\n    // 滚到底加载下一页\n    nextPage(scrolled, scrollHeight) {\n      let scrollBottom = this.windowHeight + scrolled > scrollHeight - 50\n      if (!scrollBottom || this.cantLoad) {\n        return false\n      } else {\n        this.getList(true)\n      }\n    },\n    // 获取列表\n    getList(load) {\n      if (this.loading) return\n      this.loading = true\n      let _self = this\n      httpService\n        .get('/front/account/wallet/bill', {\n          page: this.page,\n          limit: this.limit,\n          type: this.type\n        })\n        .then(res => {\n          if (res.status === 0) {\n            _self.page++\n            _self.last_page = res.data.last_page\n            _self.lists = load\n              ? _self.lists.concat(res.data.data)\n              : res.data.data\n            _self.windowHeight = document.documentElement.clientHeight\n            _self.cantLoad = res.data.current_page === res.data.last_page\n            _self.loading = false\n          } else {\n            throw new Error(res.message)\n            _self.loading = false\n          }\n        })\n        .catch(err => {\n          dialogService.alert(err)\n        })\n      this.firstIn = false\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.warpper {\n  .detail {\n    .tip {\n      padding-bottom: 24px;\n      text-align: center;\n      margin-top: 20px;\n      font-size: 22px;\n    }\n    .list {\n      .ting {\n        color: #010101;\n        font-size: 30px;\n        margin-bottom: 10px;\n        overflow: hidden;\n        .number {\n          float: right;\n        }\n      }\n      .time {\n        color: #777777;\n        font-size: 22px;\n      }\n      position: relative;\n      width: 100%;\n      box-sizing: border-box;\n      padding: 26px 30px;\n      border-bottom: 1px solid #eaeaea;\n    }\n    border-top: 1px solid #eaeaea;\n    width: 100%;\n    box-sizing: border-box;\n    background-color: #fff;\n  }\n  .search {\n    widows: 100px;\n    height: 80px;\n    line-height: 80px;\n    box-sizing: border-box;\n    padding-left: 30px;\n    background: #f2f2f2;\n    font-size: 26px;\n    position: relative;\n    .type-wrap {\n      @keyframes showtip {\n        from {\n          opacity: 0;\n        }\n        to {\n          opacity: 1;\n        }\n      }\n      .type {\n        animation: showtip 0.3s;\n        width: 100%;\n        background: #fff;\n        .list {\n          .icon-dagou1 {\n            color: #fff;\n            font-size: 32px;\n            float: right;\n          }\n          &.active {\n            color: #274ff3;\n            .icon-dagou1 {\n              color: #274ff3;\n            }\n          }\n          height: 84px;\n          line-height: 84px;\n          border-bottom: 1px solid #eaeaea;\n          width: 100%;\n          color: #000;\n          font-size: 26px;\n          box-sizing: border-box;\n          padding: 0 30px;\n        }\n      }\n      z-index: 1;\n      width: 100%;\n      height: 1500px;\n      position: absolute;\n      top: 0;\n      left: 0;\n      background: rgba($color: #000000, $alpha: 0.4);\n    }\n    .icon-jian-tou {\n      margin-left: 12px;\n      font-size: 34px;\n      vertical-align: initial;\n    }\n  }\n  .total {\n    .num {\n      font-size: 60px;\n      margin: 70px 0 20px;\n    }\n    .tips {\n      font-size: 24px;\n    }\n    color: #fff;\n    overflow: hidden;\n    width: 100%;\n    height: 240px;\n    text-align: center;\n    background: linear-gradient(to right, #3aa1f9, #274ff3);\n  }\n  color: #000;\n  width: 100%;\n  min-height: 100vh;\n  background: #ffffff;\n  overflow: hidden;\n  position: relative;\n}\n</style>\n \n "]}]}