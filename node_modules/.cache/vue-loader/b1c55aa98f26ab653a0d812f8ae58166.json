{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/mine/feedback/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/mine/feedback/index.vue","mtime":1548296329455},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport config from '@/config'\nimport httpService from '@/service/httpService'\nimport dialogService from '../../../service/dialogService'\nimport AppHeader from '../../../components/AppHeader'\nimport AppUploadImg from '../../../components/AppUploadImg'\nimport { mapState, mapActions } from 'vuex'\n\nexport default {\n  name: 'mine-feedback',\n  data() {\n    return {\n      eventName: `event_${parseInt(Math.random() * 1000)}`,\n      arr: [],\n      text: '',\n      phoneNum: '',\n      maxlength: 11\n    }\n  },\n  mounted() {},\n  beforeRouteLeave(to, from, next) {\n    // 离开清除名片缓存\n    if (to.path !== '/cropper') {\n      this['system/updateRouter']({\n        type: 'del',\n        data: 'mine-feedback'\n      })\n    }\n    next()\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    }),\n    paddingTop: function() {\n      return this.platform === 'wechat' ? '0px' : '100px'\n    }\n  },\n  methods: {\n    ...mapActions(['system/updateCropper', 'system/updateRouter']),\n    // 删除图片\n    delpic(index) {\n      this.arr.splice(index, 1)\n    },\n    // 上传图片\n    upload(path) {\n      this.arr.push(path)\n    },\n    // 提交\n    submit() {\n      if (this.phoneNum === '') {\n        dialogService.alert('请输入手机号')\n        return\n      } else if (this.text === '') {\n        dialogService.alert('请留下你的反馈意见或建议')\n        return\n      } else {\n        httpService\n          .post('/front/profile/feedback', {\n            content: this.text,\n            phone: this.phoneNum,\n            images: this.arr\n          })\n          .then(res => {\n            if (res.status === 0) {\n              dialogService.toast('上传成功')\n              this.$router.push('/mine')\n            } else {\n              dialogService.alert(res.message)\n            }\n          })\n          .catch(err => {\n            dialogService.alert(err.message)\n            return\n          })\n      }\n    }\n  },\n  components: {\n    AppHeader,\n    AppUploadImg\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/module/mine/feedback","sourcesContent":["<template>\n  <div class=\"feedback\" :style=\"{paddingTop:paddingTop}\">\n    <AppHeader ref=\"header\" title=\"意见反馈\"></AppHeader>\n    <div class=\"title\">\n      <span>手机号 (建议与注册账户一致)</span>\n    </div>\n    <div style=\"position:relative;\">\n      <input class=\"phone\" v-model=\"phoneNum\" :maxlength=\"maxlength\" placeholder=\"请输入11位有效手机号\">\n      <i class=\"iconfont icon-shoujihao\"></i>\n    </div>\n    <div class=\"feedback-view\">\n      <textarea placeholder=\"留下你的反馈意见或建议\" v-model=\"text\"></textarea>\n      <div class=\"uploadpic\">\n        <div class=\"upload\" v-for=\"(item,index) in arr\" :key=\"index\">\n          <img :src=\"item\" />\n          <i class=\"iconfont icon-cuo3\" @click=\"delpic(index)\"></i>\n        </div>\n        <div class=\"upload\" v-show=\"arr.length<3\">\n          <i class=\"iconfont icon-hao\"></i>\n          <AppUploadImg class=\"avatarinput\" @success=\"upload\"></AppUploadImg>\n        </div>\n      </div>\n    </div>\n    <div @click=\"submit\" class=\"tijiao\">提交</div>\n  </div>\n</template>\n<script>\nimport config from '@/config'\nimport httpService from '@/service/httpService'\nimport dialogService from '../../../service/dialogService'\nimport AppHeader from '../../../components/AppHeader'\nimport AppUploadImg from '../../../components/AppUploadImg'\nimport { mapState, mapActions } from 'vuex'\n\nexport default {\n  name: 'mine-feedback',\n  data() {\n    return {\n      eventName: `event_${parseInt(Math.random() * 1000)}`,\n      arr: [],\n      text: '',\n      phoneNum: '',\n      maxlength: 11\n    }\n  },\n  mounted() {},\n  beforeRouteLeave(to, from, next) {\n    // 离开清除名片缓存\n    if (to.path !== '/cropper') {\n      this['system/updateRouter']({\n        type: 'del',\n        data: 'mine-feedback'\n      })\n    }\n    next()\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    }),\n    paddingTop: function() {\n      return this.platform === 'wechat' ? '0px' : '100px'\n    }\n  },\n  methods: {\n    ...mapActions(['system/updateCropper', 'system/updateRouter']),\n    // 删除图片\n    delpic(index) {\n      this.arr.splice(index, 1)\n    },\n    // 上传图片\n    upload(path) {\n      this.arr.push(path)\n    },\n    // 提交\n    submit() {\n      if (this.phoneNum === '') {\n        dialogService.alert('请输入手机号')\n        return\n      } else if (this.text === '') {\n        dialogService.alert('请留下你的反馈意见或建议')\n        return\n      } else {\n        httpService\n          .post('/front/profile/feedback', {\n            content: this.text,\n            phone: this.phoneNum,\n            images: this.arr\n          })\n          .then(res => {\n            if (res.status === 0) {\n              dialogService.toast('上传成功')\n              this.$router.push('/mine')\n            } else {\n              dialogService.alert(res.message)\n            }\n          })\n          .catch(err => {\n            dialogService.alert(err.message)\n            return\n          })\n      }\n    }\n  },\n  components: {\n    AppHeader,\n    AppUploadImg\n  }\n}\n</script>\n<style scoped lang='scss'>\n.feedback {\n  position: relative;\n  width: 100%;\n  height: 100vh;\n  background: #f2f2f2;\n  .uploadpic {\n    display: flex;\n    width: 100%;\n    height: 160px;\n    padding: 20px 0;\n    .avatarinput {\n      top: 0;\n      left: 0;\n      opacity: 0;\n      z-index: 1;\n      width: 100%;\n      height: 100%;\n      position: absolute;\n    }\n    .upload {\n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      margin-right: 20px;\n      position: relative;\n      display: flex;\n      width: 160px;\n      height: 160px;\n      line-height: 160px;\n      justify-content: center;\n      align-content: center;\n      border: 1px dashed #dadada;\n      .icon-hao {\n        font-size: 50px;\n      }\n      .icon-cuo3 {\n        border-radius: 50%;\n        width: 40px;\n        height: 40px;\n        position: absolute;\n        right: -10px;\n        top: -10px;\n        color: #fff;\n        line-height: 40px;\n        text-align: center;\n        background: rgba($color: #000000, $alpha: 0.6);\n        font-size: 20px;\n      }\n    }\n  }\n  .tijiao {\n    width: 690px;\n    height: 80px;\n    line-height: 80px;\n    text-align: center;\n    font-size: 32px;\n    color: #fff;\n    background: #274ff3;\n    border-radius: 6px;\n    margin: 30px auto;\n  }\n  .phone {\n    outline: none;\n    width: 100%;\n    height: 80px;\n    padding: 30px;\n    font-size: 30px;\n    box-sizing: border-box;\n  }\n  .title {\n    font-size: 36px;\n    padding: 40px 30px 30px;\n\n    span {\n      position: relative;\n\n      &:after {\n        content: '*';\n        color: red;\n        font-size: 24px;\n        position: absolute;\n        top: 0;\n      }\n    }\n  }\n\n  .icon-shoujihao {\n    position: absolute;\n    font-size: 30px;\n    right: 30px;\n    top: 20px;\n  }\n\n  .feedback-view {\n    padding: 40px 30px;\n    background: #ffffff;\n    margin-top: 30px;\n\n    textarea {\n      font-size: 30px;\n      outline: none;\n      resize: none;\n      width: 100%;\n      height: 120px;\n      border: none;\n    }\n  }\n}\n</style>\n"]}]}