{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/circle/index/index.vue?vue&type=style&index=0&id=719e581e&lang=scss&scoped=true&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/circle/index/index.vue","mtime":1548404953360},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.circle-wrapper {\n  height: 100vh;\n  padding: 100px 0;\n  background: #181a23;\n}\n.circle-header {\n  top: 0;\n  left: 0;\n  width: 100%;\n  position: fixed;\n}\n.app-header {\n  height: 80px;\n  padding: 0 30px;\n  line-height: 80px;\n  position: relative;\n  background: #fff;\n  box-sizing: border-box;\n  .header-entry {\n    display: flex;\n    font-size: 34px;\n    color: #010101;\n    font-family: 'PingFang SC Bold';\n    .iconfont {\n      font-size: 36px;\n      margin-right: 20px;\n      transition: all ease 0.4s;\n    }\n    .active {\n      transform: rotate(180deg);\n    }\n  }\n  .header-invitation {\n    top: 0;\n    right: 30px;\n    font-size: 24px;\n    color: #333333;\n    position: absolute;\n    font-family: 'PingFang SC Medium';\n  }\n  .icon-help-copy {\n    font-size: 30px;\n    line-height: 80px;\n  }\n}\n.circle-info {\n  height: 32px;\n  color: #fff;\n  padding: 0 30px;\n  font-size: 30px;\n  margin-top: 32px;\n  line-height: 32px;\n  box-sizing: border-box;\n  font-family: 'PingFang SC Medium';\n}\n.circle-material {\n  float: left;\n  width: 450px;\n  overflow: hidden;\n  line-height: 32px;\n  margin-right: 20px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.circle-help,\n.circle-each {\n  float: right;\n  display: flex;\n  font-size: 22px;\n  line-height: 32px;\n  margin-left: 30px;\n  align-items: center;\n  .circle-status {\n    width: 20px;\n    height: 20px;\n    display: block;\n    margin-right: 25px;\n    border-radius: 10px;\n    background: #70e6ff;\n  }\n  .disabled {\n    background: #ccc;\n  }\n}\n.icon-help-copy {\n  font-size: 24px;\n}\n.circle-container {\n  height: 100%;\n  display: flex;\n  overflow: hidden;\n  position: relative;\n  flex-direction: column;\n  justify-content: space-around;\n  canvas {\n    position: absolute;\n  }\n}\n.circle-ball {\n  width: 660px;\n  height: 660px;\n  overflow: hidden;\n  margin: 80px auto;\n}\n.circle-tips-box {\n  color: #fff;\n  overflow: hidden;\n  text-align: center;\n  position: relative;\n  font-family: 'PingFang SC Medium';\n  .circle-small-tips {\n    font-size: 22px;\n    color: #d5d5d5;\n  }\n  .circle-desc-tips {\n    font-size: 24px;\n    margin-top: 20px;\n    color: #ffffff;\n  }\n}\n.circle-btns {\n  display: flex;\n  color: #fff;\n  font-size: 26px;\n  overflow: hidden;\n  margin-top: 60px;\n  position: relative;\n  justify-content: space-around;\n  font-family: 'PingFang SC Medium';\n  .circle-btn {\n    width: 278px;\n    height: 74px;\n    display: flex;\n    line-height: 74px;\n    text-align: center;\n    align-items: center;\n    border-radius: 37px;\n    box-sizing: border-box;\n    justify-content: center;\n    border: 2px solid #708cff;\n  }\n  .share-task-count {\n    width: 28px;\n    height: 28px;\n    display: flex;\n    display: block;\n    line-height: 24px;\n    margin-left: 10px;\n    text-align: center;\n    align-items: center;\n    border-radius: 14px;\n    background: #ff5252;\n    justify-content: center;\n  }\n}\n.circle-terms {\n  top: 50%;\n  left: 50%;\n  z-index: 800;\n  width: 570px;\n  height: 710px;\n  overflow: hidden;\n  position: absolute;\n  background: #fff;\n  margin-top: -355px;\n  margin-left: -285px;\n  border-radius: 10px;\n  transform: scale(0);\n  box-sizing: border-box;\n  padding: 60px 60px 45px;\n  transition: all ease 0.4s;\n  &.show {\n    transform: scale(1);\n  }\n  .circle-terms-title {\n    height: 40px;\n    display: flex;\n    font-size: 34px;\n    color: #000000;\n    line-height: 40px;\n    align-items: center;\n    justify-content: center;\n    font-family: 'PingFang SC Bold';\n    &::before {\n      width: 42px;\n      height: 40px;\n      content: '';\n      display: block;\n      margin-right: 20px;\n      background-size: cover;\n      background-position: center;\n      background-image: url('./title-before.gif');\n    }\n    &::after {\n      width: 42px;\n      height: 40px;\n      content: '';\n      display: block;\n      margin-left: 20px;\n      background-size: cover;\n      background-position: center;\n      background-image: url('./title-after.gif');\n    }\n  }\n  .circle-terms-content {\n    height: 360px;\n    font-size: 28px;\n    color: #444444;\n    overflow: hidden;\n    margin-top: 60px;\n    line-height: 42px;\n    font-family: 'PingFang SC Medium';\n  }\n  .circle-terms-button {\n    width: 430px;\n    height: 76px;\n    font-size: 32px;\n    color: #274ff3;\n    line-height: 76px;\n    margin: 60px auto;\n    text-align: center;\n    border-radius: 38px;\n    border: 1px solid #274ff3;\n    font-family: 'PingFang SC Medium';\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/module/circle/index","sourcesContent":["<template>\n  <Wrapper class=\"circle-wrapper\" :paddingTop=\"paddingTop\" @touchstart.native.stop.prevent=\"nothing()\" @touchmove.native.stop.prevent=\"nothing()\" @touchend.native.stop.prevent=\"nothing()\">\n    <div ref=\"header\" class=\"circle-header\">\n      <div class=\"app-header\" v-if=\"platform !== 'wechat'\">\n        <p class=\"header-entry\">\n          <i class=\"iconfont icon-gongjulandanchu\"></i>\n          素材库\n        </p>\n        <p class=\"header-invitation\">\n          <span class=\"circle-invitation\">邀好友互推</span>\n          <span class=\"circle-help\" @touchstart=\"toggleHelp(true)\">\n            <i class=\"iconfont icon-help-copy\"></i>\n          </span>\n        </p>\n      </div>\n      <div class=\"circle-info\">\n        <p class=\"circle-material\">\n          <span @touchstart=\"goPath('/circle/area')\" v-text=\"'[' + matchInfo.province + ']'\"></span>\n          <span @touchstart=\"goPath('/circle/material')\" v-text=\"matchInfo.material_title\"></span>\n        </p>\n        <p class=\"circle-help\" v-if=\"platform==='wechat'\" @touchstart=\"toggleHelp(true)\">\n          <i class=\"iconfont icon-help-copy\"></i>\n        </p>\n        <p class=\"circle-each\" v-if=\"matchInfo.is_enabled\" @touchstart=\"toggleCircleStatus(0)\"><span class=\"circle-status\"></span>允许匹配</p>\n        <p class=\"circle-each\" v-else @touchstart=\"toggleCircleStatus(1)\"><span class=\"circle-status disabled\"></span>禁止匹配</p>\n      </div>\n    </div>\n    <div ref=\"circle-container\" class=\"circle-container\">\n      <CircleMeteor></CircleMeteor>\n      <CircleBall ref=\"circleBall\" class=\"circle-ball\" :data=\"list\"></CircleBall>\n      <div class=\"circle-tips-box\">\n        <p v-if=\"supportShake\" class=\"circle-small-tips\">摇一摇换一批</p>\n        <p v-else class=\"circle-small-tips\" @touchstart.stop.prevent=\"getMatchList\">点击换一批</p>\n        <p class=\"circle-desc-tips\">匹配成功、互推分享、完成互推</p>\n      </div>\n      <div class=\"circle-btns\">\n        <p class=\"circle-btn\" @touchstart=\"goPath('/circle/history')\">分享记录</p>\n        <p class=\"circle-btn\" @touchstart=\"goPath('/circle/task')\">分享任务\n          <span v-if=\"matchInfo.share_passive_num\" class=\"share-task-count\" v-text=\"matchInfo.share_passive_num\">\n          </span>\n        </p>\n      </div>\n    </div>\n\n    <div class=\"circle-terms\" :class=\"{'show': showHelp}\">\n      <p class=\"circle-terms-title\">互推须知</p>\n      <div class=\"circle-terms-content\">\n        <p class=\"circle-terms-msg\">1、新用户每天主动匹配2次，被动匹配2次；</p>\n        <p class=\"circle-terms-msg\">2、用户累计邀请5位好友且好友参加互推，则每天主动匹配3次，被动匹配3次；</p>\n        <p class=\"circle-terms-msg\">3、用户累计邀请10位好友且好友参加互推，则每天主动匹配4次，被动匹配4次。</p>\n      </div>\n      <div class=\"circle-terms-button\" @touchstart=\"toggleHelp(false)\">\n        我知道了\n      </div>\n    </div>\n  </Wrapper>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport Shake from '../../../utils/shake'\nimport circle from '../../../api/circle'\nimport Wrapper from '../../../components/Wrapper'\nimport CircleBall from '../../../components/CircleBall'\nimport CircleMeteor from '../../../components/CircleMeteor'\nimport dialogService from '../../../service/dialogService'\nexport default {\n  data() {\n    return {\n      list: [], // 互推池列表\n      firstIn: true, // 第一次进入\n      showHelp: false, // 显示帮助\n      supportShake: true, // 是否开启摇一摇\n      shake: new Shake({ vibrate: true }) // 摇一摇实例\n    }\n  },\n  mounted() {\n    let _self = this\n    this.getMatchInfo()\n    this.getMatchList()\n\n    let screenHeight = document.documentElement.clientHeight\n    let realSize = Math.round(screenHeight / 2)\n    let ratio = realSize / 660\n    ratio = ratio > 1 ? 1 : ratio\n    this.$refs.circleBall.$el.style.zoom = ratio\n\n    this.supportShake = this.shake.isSupport()\n    if (this.supportShake) {\n      this.shake.listen(function() {\n        _self.getMatchList()\n      })\n    }\n  },\n  destroyed() {\n    this.shake.destroy()\n  },\n  methods: {\n    // nothing\n    nothing() {},\n    // init()\n    async getMatchList() {\n      try {\n        if (this.loading) {\n          return false\n        }\n        this.loading = !this.firstIn\n        let res = await circle.getMatchList(this.loading)\n        if (res.status !== 0) throw new Error(res.message)\n        try {\n          if (this.loading) document.querySelector('#circleAudio').play()\n        } catch (e) {\n          // nothing\n        }\n        this.firstIn = false\n        this.list = res.data\n        this.loading = false\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 获取自己的互推信息\n    async getMatchInfo() {\n      try {\n        let res = await circle.getMatchInfo()\n        if (res.status !== 0) throw new Error(res.message)\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 关闭、开启互推圈\n    async toggleCircleStatus(val) {\n      try {\n        let res = await circle.updateMatchInfo({ is_enabled: val })\n        if (res.status !== 0) throw new Error(res.message)\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 显示隐藏帮助\n    toggleHelp(input) {\n      this.showHelp = input\n    },\n    // 调转到路径\n    goPath(path) {\n      this.$router.push(path)\n    }\n  },\n  components: {\n    Wrapper,\n    CircleBall,\n    CircleMeteor\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform,\n      matchInfo: state => state.circle.matchInfo\n    }),\n    paddingTop: function() {\n      return this.platform !== 'wechat' ? '160px' : '80px'\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.circle-wrapper {\n  height: 100vh;\n  padding: 100px 0;\n  background: #181a23;\n}\n.circle-header {\n  top: 0;\n  left: 0;\n  width: 100%;\n  position: fixed;\n}\n.app-header {\n  height: 80px;\n  padding: 0 30px;\n  line-height: 80px;\n  position: relative;\n  background: #fff;\n  box-sizing: border-box;\n  .header-entry {\n    display: flex;\n    font-size: 34px;\n    color: #010101;\n    font-family: 'PingFang SC Bold';\n    .iconfont {\n      font-size: 36px;\n      margin-right: 20px;\n      transition: all ease 0.4s;\n    }\n    .active {\n      transform: rotate(180deg);\n    }\n  }\n  .header-invitation {\n    top: 0;\n    right: 30px;\n    font-size: 24px;\n    color: #333333;\n    position: absolute;\n    font-family: 'PingFang SC Medium';\n  }\n  .icon-help-copy {\n    font-size: 30px;\n    line-height: 80px;\n  }\n}\n.circle-info {\n  height: 32px;\n  color: #fff;\n  padding: 0 30px;\n  font-size: 30px;\n  margin-top: 32px;\n  line-height: 32px;\n  box-sizing: border-box;\n  font-family: 'PingFang SC Medium';\n}\n.circle-material {\n  float: left;\n  width: 450px;\n  overflow: hidden;\n  line-height: 32px;\n  margin-right: 20px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.circle-help,\n.circle-each {\n  float: right;\n  display: flex;\n  font-size: 22px;\n  line-height: 32px;\n  margin-left: 30px;\n  align-items: center;\n  .circle-status {\n    width: 20px;\n    height: 20px;\n    display: block;\n    margin-right: 25px;\n    border-radius: 10px;\n    background: #70e6ff;\n  }\n  .disabled {\n    background: #ccc;\n  }\n}\n.icon-help-copy {\n  font-size: 24px;\n}\n.circle-container {\n  height: 100%;\n  display: flex;\n  overflow: hidden;\n  position: relative;\n  flex-direction: column;\n  justify-content: space-around;\n  canvas {\n    position: absolute;\n  }\n}\n.circle-ball {\n  width: 660px;\n  height: 660px;\n  overflow: hidden;\n  margin: 80px auto;\n}\n.circle-tips-box {\n  color: #fff;\n  overflow: hidden;\n  text-align: center;\n  position: relative;\n  font-family: 'PingFang SC Medium';\n  .circle-small-tips {\n    font-size: 22px;\n    color: #d5d5d5;\n  }\n  .circle-desc-tips {\n    font-size: 24px;\n    margin-top: 20px;\n    color: #ffffff;\n  }\n}\n.circle-btns {\n  display: flex;\n  color: #fff;\n  font-size: 26px;\n  overflow: hidden;\n  margin-top: 60px;\n  position: relative;\n  justify-content: space-around;\n  font-family: 'PingFang SC Medium';\n  .circle-btn {\n    width: 278px;\n    height: 74px;\n    display: flex;\n    line-height: 74px;\n    text-align: center;\n    align-items: center;\n    border-radius: 37px;\n    box-sizing: border-box;\n    justify-content: center;\n    border: 2px solid #708cff;\n  }\n  .share-task-count {\n    width: 28px;\n    height: 28px;\n    display: flex;\n    display: block;\n    line-height: 24px;\n    margin-left: 10px;\n    text-align: center;\n    align-items: center;\n    border-radius: 14px;\n    background: #ff5252;\n    justify-content: center;\n  }\n}\n.circle-terms {\n  top: 50%;\n  left: 50%;\n  z-index: 800;\n  width: 570px;\n  height: 710px;\n  overflow: hidden;\n  position: absolute;\n  background: #fff;\n  margin-top: -355px;\n  margin-left: -285px;\n  border-radius: 10px;\n  transform: scale(0);\n  box-sizing: border-box;\n  padding: 60px 60px 45px;\n  transition: all ease 0.4s;\n  &.show {\n    transform: scale(1);\n  }\n  .circle-terms-title {\n    height: 40px;\n    display: flex;\n    font-size: 34px;\n    color: #000000;\n    line-height: 40px;\n    align-items: center;\n    justify-content: center;\n    font-family: 'PingFang SC Bold';\n    &::before {\n      width: 42px;\n      height: 40px;\n      content: '';\n      display: block;\n      margin-right: 20px;\n      background-size: cover;\n      background-position: center;\n      background-image: url('./title-before.gif');\n    }\n    &::after {\n      width: 42px;\n      height: 40px;\n      content: '';\n      display: block;\n      margin-left: 20px;\n      background-size: cover;\n      background-position: center;\n      background-image: url('./title-after.gif');\n    }\n  }\n  .circle-terms-content {\n    height: 360px;\n    font-size: 28px;\n    color: #444444;\n    overflow: hidden;\n    margin-top: 60px;\n    line-height: 42px;\n    font-family: 'PingFang SC Medium';\n  }\n  .circle-terms-button {\n    width: 430px;\n    height: 76px;\n    font-size: 32px;\n    color: #274ff3;\n    line-height: 76px;\n    margin: 60px auto;\n    text-align: center;\n    border-radius: 38px;\n    border: 1px solid #274ff3;\n    font-family: 'PingFang SC Medium';\n  }\n}\n</style>\n"]}]}