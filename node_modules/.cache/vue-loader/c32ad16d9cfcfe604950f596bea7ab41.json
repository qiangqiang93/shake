{"remainingRequest":"/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/circle/src/components/ArticleHeader/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/circle/src/components/ArticleHeader/index.vue","mtime":1548313186311},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from 'vuex'\n\nimport Article from '../../api/article/index'\n\nimport guideService from '../../service/guideService'\nimport dialogService from '../../service/dialogService'\n\nexport default {\n  props: ['input', 'isAuthor'],\n  methods: {\n    // 关注/取消关注\n    async toggleFollow() {\n      if (this.user) {\n        try {\n          let followType = this.input.is_follow ? 'unfollow' : 'follow'\n          let res = await Article[followType](this.input.id)\n          if (res.status !== 0) throw new Error(res.message)\n          this.input.is_follow = !this.input.is_follow\n        } catch (err) {\n          dialogService.alert(err.message)\n        }\n      } else {\n        guideService.login()\n      }\n    },\n    // 跳转到个人微网\n    goWebPage() {\n      let _self = this\n      let userId = this.user ? this.user.id : null\n      if (this.input.id === userId) {\n        if (this.input.has_usertemp) {\n          this.$router.push(`/webPage/detail/${this.input.has_usertemp.id}`)\n        } else {\n          dialogService.confirm('你还没有完善个人微网,是否前往完善', state => {\n            if (state) self.$router.push(`/webPage/edit`)\n          })\n        }\n      } else {\n        if (this.input.has_page) {\n          this.$router.push(`/webPage/detail/${this.input.has_page}`)\n        } else {\n          dialogService.alert('Ta还没有完善个人微网，暂时不能查看')\n        }\n      }\n    }\n  },\n  computed: {\n    ...mapState({\n      user: state => state.user.userInfo\n    })\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ArticleHeader","sourcesContent":["<!-- \n    @name           ArticleHeader\n    @desc           文章详情头部\n    @props \n        input       <object>    作者或分享人信息\n        isAuthor    <boolean>   是否为作者\n -->\n\n<template>\n  <div class=\"article-header-wrapper\" :class=\"{'has-border': !isAuthor}\">\n    <div class=\"article-header-left\" v-if=\"input\">\n      <div class=\"article-header-head\">\n        <img :src=\"input.avatar||input.portrait||'/static/logo.png'\" alt=\"\" class=\"article-header-head-img\">\n      </div>\n      <div class=\"article-header-info\">\n        <template v-if=\"isAuthor\">\n          <span class=\"article-header-name\" v-text=\"input.name\"></span>\n          <span class=\"article-header-desc\" v-text=\"input.created_at?input.created_at.substring(0,10):''\"></span>\n        </template>\n        <template v-else>\n          <span class=\"article-header-name\" v-text=\"input.name\"></span>\n          <span class=\"article-header-desc\" v-text=\"input.motto||'流量  资源  财富'\"></span>\n        </template>\n      </div>\n    </div>\n    <div class=\"article-header-right\">\n      <template v-if=\"isAuthor\">\n        <div class=\"article-header-btn\" v-if=\"input.id !== '0'\" :class=\"{'follow': input.is_follow}\" @click=\"toggleFollow()\">\n          <span v-text=\"input.is_follow ? '已关注' : '关注'\"></span>\n        </div>\n      </template>\n      <template v-else>\n        <div class=\"article-header-btn\" @click=\"goWebPage()\">\n          <span>点击进入</span>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport { mapState } from 'vuex'\n\nimport Article from '../../api/article/index'\n\nimport guideService from '../../service/guideService'\nimport dialogService from '../../service/dialogService'\n\nexport default {\n  props: ['input', 'isAuthor'],\n  methods: {\n    // 关注/取消关注\n    async toggleFollow() {\n      if (this.user) {\n        try {\n          let followType = this.input.is_follow ? 'unfollow' : 'follow'\n          let res = await Article[followType](this.input.id)\n          if (res.status !== 0) throw new Error(res.message)\n          this.input.is_follow = !this.input.is_follow\n        } catch (err) {\n          dialogService.alert(err.message)\n        }\n      } else {\n        guideService.login()\n      }\n    },\n    // 跳转到个人微网\n    goWebPage() {\n      let _self = this\n      let userId = this.user ? this.user.id : null\n      if (this.input.id === userId) {\n        if (this.input.has_usertemp) {\n          this.$router.push(`/webPage/detail/${this.input.has_usertemp.id}`)\n        } else {\n          dialogService.confirm('你还没有完善个人微网,是否前往完善', state => {\n            if (state) self.$router.push(`/webPage/edit`)\n          })\n        }\n      } else {\n        if (this.input.has_page) {\n          this.$router.push(`/webPage/detail/${this.input.has_page}`)\n        } else {\n          dialogService.alert('Ta还没有完善个人微网，暂时不能查看')\n        }\n      }\n    }\n  },\n  computed: {\n    ...mapState({\n      user: state => state.user.userInfo\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.article-header-wrapper {\n  width: 100%;\n  z-index: 10;\n  display: flex;\n  padding: 20px 40px;\n  background: #ffffff;\n  box-sizing: border-box;\n  &.has-border {\n    box-shadow: 0 2px 16px rgba(0, 0, 0, 0.06);\n  }\n}\n.article-header-left {\n  flex: 1;\n  display: flex;\n  .article-header-head {\n    width: 64px;\n    height: 64px;\n  }\n  .article-header-head-img {\n    width: 64px;\n    height: 64px;\n    border-radius: 50%;\n  }\n  .article-header-info {\n    width: 432px;\n    color: #222;\n    font-size: 26px;\n    overflow: hidden;\n    line-height: 23px;\n    line-height: 64px;\n    padding-left: 16px;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n  .article-header-name {\n    display: block;\n    font-size: 28px;\n    line-height: 36px;\n    font-weight: bold;\n  }\n  .article-header-desc {\n    color: #666;\n    display: block;\n    font-size: 24px;\n    margin-top: 4px;\n    line-height: 24px;\n  }\n}\n.article-header-right {\n  width: 130px;\n  height: 50px;\n  flex: 0 0 130px;\n  margin-top: 7px;\n  .article-header-btn {\n    font-size: 24px;\n    color: #ffffff;\n    line-height: 50px;\n    text-align: center;\n    border-radius: 25px;\n    background: #4388e1;\n    box-sizing: border-box;\n    &.follow {\n      background: #fff;\n      border: 2px solid #e8e8e8;\n      color: #999;\n    }\n  }\n}\n</style>"]}]}