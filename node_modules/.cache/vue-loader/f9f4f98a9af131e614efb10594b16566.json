{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/marketing/index/index.vue?vue&type=style&index=0&id=fdd9dcb0&lang=scss&scoped=true&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/marketing/index/index.vue","mtime":1548296329451},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.marketing-index-wrapper {\n  background: #f6f6f6;\n  padding-bottom: 100px;\n}\n.lists-wrapper {\n  overflow: hidden;\n  padding: 20px 30px;\n  box-sizing: border-box;\n}\n.empty-list {\n  width: 356px;\n  display: block;\n  margin: 40px auto;\n}\n.list-item {\n  width: 100%;\n  padding: 30px;\n  border-radius: 6px;\n  background: #fff;\n  margin-bottom: 20px;\n  box-sizing: border-box;\n  box-shadow: 0px 0px 15px 0px rgba(0, 0, 0, 0.08);\n}\n.operate {\n  text-align: center;\n}\n.operate-icon {\n  width: 100px;\n  height: 100px;\n  display: flex;\n  color: #333333;\n  overflow: hidden;\n  align-items: center;\n  border-radius: 50px;\n  background: #f4f4f4;\n  justify-content: center;\n}\n.icon-setting,\n.icon-edit-b,\n.icon-shanchu3 {\n  font-size: 48px;\n}\n.icon-Group- {\n  font-size: 40px;\n}\n.operate-text {\n  color: #333;\n  font-size: 24px;\n  margin-top: 15px;\n  font-family: 'PingFang SC Medium';\n}\n.footer {\n  bottom: 0;\n  width: 100%;\n  height: 80px;\n  color: #fff;\n  font-size: 32px;\n  position: fixed;\n  font-weight: 500;\n  line-height: 80px;\n  text-align: center;\n  font-family: 'PingFang SC';\n  background: linear-gradient(\n    90deg,\n    rgba(39, 79, 243, 1) 0%,\n    rgba(16, 174, 255, 1) 100%\n  );\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/module/marketing/index","sourcesContent":["<template>\n  <Wrapper class=\"marketing-index-wrapper\" :paddingTop=\"paddingTop\">\n    <AppHeader ref=\"header\" title=\"营销网页\"></AppHeader>\n    <div class=\"lists-wrapper\" v-if=\"marketings.length\">\n      <template v-for=\"(item,index) in marketings\">\n        <div class=\"list-item\" :key=\"index\">\n          <MarketingItem :item=\"item\" operate=\"true\" @operate=\"operateItem(index)\"></MarketingItem>\n        </div>\n      </template>\n    </div>\n    <div class=\"lists-wrapper\" v-else>\n      <img src=\"./empty.png\" alt=\"\" class=\"empty-list\">\n    </div>\n    <div ref=\"footer\" class=\"footer\" @click=\"create()\">立即制作</div>\n    <Operator :show=\"showOperator\" v-model=\"showOperator\">\n      <div class=\"operate\" @click=\"goEdit()\">\n        <div class=\"operate-icon\">\n          <i class=\"iconfont icon-edit-b\"></i>\n        </div>\n        <p class=\"operate-text\">修改</p>\n      </div>\n      <div class=\"operate\" @click=\"delItem()\">\n        <div class=\"operate-icon\">\n          <i class=\"iconfont icon-shanchu3\"></i>\n        </div>\n        <p class=\"operate-text\">删除</p>\n      </div>\n    </Operator>\n  </Wrapper>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex'\nimport marketing from '../../../api/marketing'\nimport Wrapper from '../../../components/Wrapper'\nimport Operator from '../../../components/Operator'\nimport state from '../../../store/modules/user/state'\nimport dialogService from '../../../service/dialogService'\nimport AppHeader from '../../../components/AppHeader'\nimport MarketingItem from '../../../components/MarketingItem'\nexport default {\n  name: 'marketingIndex',\n  data() {\n    return {\n      current: null, // 当前操作的营销网页索引\n      showOperator: false // 是否显示营销网页操作\n    }\n  },\n  mounted() {\n    this.getMarketings()\n  },\n  methods: {\n    ...mapActions([\n      'marketing/marketings',\n      'marketing/setCache',\n      'system/updateBeVipPath'\n    ]),\n    // 获取营销网页列表\n    async getMarketings() {\n      try {\n        await marketing.getMarketings()\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 管理一个营销网页\n    operateItem(index) {\n      this.current = index\n      this.showOperator = true\n    },\n    // 开通会员操作\n    _openVip(msg) {\n      let _self = this\n      dialogService.confirm('开通会员才能制作多个网页哦，是否去开通？', ok => {\n        if (ok) {\n          _self['system/updateBeVipPath']('/marketing/create')\n          _self.$router.push({\n            path: '/mine/vipCenter'\n          })\n        }\n      })\n    },\n    // 创建营销网页\n    create() {\n      this['marketing/setCache'](null)\n      if (!this.userInfo.vip_level && this.marketings.length) {\n        this._openVip()\n      } else {\n        this.$router.push('/marketing/create')\n      }\n    },\n    // 编辑营销网页\n    goEdit() {\n      let id = this.marketings[this.current].id\n      this['marketing/setCache'](this.marketings[this.current])\n      this.$router.push(`/marketing/edit`)\n    },\n    // 删除营销网页\n    delItem() {\n      let _self = this\n      dialogService.confirm('你确定删除该营销网页', async function(val) {\n        if (val) {\n          try {\n            let id = _self.marketings[_self.current].id\n            let res = await marketing.deleteMarketing(id)\n            if (res.status !== 0) throw new Error(res.message)\n            _self.showOperator = false\n            dialogService.alert('删除成功')\n            _self['marketing/marketings']({\n              type: 'delete',\n              index: _self.current\n            })\n            _self.current = null\n          } catch (err) {\n            dialogService.alert(err.message)\n          }\n        }\n      })\n    }\n  },\n  computed: {\n    ...mapState({\n      userInfo: state => state.user.userInfo,\n      platform: state => state.system.platform,\n      marketings: state => state.marketing.marketings,\n      platform: state => state.system.platform\n    }),\n    paddingTop: function() {\n      return this.platform === 'wechat' ? '0px' : '100px'\n    }\n  },\n  components: {\n    Wrapper,\n    Operator,\n    AppHeader,\n    MarketingItem\n  },\n  watch: {\n    $route(to, from) {\n      if (to.path === '/marketing/index' && from.path === '/marketing/create') {\n        this.getMarketings()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.marketing-index-wrapper {\n  background: #f6f6f6;\n  padding-bottom: 100px;\n}\n.lists-wrapper {\n  overflow: hidden;\n  padding: 20px 30px;\n  box-sizing: border-box;\n}\n.empty-list {\n  width: 356px;\n  display: block;\n  margin: 40px auto;\n}\n.list-item {\n  width: 100%;\n  padding: 30px;\n  border-radius: 6px;\n  background: #fff;\n  margin-bottom: 20px;\n  box-sizing: border-box;\n  box-shadow: 0px 0px 15px 0px rgba(0, 0, 0, 0.08);\n}\n.operate {\n  text-align: center;\n}\n.operate-icon {\n  width: 100px;\n  height: 100px;\n  display: flex;\n  color: #333333;\n  overflow: hidden;\n  align-items: center;\n  border-radius: 50px;\n  background: #f4f4f4;\n  justify-content: center;\n}\n.icon-setting,\n.icon-edit-b,\n.icon-shanchu3 {\n  font-size: 48px;\n}\n.icon-Group- {\n  font-size: 40px;\n}\n.operate-text {\n  color: #333;\n  font-size: 24px;\n  margin-top: 15px;\n  font-family: 'PingFang SC Medium';\n}\n.footer {\n  bottom: 0;\n  width: 100%;\n  height: 80px;\n  color: #fff;\n  font-size: 32px;\n  position: fixed;\n  font-weight: 500;\n  line-height: 80px;\n  text-align: center;\n  font-family: 'PingFang SC';\n  background: linear-gradient(\n    90deg,\n    rgba(39, 79, 243, 1) 0%,\n    rgba(16, 174, 255, 1) 100%\n  );\n}\n</style>\n"]}]}