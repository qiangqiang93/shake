{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/other/marketingRank/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/other/marketingRank/index.vue","mtime":1548236455723},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from 'vuex'\nimport user from '../../../api/user'\nimport Wrapper from '../../../components/Wrapper'\nimport AppLoading from '../../../components/AppLoading'\nimport AppHeader from '../../../components/AppHeader'\nimport MarketingRank from '../../../components/MarketingRank'\nexport default {\n  name: 'otherMarktingRank',\n  data() {\n    return {\n      page: 1, // 当前页码\n      ownRank: 0, // 自己的网页排名\n      marketings: [], // 营销榜单\n      loading: false, // 加载中\n      headerStyle: null, // headerStyle\n      wrapperStyle: null, // wrapperStyle\n      windowHeight: null, // 窗口高度\n      loadmarketing: true // 第一次加载营销榜单\n    }\n  },\n  mounted() {\n    this.getMarketingRank()\n    this.wrapperStyle = {\n      'padding-top': this.platform === 'wechat' ? '0px' : '90px'\n    }\n    this.headerStyle = {\n      height: this.platform === 'wechat' ? '350px' : '320px'\n    }\n    this.windowHeight = document.documentElement.clientHeight\n  },\n  methods: {\n    // 获取营销榜单\n    async getMarketingRank() {\n      try {\n        this.loading = true\n        let res = await user.getMarketingRank(this.page)\n        if (res.status !== 0) throw new Error(res.message)\n        this.marketings = this.marketings.concat(res.data.rank)\n        this.ownRank = res.data.ranking\n        this.loadmarketing = false\n        this.loading = false\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 滚动加载下一页\n    scrollHandler(scrolled, maxScroll) {\n      if (maxScroll - scrolled - this.windowHeight > 40) {\n        if (this.page >= 10) return\n        if (this.loading) return\n        this.page = this.page + 1\n        this.getMarketingRank()\n      }\n    }\n  },\n  components: {\n    Wrapper,\n    AppLoading,\n    AppHeader,\n    MarketingRank\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    })\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/module/other/marketingRank","sourcesContent":["<template>\n  <Wrapper class=\"marketing-rank\" :style=\"wrapperStyle\" @scrolling=\"scrollHandler\" >\n    <AppHeader ref=\"header\" title=\"营销榜单\" iconColor=\"#fff\" fontColor=\"#fff\" background=\"#329af8\">\n      <router-link tag=\"p\" to=\"/activity/marketing\" class=\"raiders-for-app\">\n        营销攻略\n      </router-link>\n    </AppHeader>\n    <div class=\"marketing-rank-header\" :style=\"headerStyle\">\n      <router-link v-if=\"platform === 'wechat'\" tag=\"p\" to=\"/activity/marketing\" class=\"raiders\">\n        营销攻略\n      </router-link>\n      <p class=\"mine-rank\" v-if=\"ownRank\">你的网页目前排名<span v-text=\"ownRank\"></span></p>\n      <p class=\"mine-rank\" v-else>你的网页暂未上榜</p>\n    </div>\n    <div class=\"marketing-rank-wrapper\">\n      <AppLoading v-if=\"loadmarketing\" visible=\"true\"></AppLoading>\n      <MarketingRank v-for=\"(item, index) in marketings\" :key=\"index\" :item=\"item\" :rank=\"index\"></MarketingRank>\n      <AppLoading v-if=\"loading\" type=\"list\"></AppLoading>\n      <div class=\"marketing-rank-tip\" v-if=\"page === 10 && !loading\">只显示营销榜前100名</div>\n    </div>\n  </Wrapper>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport user from '../../../api/user'\nimport Wrapper from '../../../components/Wrapper'\nimport AppLoading from '../../../components/AppLoading'\nimport AppHeader from '../../../components/AppHeader'\nimport MarketingRank from '../../../components/MarketingRank'\nexport default {\n  name: 'otherMarktingRank',\n  data() {\n    return {\n      page: 1, // 当前页码\n      ownRank: 0, // 自己的网页排名\n      marketings: [], // 营销榜单\n      loading: false, // 加载中\n      headerStyle: null, // headerStyle\n      wrapperStyle: null, // wrapperStyle\n      windowHeight: null, // 窗口高度\n      loadmarketing: true // 第一次加载营销榜单\n    }\n  },\n  mounted() {\n    this.getMarketingRank()\n    this.wrapperStyle = {\n      'padding-top': this.platform === 'wechat' ? '0px' : '90px'\n    }\n    this.headerStyle = {\n      height: this.platform === 'wechat' ? '350px' : '320px'\n    }\n    this.windowHeight = document.documentElement.clientHeight\n  },\n  methods: {\n    // 获取营销榜单\n    async getMarketingRank() {\n      try {\n        this.loading = true\n        let res = await user.getMarketingRank(this.page)\n        if (res.status !== 0) throw new Error(res.message)\n        this.marketings = this.marketings.concat(res.data.rank)\n        this.ownRank = res.data.ranking\n        this.loadmarketing = false\n        this.loading = false\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 滚动加载下一页\n    scrollHandler(scrolled, maxScroll) {\n      if (maxScroll - scrolled - this.windowHeight > 40) {\n        if (this.page >= 10) return\n        if (this.loading) return\n        this.page = this.page + 1\n        this.getMarketingRank()\n      }\n    }\n  },\n  components: {\n    Wrapper,\n    AppLoading,\n    AppHeader,\n    MarketingRank\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.raiders-for-app {\n  top: 0;\n  right: 30px;\n  font-size: 26px;\n  color: #fffefe;\n  position: absolute;\n}\n.marketing-rank-header {\n  position: relative;\n  background-position: bottom;\n  background-color: #2f94f8;\n  background-image: url('./headbg.png');\n  .raiders {\n    padding: 30px;\n    font-size: 26px;\n    color: #fffefe;\n    text-align: right;\n    font-family: 'PingFang SC Regular';\n  }\n  .mine-rank {\n    left: 60px;\n    bottom: 60px;\n    font-size: 24px;\n    color: #fffefe;\n    position: absolute;\n    font-family: 'PingFang SC Regular';\n  }\n}\n.marketing-rank-wrapper {\n  min-height: 500px;\n  position: relative;\n}\n.marketing-rank-tip {\n  padding: 24px 0;\n  font-size: 22px;\n  text-align: center;\n  border-top: 1px solid #e0e0e0;\n}\n</style>\n"]}]}