{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/article/classify/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/article/classify/index.vue","mtime":1548212782361},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  import {\n    mapState,\n    mapActions\n  } from 'vuex'\n  import Aritcle from '../../../api/article'\n  import dialogService from '../../../service/dialogService.js'\nimport Wrapper from '../../../components/Wrapper'\nimport AppHeader from '../../../components/AppHeader'\n\n  export default {\n    data() {\n      return {\n        set: [], //已选择标签\n        unset: [], //未选择标签\n        isClick: true // 是否可以点击\n      }\n    },\n    mounted() {\n      this.init()\n    },\n    components:{\nWrapper,\nAppHeader\n    },\n    methods: {\n      ...mapActions([\n        'articles/setSelectedCategory',\n        'articles/setUnSelectedCategory',\n        'articles/setCategorysId'\n      ]),\n      init() {\n        this.set = JSON.parse(JSON.stringify(this.articles.selectedCategory))\n        this.unset = JSON.parse(JSON.stringify(this.articles.unSelectedCategory))\n      },\n      // 删除列表\n      delList(item, index) {\n        if (!item.is_modify) return false\n        this.unset.push(this.set[index])\n        this.set.splice(index, 1)\n      },\n      // 添加列表\n      addList(index) {\n        this.set.push(this.unset[index])\n        this.unset.splice(index, 1)\n      },\n      // 编辑完成\n      async submit() {\n        if (!this.isClick) return false\n        try {\n          let arr = this.set.slice(2).map(item => {\n            return item.id\n          })\n          if (this.user) {\n            this.isClick = false\n            let res = await Aritcle.setUserCategory(arr)\n            if (res.status !== 0) {\n              throw new Error(res.message)\n            }\n            this.isClick = true\n          }\n          // 之前选中的标签被删掉执行,默认现在推荐\n          if (arr.indexOf(this.articles.categorysId) === -1) {\n            this['articles/setCategorysId'](9998)\n          }\n          this['articles/setSelectedCategory'](this.set)\n          this['articles/setUnSelectedCategory'](this.unset)\n          this.$router.go(-1)\n        } catch (error) {\n          dialogService.toast(error.message)\n        }\n      }\n    },\n    computed: {\n      ...mapState({\n        user: state => state.user.userInfo,\n        articles: state => state.articles,\n        platform: state => state.system.platform\n      }),\n      paddingTop: function() {\n        return this.platform !== 'wechat' ? '90px' : '0px'\n      }\n    }\n  }\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/module/article/classify","sourcesContent":["<template>\n  <Wrapper class=\"classify\" :paddingTop=\"paddingTop\">\n      <AppHeader title=\"所有栏目\" ref=\"header\" ></AppHeader>\n\n    <div class=\"edit\">\n      <div class=\"btn\" @click=\"submit\">完成</div>\n    </div>\n    <div class=\"select classify-item\">\n      <div>\n        我的频道&nbsp;&nbsp;&nbsp;<span>点击删除</span>\n      </div>\n      <ul>\n        <li v-for=\"(item,index) in set\" :key=\"item.id\" :class=\"item.is_modify?'':'un-modify'\" @click=\"delList(item,index)\">\n          {{item.title}}\n        </li>\n      </ul>\n    </div>\n    <div class=\"un-select classify-item\">\n      <div>\n        频道推荐&nbsp;&nbsp;&nbsp;<span>点击添加</span>\n      </div>\n      <ul>\n        <li v-for=\"(item ,index) in unset\" :key=\"item.id\" @click=\"addList(index)\">\n          {{item.title}}\n        </li>\n      </ul>\n    </div>\n  </Wrapper>\n</template>\n<script>\n  import {\n    mapState,\n    mapActions\n  } from 'vuex'\n  import Aritcle from '../../../api/article'\n  import dialogService from '../../../service/dialogService.js'\nimport Wrapper from '../../../components/Wrapper'\nimport AppHeader from '../../../components/AppHeader'\n\n  export default {\n    data() {\n      return {\n        set: [], //已选择标签\n        unset: [], //未选择标签\n        isClick: true // 是否可以点击\n      }\n    },\n    mounted() {\n      this.init()\n    },\n    components:{\nWrapper,\nAppHeader\n    },\n    methods: {\n      ...mapActions([\n        'articles/setSelectedCategory',\n        'articles/setUnSelectedCategory',\n        'articles/setCategorysId'\n      ]),\n      init() {\n        this.set = JSON.parse(JSON.stringify(this.articles.selectedCategory))\n        this.unset = JSON.parse(JSON.stringify(this.articles.unSelectedCategory))\n      },\n      // 删除列表\n      delList(item, index) {\n        if (!item.is_modify) return false\n        this.unset.push(this.set[index])\n        this.set.splice(index, 1)\n      },\n      // 添加列表\n      addList(index) {\n        this.set.push(this.unset[index])\n        this.unset.splice(index, 1)\n      },\n      // 编辑完成\n      async submit() {\n        if (!this.isClick) return false\n        try {\n          let arr = this.set.slice(2).map(item => {\n            return item.id\n          })\n          if (this.user) {\n            this.isClick = false\n            let res = await Aritcle.setUserCategory(arr)\n            if (res.status !== 0) {\n              throw new Error(res.message)\n            }\n            this.isClick = true\n          }\n          // 之前选中的标签被删掉执行,默认现在推荐\n          if (arr.indexOf(this.articles.categorysId) === -1) {\n            this['articles/setCategorysId'](9998)\n          }\n          this['articles/setSelectedCategory'](this.set)\n          this['articles/setUnSelectedCategory'](this.unset)\n          this.$router.go(-1)\n        } catch (error) {\n          dialogService.toast(error.message)\n        }\n      }\n    },\n    computed: {\n      ...mapState({\n        user: state => state.user.userInfo,\n        articles: state => state.articles,\n        platform: state => state.system.platform\n      }),\n      paddingTop: function() {\n        return this.platform !== 'wechat' ? '90px' : '0px'\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .classify {\n    .edit {\n      height: 72px;\n      display: flex;\n      padding: 0 30px;\n      box-sizing: border-box;\n      justify-content: flex-end;\n      align-items: center;\n\n      .btn {\n        position: relative;\n        width: 116px;\n        height: 50px;\n        border: 1px solid rgba(39, 79, 243, 1);\n        border-radius: 52px;\n        text-align: center;\n        line-height: 50px;\n        font-size: 28px;\n        color: #274ff3;\n      }\n    }\n\n    .classify-item {\n      margin-top: 50px;\n\n      >div {\n        font-size: 32px;\n        color: #34394c;\n        padding: 0 24px 10px;\n        box-sizing: border-box;\n        border-bottom: 2px solid #f2f2f2;\n\n        span {\n          font-size: 24px;\n          color: #bababa;\n        }\n      }\n\n      ul {\n        width: 100%;\n        padding: 0 35px;\n        box-sizing: border-box;\n        overflow: hidden;\n        min-height: 300px;\n\n        li {\n          float: left;\n          width: 158px;\n          box-sizing: border-box;\n          height: 68px;\n          background: rgba(247, 247, 247, 1);\n          border: 1px solid rgba(233, 233, 233, 1);\n          border-radius: 52px;\n          line-height: 68px;\n          text-align: center;\n          font-size: 28px;\n          color: #676767;\n          margin: 24px 16px 0 0;\n          animation: zoomIn 0.3s ease;\n\n          &:nth-of-type(4n) {\n            margin-right: 0;\n          }\n\n          &.un-modify {\n            color: #274ff3;\n          }\n        }\n      }\n\n      @keyframes zoomIn {\n        from {\n          opacity: 0;\n          -webkit-transform: scale3d(0.3, 0.3, 0.3);\n          transform: scale3d(0.3, 0.3, 0.3);\n        }\n\n        to {\n          opacity: 1;\n        }\n      }\n    }\n  }\n</style>"]}]}