{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/components/ArticleHeader/index.vue?vue&type=style&index=0&id=05f86590&lang=scss&scoped=true&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/components/ArticleHeader/index.vue","mtime":1547019263091},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.author {\n  width: 100%;\n  padding: 2px 20px 0;\n  background: #ffffff;\n  box-sizing: border-box;\n  z-index: 10;\n\n  &.active {\n    box-shadow: 0 2px 16px rgba(0, 0, 0, 0.06);\n  }\n\n  .content {\n    display: flex;\n    padding: 18px 21px;\n\n    .content-left {\n      flex: 1;\n      font-size: 0;\n\n      .head {\n        width: 64px;\n        height: 64px;\n      }\n\n      .head,\n      .name {\n        display: inline-block;\n        vertical-align: top;\n\n        img {\n          width: 64px;\n          height: 64px;\n          border-radius: 50%;\n        }\n      }\n\n      .name {\n        width: 432px;\n        overflow: hidden;\n        line-height: 23px;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        font-size: 26px;\n        padding-left: 16px;\n        line-height: 64px;\n        color: #222;\n\n        span:nth-child(1) {\n          display: block;\n          line-height: 36px;\n          font-weight: bold;\n          font-size: 28px;\n        }\n\n        span:nth-child(2) {\n          font-size: 24px;\n          line-height: 24px;\n          display: block;\n          margin-top: 4px;\n          color: #666;\n        }\n      }\n    }\n  }\n\n  .content-right {\n    flex: 0 0 130px;\n    height: 50px;\n    width: 130px;\n    margin-top: 7px;\n\n    .card {\n      font-size: 24px;\n      line-height: 50px;\n      background: #4388e1;\n      box-sizing: border-box;\n      color: #ffffff;\n      border-radius: 25px;\n      text-align: center;\n\n      &.off {\n        background: #999;\n      }\n\n      &.active {\n        background: #fff;\n        border: 2px solid #e8e8e8;\n        color: #999;\n      }\n    }\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ArticleHeader","sourcesContent":["<!-- \n    @name ArticleHeader\n    @desc 文章详情头部\n    @props \n        input       <object> 作者或分享人信息\n        top         <string> 区分是否在最顶端，顶端的需要有阴影\n -->\n\n<template>\n  <div class=\"author\" :class=\"[top?'active':'']\">\n    <div class=\"content\" v-if=\"input\">\n      <div class=\"content-left\">\n        <div class=\"head\">\n          <img :src=\"input.avatar||input.portrait||'/static/logo.png'\" alt=\"\">\n        </div>\n        <div class=\"name name-avatar\" v-if=\"input.avatar\">\n          <span>{{input.name}}</span>\n          <span>{{input.created_at?input.created_at.substring(0,10):''}}</span>\n        </div>\n        <div class=\"name name-portrait\" v-else>\n          <span>{{input.name}}</span>\n          <span>{{input.motto||'流量  资源  财富'}}</span>\n        </div>\n      </div>\n      <div class=\"content-right\">\n        <!-- 分享出去未登录时文章作者是汇赢天下 -->\n        <div v-if=\"!user&&input.id  == 0\"></div>\n        <!-- 没有登录且是作者的时候 -->\n        <div class=\"card btn\" @click.stop=\"follow()\" v-else-if=\"!user&&type == 1\">关注</div>\n        <!-- 没有登陆 -->\n        <div class=\"card btn\" @click.stop=\"goPreview()\" v-else-if=\"!user\">点击进入</div>\n        <!-- 登陆了但是是汇赢天下发的文章 -->\n        <div v-else-if=\"input.id  == 0\"></div>\n        <!-- 被封停 -->\n        <div class=\"card off btn\" v-else-if=\"input.is_enabled == 1\">已封停</div>\n        <!-- 登陆状态下自己看文章详情展示的是自己 -->\n        <div class=\"card btn\" @click.stop=\"goPreview()\" v-else-if=\"type == 2\">点击进入</div>\n        <!-- 作者信息 -->\n        <div class=\"card btn\" @click.stop=\"follow()\" v-else-if=\"type == 1\" :class=\"!input.is_follow?'':'active'\">{{!input.is_follow?'关注':'已关注'}}</div>\n        <!-- 其他 -->\n        <div class=\"card btn\" @click.stop=\"goPreview()\" v-else>点击进入</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {\n    mapState,\n    mapActions\n  } from 'vuex'\n  import Article from '../../api/article/index'\n  import dialogService from '../../service/dialogService'\n  import loginTip from '../../utils/loginTip'\n\n  export default {\n    props: ['input', 'top', 'type'],\n    methods: {\n      goPreview() {\n        console.log(this.input, 222)\n        let self = this\n        // 分享者判断这个字段\n        if (this.input.has_page) {\n          this.$router.push({\n            path: `/webPage/detail/${this.input.has_page}`\n          })\n        }\n        // 自己查看自己\n        else if (this.input.has_usertemp) {\n          this.$router.push({\n            path: `/webPage/detail/${this.input.has_usertemp.id}`\n          })\n        } else if (this.input.id === (this.user ? this.user.id : this.user)) {\n          // 如果是自己，网页没完善则调到完善网页去\n          dialogService.confirm('你还没有完善个人网页,是否前往完善', (state) => {\n\n            if (state) {\n              self.$router.push({\n                path: `/webPage/mine`\n              })\n            }\n\n          })\n        } else {\n          dialogService.alert('Ta还没有完善个人网页，暂时不能查看')\n        }\n      },\n      async follow() {\n        if (!this.user) {\n          loginTip(this)\n          return false\n        }\n        if (this.input.id === 0) {\n          // 后端要求\n          return false\n        }\n        try {\n          if (!this.input.is_follow) {\n            let res = await Article.follow(this.input.id)\n            if (res.status !== 0) {\n              throw new Error(res.message)\n            }\n            this.input.is_follow = true\n          } else {\n            let res = await Article.unfollow(this.input.id)\n            if (res.status !== 0) {\n              throw new Error(res.message)\n            }\n            this.input.is_follow = false\n          }\n        } catch (err) {\n          dialogService.toast(err.message)\n        }\n      }\n    },\n    computed: {\n      ...mapState({\n        user: state => state.user.userInfo\n      })\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .author {\n    width: 100%;\n    padding: 2px 20px 0;\n    background: #ffffff;\n    box-sizing: border-box;\n    z-index: 10;\n\n    &.active {\n      box-shadow: 0 2px 16px rgba(0, 0, 0, 0.06);\n    }\n\n    .content {\n      display: flex;\n      padding: 18px 21px;\n\n      .content-left {\n        flex: 1;\n        font-size: 0;\n\n        .head {\n          width: 64px;\n          height: 64px;\n        }\n\n        .head,\n        .name {\n          display: inline-block;\n          vertical-align: top;\n\n          img {\n            width: 64px;\n            height: 64px;\n            border-radius: 50%;\n          }\n        }\n\n        .name {\n          width: 432px;\n          overflow: hidden;\n          line-height: 23px;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          font-size: 26px;\n          padding-left: 16px;\n          line-height: 64px;\n          color: #222;\n\n          span:nth-child(1) {\n            display: block;\n            line-height: 36px;\n            font-weight: bold;\n            font-size: 28px;\n          }\n\n          span:nth-child(2) {\n            font-size: 24px;\n            line-height: 24px;\n            display: block;\n            margin-top: 4px;\n            color: #666;\n          }\n        }\n      }\n    }\n\n    .content-right {\n      flex: 0 0 130px;\n      height: 50px;\n      width: 130px;\n      margin-top: 7px;\n\n      .card {\n        font-size: 24px;\n        line-height: 50px;\n        background: #4388e1;\n        box-sizing: border-box;\n        color: #ffffff;\n        border-radius: 25px;\n        text-align: center;\n\n        &.off {\n          background: #999;\n        }\n\n        &.active {\n          background: #fff;\n          border: 2px solid #e8e8e8;\n          color: #999;\n        }\n      }\n    }\n  }\n</style>"]}]}