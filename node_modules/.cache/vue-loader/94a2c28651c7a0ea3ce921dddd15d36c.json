{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/module/circle/history/index.vue?vue&type=style&index=0&id=4f011a7c&lang=scss&scoped=true&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/module/circle/history/index.vue","mtime":1548810537504},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.circle-history-wrapper {\n  background: #f6f6f6;\n}\n.circle-history-header {\n  top: 0;\n  left: 0;\n  z-index: 1;\n  width: 100%;\n  position: fixed;\n  overflow: hidden;\n  background: #fff;\n  .app-header {\n    position: relative;\n  }\n}\n.circle-history-tabs {\n  height: 88px;\n  display: flex;\n  padding: 0 30px;\n  line-height: 88px;\n  box-sizing: border-box;\n  justify-content: space-around;\n  border-bottom: 1px solid #e1e1e1;\n}\n.circle-history-tab {\n  font-size: 28px;\n  padding: 0 20px;\n  color: #999999;\n  position: relative;\n  box-sizing: border-box;\n  font-family: 'PingFang SC Medium';\n  .bottom-line {\n    width: 0;\n    left: 50%;\n    height: 4px;\n    bottom: 0px;\n    position: absolute;\n    background: #274ff3;\n    transition: all ease 0.4s;\n    transform: translateX(-50%);\n  }\n  &.active {\n    color: #000;\n    .bottom-line {\n      width: 75%;\n    }\n  }\n}\n.circle-history-list {\n  overflow: hidden;\n}\n.circle-history-title {\n  height: 95px;\n  padding: 0 30px;\n  font-size: 30px;\n  margin-top: 10px;\n  color: #333333;\n  line-height: 95px;\n  box-sizing: border-box;\n  font-family: 'PingFang SC Bold';\n  .title-tips {\n    float: right;\n    font-size: 22px;\n    color: #666666;\n  }\n}\n.history-preview-paper {\n  width: 690px;\n  height: 190px;\n  display: flex;\n  margin: 0 auto;\n  overflow: hidden;\n  background: #fff;\n  border-radius: 10px;\n  justify-content: space-around;\n  box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.05);\n  .history-preview {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    font-family: 'PingFang SC Medium';\n  }\n  .history-preview-count {\n    text-align: center;\n    font-size: 24px;\n    color: #999999;\n    margin-bottom: 20px;\n  }\n  .preview-count-num {\n    font-size: 48px;\n    color: #34bd0a;\n    margin-right: 10px;\n  }\n  .history-preview-tip {\n    font-size: 22px;\n    color: #333333;\n  }\n}\n.circle-item-wrapper {\n  margin: 0 auto 30px;\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/module/circle/history","sourcesContent":["<template>\n  <Wrapper class=\"circle-history-wrapper\" :paddingTop=\"paddingTop\" :scrolling=\"scrollHandler\">\n    <div class=\"circle-history-header\">\n      <AppHeader title=\"分享记录\" iconColor=\"#fff\" fontColor=\"#fff\" background=\"#274ff3\"></AppHeader>\n      <div class=\"circle-history-tabs\">\n        <div class=\"circle-history-tab\" :class=\"{'active': isShared}\" @click=\"toggleTab(true)\">\n          互相已分享\n          <span class=\"bottom-line\"></span>\n        </div>\n        <div class=\"circle-history-tab\" :class=\"{'active': !isShared}\" @click=\"toggleTab(false)\">\n          对方未分享\n          <span class=\"bottom-line\"></span>\n          <span class=\"circle-history-new\"></span>\n        </div>\n      </div>\n    </div>\n    <transition>\n      <div class=\"circle-history-list\" v-show=\"isShared\">\n        <div class=\"circle-history-preview\">\n          <p class=\"circle-history-title\">浏览量</p>\n          <div class=\"history-preview-paper\">\n            <div class=\"history-preview\">\n              <p class=\"history-preview-count\">\n                <span class=\"preview-count-num\" v-text=\"matchInfo.forme_brows_num || 0\"></span>\n                <span>次</span>\n              </p>\n              <p class=\"history-preview-tip\">他人为我带来的总浏览量</p>\n            </div>\n            <div class=\"history-preview\">\n              <p class=\"history-preview-count\">\n                <span class=\"preview-count-num\" v-text=\"matchInfo.others_browse_num\"></span>\n                <span>次</span>\n              </p>\n              <p class=\"history-preview-tip\">我为他人带来的总浏览量</p>\n            </div>\n          </div>\n        </div>\n        <p class=\"circle-history-title\">成功互推</p>\n        <CircleItem v-for=\"(item, index) in shared\" :key=\"index\" :item=\"item\" type=\"shared\" class=\"circle-item-wrapper\"></CircleItem>\n      </div>\n    </transition>\n    <transition>\n      <div class=\"circle-history-list\" v-show=\"!isShared\">\n        <p class=\"circle-history-title\">未成功互推\n          <span class=\"title-tips\">您参加了互推分享了他，他未分享你</span>\n        </p>\n        <CircleItem v-for=\"(item, index) in unShare\" :key=\"index\" :item=\"item\" type=\"unShare\" class=\"circle-item-wrapper\"></CircleItem>\n      </div>\n    </transition>\n  </Wrapper>\n</template>\n\n\n<script>\nimport circle from '../../../api/circle'\nimport { mapState, mapActions } from 'vuex'\nimport Wrapper from '../../../components/Wrapper'\nimport CircleItem from '../../../components/CircleItem'\nimport AppHeader from '../../../components/AppHeader'\nimport dialogService from '../../../service/dialogService'\nexport default {\n  data() {\n    return {\n      shared: [], // 互相分享列表\n      unShare: [], // 对方未分享列表\n      sharePage: 1, // 分享记录页码\n      unSharePage: 1, // 对方未分享记录页码\n      isShared: true // 是否选中互相分享\n    }\n  },\n  mounted() {\n    this.getShareHistory()\n    this.getUnShareHistory()\n  },\n  methods: {\n    // 获取相互分享的记录\n    async getShareHistory() {\n      try {\n        let res = await circle.getCircleList(1, this.sharePage)\n        if (res.status !== 0) throw new Error(res.message)\n        let shared = this.shared.concat(\n          res.data.data[0].inter_push_record.concat(\n            res.data.data[0].passive_inter_push_record\n          )\n        )\n        this.shared = shared.sort((a, b) => {\n          let timeA = new Date(a.created_at).getTime()\n          let timeB = new Date(b.created_at).getTime()\n          return timeB - timeA\n        })\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // 获取对方未分享的记录\n    async getUnShareHistory() {\n      try {\n        let res = await circle.getCircleList(2, this.unSharePage)\n        if (res.status !== 0) throw new Error(res.message)\n        this.unShare = this.unShare.concat(res.data.data[0].inter_push_record)\n      } catch (err) {\n        dialogService.alert(err.message)\n      }\n    },\n    // toggleTab\n    toggleTab(val) {\n      this.isShared = val\n    },\n    // scrollHandler\n    scrollHandler(scrolled, scrollHeight) {}\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform,\n      matchInfo: state => state.circle.matchInfo\n    }),\n    paddingTop: function() {\n      return this.platform !== 'wechat' ? '168px' : '88px'\n    }\n  },\n  components: {\n    Wrapper,\n    CircleItem,\n    AppHeader\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.circle-history-wrapper {\n  background: #f6f6f6;\n}\n.circle-history-header {\n  top: 0;\n  left: 0;\n  z-index: 1;\n  width: 100%;\n  position: fixed;\n  overflow: hidden;\n  background: #fff;\n  .app-header {\n    position: relative;\n  }\n}\n.circle-history-tabs {\n  height: 88px;\n  display: flex;\n  padding: 0 30px;\n  line-height: 88px;\n  box-sizing: border-box;\n  justify-content: space-around;\n  border-bottom: 1px solid #e1e1e1;\n}\n.circle-history-tab {\n  font-size: 28px;\n  padding: 0 20px;\n  color: #999999;\n  position: relative;\n  box-sizing: border-box;\n  font-family: 'PingFang SC Medium';\n  .bottom-line {\n    width: 0;\n    left: 50%;\n    height: 4px;\n    bottom: 0px;\n    position: absolute;\n    background: #274ff3;\n    transition: all ease 0.4s;\n    transform: translateX(-50%);\n  }\n  &.active {\n    color: #000;\n    .bottom-line {\n      width: 75%;\n    }\n  }\n}\n.circle-history-list {\n  overflow: hidden;\n}\n.circle-history-title {\n  height: 95px;\n  padding: 0 30px;\n  font-size: 30px;\n  margin-top: 10px;\n  color: #333333;\n  line-height: 95px;\n  box-sizing: border-box;\n  font-family: 'PingFang SC Bold';\n  .title-tips {\n    float: right;\n    font-size: 22px;\n    color: #666666;\n  }\n}\n.history-preview-paper {\n  width: 690px;\n  height: 190px;\n  display: flex;\n  margin: 0 auto;\n  overflow: hidden;\n  background: #fff;\n  border-radius: 10px;\n  justify-content: space-around;\n  box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.05);\n  .history-preview {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    font-family: 'PingFang SC Medium';\n  }\n  .history-preview-count {\n    text-align: center;\n    font-size: 24px;\n    color: #999999;\n    margin-bottom: 20px;\n  }\n  .preview-count-num {\n    font-size: 48px;\n    color: #34bd0a;\n    margin-right: 10px;\n  }\n  .history-preview-tip {\n    font-size: 22px;\n    color: #333333;\n  }\n}\n.circle-item-wrapper {\n  margin: 0 auto 30px;\n}\n</style>\n"]}]}