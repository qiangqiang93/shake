{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/components/Pickers/index.vue?vue&type=style&index=0&id=ac3f9030&lang=scss&scoped=true&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/components/Pickers/index.vue","mtime":1547781185270},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.picker {\n  width: inherit;\n  height: inherit;\n  display: flex;\n  align-items: center;\n\n  .info {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n  }\n}\n\n.picker-mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.3);\n  animation: mymove 0.3s;\n  z-index: 99;\n}\n\n@keyframes mymove {\n  from {\n    background: rgba(0, 0, 0, 0);\n  }\n\n  to {\n    background: rgba(0, 0, 0, 0.3);\n  }\n}\n\n@-webkit-keyframes mymove\n\n  /*Safari and Chrome*/ {\n  from {\n    background: rgba(0, 0, 0, 0);\n  }\n\n  to {\n    background: rgba(0, 0, 0, 0.3);\n  }\n}\n\n.picker-container {\n  position: fixed;\n  left: 0;\n  right: 0;\n  background: #fff;\n  bottom: 0;\n  height: 540px;\n  border-top: 2px solid #f2f2f2;\n  animation: moves 0.3s;\n  z-index: 100;\n\n  @keyframes moves {\n    from {\n      bottom: -540px;\n    }\n\n    to {\n      bottom: 0;\n    }\n  }\n\n  @-webkit-keyframes moves\n\n    /*Safari and Chrome*/ {\n    from {\n      bottom: -540px;\n    }\n\n    to {\n      bottom: 0;\n    }\n  }\n\n  .scroll-div {\n    -webkit-overflow-scrolling: touch;\n  }\n\n  .picker-choose {\n    height: 120px;\n    box-sizing: border-box;\n    padding: 0 40px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 26px;\n    border-bottom: 2px solid #f2f2f2;\n\n    .cancel {\n      color: #999;\n    }\n\n    .confirm {\n      color: #4388e1;\n    }\n  }\n}\n\n.picker-wheel-wrapper {\n  display: flex;\n  padding: 0 20px;\n  box-sizing: border-box;\n  align-items: center;\n  height: 420px;\n  overflow: hidden;\n  position: relative;\n\n  div {\n    flex: 1;\n    font-size: 26px;\n    text-align: center;\n    height: 340px;\n    overflow: auto;\n\n    &::-webkit-scrollbar {\n      display: none;\n    }\n\n    ul {\n      transform: translateY(134px);\n\n      > li {\n        height: 72px;\n        line-height: 72px;\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        -webkit-line-clamp: 1;\n        overflow: hidden;\n        color: #000;\n\n        &:nth-last-of-type(1) {\n          padding-bottom: 134px;\n        }\n      }\n    }\n  }\n\n  i {\n    position: absolute;\n    z-index: 10;\n    left: 0;\n    width: 100%;\n    height: 172px;\n    pointer-events: none;\n    -webkit-transform: translateZ(0);\n    transform: translateZ(0);\n  }\n\n  .border-top {\n    top: 0;\n    background: linear-gradient(\n      0deg,\n      hsla(0, 0%, 100%, 0.4),\n      hsla(0, 0%, 100%, 0.8)\n    );\n    border-bottom: 2px solid #ebebeb;\n  }\n\n  .border-bottom {\n    bottom: 0;\n    background: linear-gradient(\n      180deg,\n      hsla(0, 0%, 100%, 0.4),\n      hsla(0, 0%, 100%, 0.8)\n    );\n    border-top: 2px solid #ebebeb;\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkQA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Pickers","sourcesContent":["<!-- \n    @name   Pickers\n    @desc   选择组件\n    @props\n            value    用于实现v-model 组件外只需要绑定v-model <Array>\n            data     默认json数据 格式为{id:XX,text:XX,children:[{id:xx,text:xx,children:[]}]}\n            msg      提示语 default['请选择']\n-->\n<template>\n  <div class=\"picker\">\n    <div @click=\"show=true\" class=\"info\">{{defalutValue||msg}}</div>\n\n    <div class=\"picker-mask\" @click=\"cancel\" v-if=\"show\"></div>\n    <div class=\"picker-container\" v-if=\"show\">\n      <div class=\"picker-choose\">\n        <span class=\"cancel\" @click=\"cancel\">取消</span>\n        <span class=\"confirm\" @click=\"confirm\">确定</span>\n      </div>\n      <div class=\"picker-wheel-wrapper\">\n        <!-- 上层遮盖 -->\n        <i class=\"border-top\"></i>\n        <!-- 下层遮盖 -->\n        <i class=\"border-bottom\"></i>\n        <!-- 内容区域 -->\n        <div @scroll=\"scrollFn($event,'province')\" class=\"scroll-div\" ref=\"province\" v-if=\"level>=1\">\n          <ul>\n            <li v-for=\" (item,index) in province\" :key=\"index\" @click.stop=\"selectArea($event,index,'province')\">{{item.text}}</li>\n          </ul>\n        </div>\n        <div @scroll=\"scrollFn($event,'city')\" class=\"scroll-div\" ref=\"city\" v-if=\"level>=2\">\n          <ul>\n            <li v-for=\"(item,index) in city\" :key=\"index\" @click.stop=\"selectArea($event,index,'city')\">{{item.text}}</li>\n          </ul>\n        </div>\n        <div @scroll=\"scrollFn($event,'area')\" class=\"scroll-div\" ref=\"area\" v-if=\"level>=3\">\n          <ul>\n            <li v-for=\"(item,index) in area\" :key=\"index\" @click.stop=\"selectArea($event,index,'area')\">{{item.text}}</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      province: [], // 省\n      city: [], // 城市\n      area: [], // 地区\n      select: [], // 选择的值\n      selectName: [], //选择的地区的文本\n      defaultTop: 134, // 默认ul距离父级的高度\n      itemHeight: 72, // 默认li的高度\n      timer: null,\n      isScroll: true,\n      level: 1, // 有几级\n      show: false, // 是都显示弹窗\n      defalutValue: '' // 默认值\n    }\n  },\n  props: ['value', 'data', 'msg'],\n  mounted() {\n    if (!this.msg && !this.defalutValue) this.defalutValue = '请选择'\n  },\n  methods: {\n    init() {\n      // 初始化话\n      this.province = this.data\n      if (this.value && this.value.length) {\n        this.select = this.value\n        this.level = this.value.length\n        this.province.find((item, index) => {\n          this.$nextTick(() => {\n            if (item.id == this.select[0]) {\n              this.selectName[0] = item.text\n              this.$refs.province.scrollTop = index * this.itemHeight\n              if (this.select[1] !== undefined) {\n                item.children.find((its, indexs) => {\n                  if (its.id == this.select[1]) {\n                    this.city = item.children\n                    this.selectName[1] = its.text\n                    this.$nextTick(() => {\n                      this.$refs.city.scrollTop = indexs * this.itemHeight\n                      if (this.select[2] !== undefined) {\n                        its.children.find((it, t) => {\n                          if (it.id == this.select[2]) {\n                            this.selectName[2] = it.text\n                            this.area = its.children\n                            this.$nextTick(() => {\n                              this.$refs.area.scrollTop = t * this.itemHeight\n                            })\n                            return false\n                          }\n                        })\n                      }\n                    })\n                  }\n                  return false\n                })\n              }\n              return false\n            }\n          })\n        })\n      } else {\n        let step2 = false // 2级孩子\n        let step3 = false //3级孩子\n        this.province.map(item => {\n          if (item.children) {\n            step2 = true\n            item.children.map(it => {\n              if (it.children) {\n                step3 = true\n              }\n            })\n          }\n        })\n        if (step2) this.level = 2\n        if (step3) this.level = 3\n        this.select[0] = this.province[0].id\n        this.selectName[0] = this.province[0].text\n        if (this.level >= 2) {\n          this.city = this.province[0].children ? this.province[0].children : []\n          this.select[1] = this.city[0] ? this.city[0].id : ''\n          this.selectName[1] = this.city[0] ? this.city[0].text : ''\n        }\n        if (this.level >= 3) {\n          this.area =\n            this.city[0] && this.city[0].children ? this.city[0].children : []\n          this.select[2] = this.area[0] ? this.area[0].id : ''\n          this.selectName[2] = this.area[0] ? this.area[0].text : ''\n        }\n      }\n    },\n    // 关闭弹窗\n    cancel() {\n      this.show = false\n    },\n    // 设置省\n    setProvince(index) {\n      try {\n        this.$set(this.select, 0, this.province[index].id)\n        this.$set(this.selectName, 0, this.province[index].text)\n        if (this.level >= 2) {\n          this.city = this.province[index].children\n          this.$set(this.select, 1, this.city[0] ? this.city[0].id : '')\n          this.$set(this.selectName, 1, this.city[0] ? this.city[0].text : '')\n          this.$refs.city.scrollTop = 0\n        }\n        if (this.level == 3) {\n          this.area = this.city[0] ? this.city[0].children : []\n          this.$refs.area.scrollTop = 0\n          this.$set(this.select, 2, this.area[0] ? this.area[0].id : '')\n          this.$set(this.selectName, 2, this.area[0] ? this.area[0].text : '')\n        }\n      } catch (err) {\n        console.error(err.message)\n      }\n      setTimeout(() => {\n        this.isScroll = true\n      }, 100)\n    },\n    // 设置城市\n    setCity(index) {\n      this.$set(this.select, 1, this.city[index].id)\n      this.$set(this.selectName, 1, this.city[index].text)\n\n      if (this.level === 3) {\n        this.area = this.city[index].children\n        this.$refs.area.scrollTop = 0\n        this.$set(this.select, 2, this.area[0] ? this.area[0].id : '')\n        this.$set(this.selectName, 2, this.area[0] ? this.area[0].text : '')\n      }\n      setTimeout(() => {\n        this.isScroll = true\n      }, 100)\n    },\n    // 设置城市\n    setArea(index) {\n      this.$set(this.select, 2, this.area[index].id)\n      this.$set(this.selectName, 2, this.area[index].text)\n      setTimeout(() => {\n        this.isScroll = true\n      }, 100)\n    },\n    selectArea(e, index, type) {\n      this.isScroll = false\n      this.smoothRolling(\n        e.srcElement.parentElement.parentElement,\n        5,\n        index,\n        type\n      )\n    },\n    // 平滑滚动\n    /**\n     *  parentSrcElement DOM元素 需要滑动操作的元素\n     *  limts <int> + 步长\n     *  index <number> 选择的地几个元素\n     *  type  <string> 选择的是省还是地区\n     */\n    smoothRolling(parentSrcElement, limts, index, type) {\n      let self = this\n      let rollLimt = parentSrcElement.scrollTop - index * self.itemHeight // 回滚的距离\n      let limt = rollLimt > 0 ? -limts : limts // 步长为5\n\n      var time = setInterval(() => {\n        if (Math.abs(rollLimt) > Math.abs(limt)) {\n          // parentSrcElement.scrollBy(0, limt)\n          parentSrcElement.scrollTop = parentSrcElement.scrollTop + limt\n          rollLimt = rollLimt + limt\n        } else {\n          parentSrcElement.scrollTop = index * self.itemHeight\n          //   parentSrcElement.scrollTo(0, index * self.itemHeight) // 让元素居中\n          if (type === 'province') {\n            self.setProvince(index)\n          } else if (type === 'city') {\n            self.setCity(index)\n          } else if (type === 'area') {\n            self.setArea(index)\n          }\n          clearInterval(time)\n        }\n      }, 5)\n    },\n    // 滚动事件\n    scrollFn(e, type) {\n      let self = this\n      clearTimeout(this.timer)\n      if (this.isScroll) {\n        // 判断是否是因为调整距离而发生的滚动，false正在调整距离，true 才执行\n        let num = Math.round(e.srcElement.scrollTop / this.itemHeight) // 滚动到第几个元素\n        this.timer = setTimeout(() => {\n          // 用setTimeout说明滚动停止了才执行下面的操作\n          self.isScroll = false\n          self.smoothRolling(e.srcElement, 2, num, type)\n        }, 100)\n      }\n    },\n    confirm() {\n      this.defalutValue = this.selectName.join(' ')\n      this.$emit('input', this.select)\n      this.$emit('chinese', this.defalutValue)\n      this.show = false\n    }\n  },\n  watch: {\n    show(newval, oldval) {\n      if (newval) {\n        this.init()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.picker {\n  width: inherit;\n  height: inherit;\n  display: flex;\n  align-items: center;\n\n  .info {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n  }\n}\n\n.picker-mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.3);\n  animation: mymove 0.3s;\n  z-index: 99;\n}\n\n@keyframes mymove {\n  from {\n    background: rgba(0, 0, 0, 0);\n  }\n\n  to {\n    background: rgba(0, 0, 0, 0.3);\n  }\n}\n\n@-webkit-keyframes mymove\n\n  /*Safari and Chrome*/ {\n  from {\n    background: rgba(0, 0, 0, 0);\n  }\n\n  to {\n    background: rgba(0, 0, 0, 0.3);\n  }\n}\n\n.picker-container {\n  position: fixed;\n  left: 0;\n  right: 0;\n  background: #fff;\n  bottom: 0;\n  height: 540px;\n  border-top: 2px solid #f2f2f2;\n  animation: moves 0.3s;\n  z-index: 100;\n\n  @keyframes moves {\n    from {\n      bottom: -540px;\n    }\n\n    to {\n      bottom: 0;\n    }\n  }\n\n  @-webkit-keyframes moves\n\n    /*Safari and Chrome*/ {\n    from {\n      bottom: -540px;\n    }\n\n    to {\n      bottom: 0;\n    }\n  }\n\n  .scroll-div {\n    -webkit-overflow-scrolling: touch;\n  }\n\n  .picker-choose {\n    height: 120px;\n    box-sizing: border-box;\n    padding: 0 40px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 26px;\n    border-bottom: 2px solid #f2f2f2;\n\n    .cancel {\n      color: #999;\n    }\n\n    .confirm {\n      color: #4388e1;\n    }\n  }\n}\n\n.picker-wheel-wrapper {\n  display: flex;\n  padding: 0 20px;\n  box-sizing: border-box;\n  align-items: center;\n  height: 420px;\n  overflow: hidden;\n  position: relative;\n\n  div {\n    flex: 1;\n    font-size: 26px;\n    text-align: center;\n    height: 340px;\n    overflow: auto;\n\n    &::-webkit-scrollbar {\n      display: none;\n    }\n\n    ul {\n      transform: translateY(134px);\n\n      > li {\n        height: 72px;\n        line-height: 72px;\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        -webkit-line-clamp: 1;\n        overflow: hidden;\n        color: #000;\n\n        &:nth-last-of-type(1) {\n          padding-bottom: 134px;\n        }\n      }\n    }\n  }\n\n  i {\n    position: absolute;\n    z-index: 10;\n    left: 0;\n    width: 100%;\n    height: 172px;\n    pointer-events: none;\n    -webkit-transform: translateZ(0);\n    transform: translateZ(0);\n  }\n\n  .border-top {\n    top: 0;\n    background: linear-gradient(\n      0deg,\n      hsla(0, 0%, 100%, 0.4),\n      hsla(0, 0%, 100%, 0.8)\n    );\n    border-bottom: 2px solid #ebebeb;\n  }\n\n  .border-bottom {\n    bottom: 0;\n    background: linear-gradient(\n      180deg,\n      hsla(0, 0%, 100%, 0.4),\n      hsla(0, 0%, 100%, 0.8)\n    );\n    border-top: 2px solid #ebebeb;\n  }\n}\n</style>"]}]}