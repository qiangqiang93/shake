{"remainingRequest":"/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/circle/src/module/message/system/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/circle/src/module/message/system/index.vue","mtime":1548296329453},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/circle/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport messageApi from '../../../api/message/index'\nimport AppLoading from '../../../components/AppLoading/index'\nimport AppHeader from '../../../components/AppHeader'\nimport MessageList from '../../../components/MessageList/index'\nimport Wrapper from '../../../components/Wrapper/index'\nimport dialogService from '../../../service/dialogService'\nimport { mapState } from 'vuex'\nexport default {\n  name: 'message-system',\n  data() {\n    return {\n      maibao: null, // 小脉宝消息\n      pushmsg: null, // 推送消息\n      userLists: [], // 用户消息列表\n      popRed: false, //小红点\n      firstIn: true // 第一次进入\n    }\n  },\n  components: {\n    AppLoading,\n    Wrapper,\n    AppHeader,\n    MessageList\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    }),\n    paddingTop: function() {\n      return this.platform === 'wechat' ? '0px' : '100px'\n    }\n  },\n  async mounted() {\n    Promise.all([\n      messageApi.getXiaomaibao(),\n      messageApi.getUserlist(),\n      messageApi.getPush(1)\n    ])\n      .then(result => {\n        if (result[0].data.list.data) {\n          this.maibao = result[0].data.list.data[0]\n        }\n        this.popRed = result[0].data.pop_flag\n        this.userLists = result[1].data.list.data\n        if (result[2].data.list) {\n          this.pushmsg = result[2].data.list.data[0]\n        }\n        this.firstIn = false\n      })\n      .catch(error => {\n        console.log(error) // 失败了\n        this.firstIn = false\n      })\n  },\n  methods: {\n    touser(id) {\n      this.$router.push('/message/user?id=' + id)\n    }\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/module/message/system","sourcesContent":["<template>\n  <Wrapper :paddingTop=\"paddingTop\">\n    <AppHeader ref=\"header\" title=\"系统消息\"></AppHeader>\n    <!-- loading组件 -->\n    <AppLoading v-if=\"firstIn\"></AppLoading>\n    <!-- 消息列表项模块 -->\n    <MessageList :userLists=\"userLists\" :maibao=\"maibao\" :pushmsg=\"pushmsg\"></MessageList>\n  </Wrapper>\n</template>\n<script>\nimport messageApi from '../../../api/message/index'\nimport AppLoading from '../../../components/AppLoading/index'\nimport AppHeader from '../../../components/AppHeader'\nimport MessageList from '../../../components/MessageList/index'\nimport Wrapper from '../../../components/Wrapper/index'\nimport dialogService from '../../../service/dialogService'\nimport { mapState } from 'vuex'\nexport default {\n  name: 'message-system',\n  data() {\n    return {\n      maibao: null, // 小脉宝消息\n      pushmsg: null, // 推送消息\n      userLists: [], // 用户消息列表\n      popRed: false, //小红点\n      firstIn: true // 第一次进入\n    }\n  },\n  components: {\n    AppLoading,\n    Wrapper,\n    AppHeader,\n    MessageList\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    }),\n    paddingTop: function() {\n      return this.platform === 'wechat' ? '0px' : '100px'\n    }\n  },\n  async mounted() {\n    Promise.all([\n      messageApi.getXiaomaibao(),\n      messageApi.getUserlist(),\n      messageApi.getPush(1)\n    ])\n      .then(result => {\n        if (result[0].data.list.data) {\n          this.maibao = result[0].data.list.data[0]\n        }\n        this.popRed = result[0].data.pop_flag\n        this.userLists = result[1].data.list.data\n        if (result[2].data.list) {\n          this.pushmsg = result[2].data.list.data[0]\n        }\n        this.firstIn = false\n      })\n      .catch(error => {\n        console.log(error) // 失败了\n        this.firstIn = false\n      })\n  },\n  methods: {\n    touser(id) {\n      this.$router.push('/message/user?id=' + id)\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n</style>"]}]}