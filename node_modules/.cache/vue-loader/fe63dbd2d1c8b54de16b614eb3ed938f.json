{"remainingRequest":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiang/work/hytx/hytx-rebuild/src/components/Wrapper/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiang/work/hytx/hytx-rebuild/src/components/Wrapper/index.vue","mtime":1546672509137},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiang/work/hytx/hytx-rebuild/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from 'vuex'\nexport default {\n  name: 'Wrapper',\n  data() {\n    return {\n      header: null,\n      footer: null,\n      //   wrapperStyle: null,\n      scrollHeight: null,\n      windowHeight: null\n    }\n  },\n  props: ['paddingTop'],\n  mounted() {\n    let pageWidth = 750\n    let slots = this.$slots.default\n    this.windowHeight = document.documentElement.clientHeight\n    if (!this.$slots.default) return false\n    try {\n      let vueHeader = slots.find(\n        item => item.data && item.data.ref === 'header'\n      )\n      let vueFooter = slots.find(\n        item => item.data && item.data.ref === 'footer'\n      )\n      this.header = vueHeader ? vueHeader.elm : null\n      this.footer = vueFooter ? vueFooter.elm : null\n    } catch (err) {\n      // nothing\n      console.log(err)\n    }\n    window.addEventListener('scroll', this.scrollHandler, false)\n  },\n  destroyed() {\n    window.removeEventListener('scroll', this.scrollHandler, false)\n  },\n  methods: {\n    scrollHandler() {\n      let scrolled =\n        document.documentElement.scrollTop || document.body.scrollTop\n      this.scrollHeight = document.documentElement.scrollHeight\n      let windowHeight = document.documentElement.clientHeight\n      let updateWindowHeight = this.windowHeight === windowHeight\n      this.windowHeight = updateWindowHeight ? this.windowHeight : windowHeight\n      if (this.header) {\n        this.header.style.position = scrolled <= 0 ? 'absolute' : 'fixed'\n      }\n      if (this.footer) {\n        let scrollBottom = scrolled + this.windowHeight >= this.scrollHeight\n        this.footer.style.position = scrollBottom ? 'absolute' : 'fixed'\n      }\n      this.$emit('scrolling', scrolled, this.scrollHeight)\n      this.$emit('isButton', scrolled + this.windowHeight >= this.scrollHeight)\n    }\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    }),\n    wrapperStyle: function() {\n      if (this.paddingTop) {\n        return {\n          'padding-top': this.paddingTop\n        }\n      } else if (this.header) {\n        return {\n          'padding-top': '100px'\n        }\n      }\n    }\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Wrapper","sourcesContent":["<!-- \n    @name   Wrapper\n    @desc   滚动时固定header和footer并实时监听滚动的容器组件\n    @props\n            slot              插槽\n            scrolling         滚动时的处理函数    实时返回当前滚动位置\n            inheritHeight     是否继承父级高度\n            paddingTop        距离顶端高度\n-->\n\n<template>\n  <div class=\"app-wraper\" :style=\"wrapperStyle\">\n    <slot></slot>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nexport default {\n  name: 'Wrapper',\n  data() {\n    return {\n      header: null,\n      footer: null,\n      //   wrapperStyle: null,\n      scrollHeight: null,\n      windowHeight: null\n    }\n  },\n  props: ['paddingTop'],\n  mounted() {\n    let pageWidth = 750\n    let slots = this.$slots.default\n    this.windowHeight = document.documentElement.clientHeight\n    if (!this.$slots.default) return false\n    try {\n      let vueHeader = slots.find(\n        item => item.data && item.data.ref === 'header'\n      )\n      let vueFooter = slots.find(\n        item => item.data && item.data.ref === 'footer'\n      )\n      this.header = vueHeader ? vueHeader.elm : null\n      this.footer = vueFooter ? vueFooter.elm : null\n    } catch (err) {\n      // nothing\n      console.log(err)\n    }\n    window.addEventListener('scroll', this.scrollHandler, false)\n  },\n  destroyed() {\n    window.removeEventListener('scroll', this.scrollHandler, false)\n  },\n  methods: {\n    scrollHandler() {\n      let scrolled =\n        document.documentElement.scrollTop || document.body.scrollTop\n      this.scrollHeight = document.documentElement.scrollHeight\n      let windowHeight = document.documentElement.clientHeight\n      let updateWindowHeight = this.windowHeight === windowHeight\n      this.windowHeight = updateWindowHeight ? this.windowHeight : windowHeight\n      if (this.header) {\n        this.header.style.position = scrolled <= 0 ? 'absolute' : 'fixed'\n      }\n      if (this.footer) {\n        let scrollBottom = scrolled + this.windowHeight >= this.scrollHeight\n        this.footer.style.position = scrollBottom ? 'absolute' : 'fixed'\n      }\n      this.$emit('scrolling', scrolled, this.scrollHeight)\n      this.$emit('isButton', scrolled + this.windowHeight >= this.scrollHeight)\n    }\n  },\n  computed: {\n    ...mapState({\n      platform: state => state.system.platform\n    }),\n    wrapperStyle: function() {\n      if (this.paddingTop) {\n        return {\n          'padding-top': this.paddingTop\n        }\n      } else if (this.header) {\n        return {\n          'padding-top': '100px'\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.app-wraper {\n  overflow: hidden;\n  min-height: 100vh;\n  position: relative;\n  box-sizing: border-box;\n  background: #fff;\n}\n</style>"]}]}